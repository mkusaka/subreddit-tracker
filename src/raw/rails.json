{"kind": "Listing", "data": {"modhash": "", "dist": 12, "children": [{"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "Please use this thread to discuss **cool** but relatively **unknown** gems you've found.\n\nYou **should not** post popular gems such as [those listed in wiki](https://www.reddit.com/r/rails/wiki/index#wiki_popular_gems) that are already well known.\n\nPlease include a **description** and a **link** to the gem's homepage in your comment.", "author_fullname": "t2_6l4z3", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Gimme Gems Thursdays - Found an awesome new gem? Post it here!", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_iui4p8", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 1.0, "author_flair_background_color": null, "subreddit_type": "public", "ups": 18, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 18, "approved_by": null, "author_premium": true, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1600373192.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;Please use this thread to discuss &lt;strong&gt;cool&lt;/strong&gt; but relatively &lt;strong&gt;unknown&lt;/strong&gt; gems you&amp;#39;ve found.&lt;/p&gt;\n\n&lt;p&gt;You &lt;strong&gt;should not&lt;/strong&gt; post popular gems such as &lt;a href=\"https://www.reddit.com/r/rails/wiki/index#wiki_popular_gems\"&gt;those listed in wiki&lt;/a&gt; that are already well known.&lt;/p&gt;\n\n&lt;p&gt;Please include a &lt;strong&gt;description&lt;/strong&gt; and a &lt;strong&gt;link&lt;/strong&gt; to the gem&amp;#39;s homepage in your comment.&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": true, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": "moderator", "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "iui4p8", "is_robot_indexable": true, "report_reasons": null, "author": "AutoModerator", "discussion_type": null, "num_comments": 7, "send_replies": false, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/iui4p8/gimme_gems_thursdays_found_an_awesome_new_gem/", "parent_whitelist_status": "all_ads", "stickied": true, "url": "https://www.reddit.com/r/rails/comments/iui4p8/gimme_gems_thursdays_found_an_awesome_new_gem/", "subreddit_subscribers": 46038, "created_utc": 1600344392.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "In this thread you can showcase your personal pet project to other redditors.\n\nNeed help with a specific problem or just wanna have some extra eyeballs on your code? Ask away!\n\nA suggested format to get you started:\n\n1. **Name of your project**\n2. **A short description**\n3. **Application stack**\n4. **Link to Live app**\n5. **Link to GitHub**\n6. **You experience level**\n7. **Other information or areas that you would like advice on**\n\n\u00a0\n\n^(Many thanks to Kritnc for getting the ball rolling.)", "author_fullname": "t2_6l4z3", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Personal Projects - Show off your own project and/or ask for advice", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_iya619", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 0.96, "author_flair_background_color": null, "subreddit_type": "public", "ups": 18, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 18, "approved_by": null, "author_premium": true, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1600896760.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;In this thread you can showcase your personal pet project to other redditors.&lt;/p&gt;\n\n&lt;p&gt;Need help with a specific problem or just wanna have some extra eyeballs on your code? Ask away!&lt;/p&gt;\n\n&lt;p&gt;A suggested format to get you started:&lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;&lt;strong&gt;Name of your project&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;A short description&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Application stack&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Link to Live app&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Link to GitHub&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;You experience level&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Other information or areas that you would like advice on&lt;/strong&gt;&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;p&gt;\u00a0&lt;/p&gt;\n\n&lt;p&gt;&lt;sup&gt;Many thanks to Kritnc for getting the ball rolling.&lt;/sup&gt;&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": true, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": "moderator", "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "iya619", "is_robot_indexable": true, "report_reasons": null, "author": "AutoModerator", "discussion_type": null, "num_comments": 16, "send_replies": false, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/iya619/personal_projects_show_off_your_own_project_andor/", "parent_whitelist_status": "all_ads", "stickied": true, "url": "https://www.reddit.com/r/rails/comments/iya619/personal_projects_show_off_your_own_project_andor/", "subreddit_subscribers": 46038, "created_utc": 1600867960.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "I'm trying to customize a rails scaffold so it doesnt go to a new page every time I want to edit or create a new resource. \n\nRight now what I'm doing is using stimulus to prevent default behavior of links, then fetch `e. target.href` to display the form partial within a bootstrap modal. I then use `remote: true` to send the forms w/ javascript and respond with the resource partial like `format.js { render partial: \"partial\", locals: { resource: @resource }, content_type: \"text\" } `. I respond with the resource partial because it gets added to the DOM with `insertAdjacentHTML`.\n\nNow that works and all but it feels kinda hacked together and dirty. Is there a better way to do this?", "author_fullname": "t2_1hwz7luj", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Sending partials over javascript", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_izbmit", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 0.9, "author_flair_background_color": null, "subreddit_type": "public", "ups": 7, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 7, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1601031247.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;I&amp;#39;m trying to customize a rails scaffold so it doesnt go to a new page every time I want to edit or create a new resource. &lt;/p&gt;\n\n&lt;p&gt;Right now what I&amp;#39;m doing is using stimulus to prevent default behavior of links, then fetch &lt;code&gt;e. target.href&lt;/code&gt; to display the form partial within a bootstrap modal. I then use &lt;code&gt;remote: true&lt;/code&gt; to send the forms w/ javascript and respond with the resource partial like &lt;code&gt;format.js { render partial: &amp;quot;partial&amp;quot;, locals: { resource: @resource }, content_type: &amp;quot;text&amp;quot; }&lt;/code&gt;. I respond with the resource partial because it gets added to the DOM with &lt;code&gt;insertAdjacentHTML&lt;/code&gt;.&lt;/p&gt;\n\n&lt;p&gt;Now that works and all but it feels kinda hacked together and dirty. Is there a better way to do this?&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": true, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "izbmit", "is_robot_indexable": true, "report_reasons": null, "author": "mr_transpar3nt", "discussion_type": null, "num_comments": 8, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/izbmit/sending_partials_over_javascript/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/izbmit/sending_partials_over_javascript/", "subreddit_subscribers": 46038, "created_utc": 1601002447.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "Sorry in advance for the overly broad question, but this isn't about bugs so much as it is about architecture and confusion brought on by trying to twist two docs into one objective. My hope is that someone could help untangle my brain.\n\nI would like to: upload (to s3) and process multiple images using Shrine and Uppy with a nested form in Rails.\n\nHowever, what I am getting is a POST request that only creates a parent. The child `photos` are neither uploaded to s3 nor saved to the database.\n\n`Processing by ItemsController#create as HTML`\n\n`Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"[FILTERED]\", \"files\"=&gt;[#&lt;ActionDispatch::Http::UploadedFile:0x00007f9cbc59a050 u/tempfile=#&lt;Tempfile:/var/folders/hj/g_90jx_n7s58m73qlf9h0c4w0000gn/T/RackMultipart20200924-5853-1pb0sdf.jpg&gt;, u/original_filename=\"in.jpg\", u/content_type=\"image/jpeg\", u/headers=\"Content-Disposition: form-data; name=\\\"files[]\\\"; filename=\\\"in.jpg\\\"\\r\\nContent-Type: image/jpeg\\r\\n\"&gt;], \"item\"=&gt;{\"title\"=&gt;\"dip\", \"price\"=&gt;\"900\"}, \"commit\"=&gt;\"Submit\"}`\n\n`Item Create (10.1ms) INSERT INTO \"items\" (\"created_at\", \"updated_at\", \"title\", \"price\", \"user_id\") VALUES ($1, $2, $3, $4, $5) RETURNING \"id\" [[\"created_at\", \"2020-09-24 22:04:41.333195\"], [\"updated_at\", \"2020-09-24 22:04:41.333195\"], [\"title\", \"dip\"], [\"price\", 900], [\"user_id\", 1]]`\n\nThe Shrine docs for [multiple uploads](https://shrinerb.com/docs/multiple-files#4b-direct-upload) suggest a model, controller, and view structure that looks like this:\n\n**Models**\n\n    class Photo &lt; ApplicationRecord\n     include ImagesUploader::Attachment(:image)\n     belongs_to :item\n     validates_presence_of :image\n    end\n    \n    class Item &lt; ApplicationRecord\n     has_many :photos, dependent: :destroy\n     accepts_nested_attributes_for :photos, allow_destroy: true\n    end\n\n**Controller**\n\n    class ItemsController &lt; ApplicationController\n     def create\n      @item = Item.create(item_params)\n      @item.save\n     end\n    \n     private\n     def item_params\n      params.require(:item).permit(:title, photos_attributes: { image: [] })\n     end\n    end\n\n**View**\n\n    &lt;%= form_for @item, html: { enctype: \"multipart/form-data\" } do |f| %&gt;\n     &lt;%= f.text_field :title %&gt;\n     &lt;%= f.fields_for :photos do |i| %&gt;\n      &lt;%= i.label :image %&gt;\n      &lt;%= i.hidden_field :image, value: i.object.cached_photos_data, class: \"upload-data\" %&gt;\n      &lt;%= i.file_field :image, class: \"upload-file\" %&gt;\n     &lt;% end %&gt;\n     &lt;%= file_field_tag \"files[]\", multiple: true %&gt;\n     &lt;%= f.submit \"Submit\" %&gt;\n    &lt;% end %&gt;\n\nIgnoring my confusion over how this double `file_field/file_field_tag` works (and why I only see the latter), I go to [this github wiki](https://github.com/shrinerb/shrine/wiki/Adding-Direct-S3-Uploads) to set up the presign endpoint with an initializer and a route:\n\n**shrine.rb**\n\n    require \"shrine\"\n    require \"shrine/storage/file_system\"\n    require \"shrine/storage/s3\"\n    \n    Shrine.plugin :presign_endpoint, presign_options: -&gt; (request) {\n      filename = request.params[\"filename\"]\n      type     = request.params[\"type\"]\n    \n      {\n        content_disposition:    ContentDisposition.inline(filename), \n        content_type:           type,                                \n        content_length_range:   0..(5*1024*1024),                  \n      }\n    }\n    \n    Shrine.plugin :activerecord\n    Shrine.plugin :cached_attachment_data\n    Shrine.plugin :restore_cached_data\n    Shrine.plugin :validation\n    Shrine.plugin :validation_helpers\n    Shrine.plugin :determine_mime_type, analyzer: :marcel\n    Shrine.plugin :remove_invalid\n\n**routes.rb**\n\n    get 'presign/s3/params', to: 'presigns#image'\n\nMoved response to a controller for authorization:\n\n    class PresignsController &lt; InheritedResources::Base\n     before_action :authenticate_user!\n    \n     def image\n      set_rack_response ImagesUploader.presign_response(:cache, request.env)\n     end\n    \n     private\n     def set_rack_response((status, headers, body))\n      self.status = status\n      self.headers.merge!(headers)\n      self.response_body = body\n     end\n    end\n\nTo confirm that this is set up correctly, I visit `/presign/s3/params?filename=test&amp;type=jpg` and see JSON and my AWS credentials in the browser. Although the browser tab says `ActionController: Exception caught`, it seems to work as expected.\n\nThinking I'm good, I add the uploader and the javascript for handling direct uploads:\n\n**uploader**\n\n    class ImagesUploader &lt; Shrine\n      require \"image_processing/mini_magick\"\n      plugin :pretty_location\n      plugin :derivatives\n    \n      s3 = { \n       bucket: ENV['S3_BUCKET_NAME'],\n       region: ENV['AWS_REGION'],\n       access_key_id: ENV['AWS_ACCESS_KEY_ID'],\n       secret_access_key: ENV['AWS_SECRET_ACCESS_KEY']\n      }\n      Shrine.storages = { \n       cache: Shrine::Storage::S3.new(prefix: \"cache\", **s3), \n       store: Shrine::Storage::S3.new(prefix: \"store\", **s3)\n      }\n    \n      Attacher.validate do\n       validate_min_size\t10.kilobytes\t\n       validate_max_size\t5.megabytes, message: 'must be smaller than 5MB'\n       validate_mime_type \t%w[image/jpeg image/png]\n       validate_extension \t%w[jpg jpeg png]\n      end\n    \n      Attacher.derivatives do |original|\n       magick = ImageProcessing::MiniMagick.source(original)\n       {\n    \tlarge: magick.resize_to_limit!(1000, 1000),\n    \tsmall: magick.resize_and_pad!(225, 220)\n       }\n      end\n    end\n\n**app/javascript/fileUpload.js**\n\n    import 'uppy/dist/uppy.min.css'\n    \n    import {\n      Core,\n      FileInput,\n      Informer,\n      ProgressBar,\n      ThumbnailGenerator,\n      AwsS3,\n    } from 'uppy'\n    \n    function fileUpload(fileInput) {\n      const hiddenInput = document.querySelector('.upload-data'),\n            imagePreview = document.querySelector('.upload-preview img'),\n            formGroup = fileInput.parentNode\n    \n      formGroup.removeChild(fileInput)\n    \n      const uppy = Core({\n          autoProceed: true,\n        })\n        .use(FileInput, {\n          target: formGroup,\n        })\n        .use(Informer, {\n          target: formGroup,\n        })\n        .use(ProgressBar, {\n          target: imagePreview.parentNode,\n        })\n        .use(ThumbnailGenerator, {\n          thumbnailWidth: 600,\n        })\n        .use(AwsS3, {\n          companionUrl: '/presign/s3/params', // i set this to my presign endpoint, which I checked by visting site.com/presign/s3/params?filename=test&amp;type=jpg\n        })\n    \n      uppy.on('thumbnail:generated', (file, preview) =&gt; {\n        imagePreview.src = preview\n      })\n    \n      uppy.on('upload-success', (file, response) =&gt; {\n        const uploadedFileData = {\n          id: file.meta['key'].match(/^cache\\/(.+)/)[1],\n          storage: 'cache',\n          metadata: {\n            size: file.size,\n            filename: file.name,\n            mime_type: file.type,\n          }\n        }\n    \n        hiddenInput.value = JSON.stringify(uploadedFileData)\n      })\n    }\n    \n    export default fileUpload\n\n**javascript/packs/application.js**\n\n    import fileUpload from 'fileUpload'\n    \n    document.addEventListener('turbolinks:load', () =&gt; {\n      document.querySelectorAll('.upload-file').forEach(fileInput =&gt; {\n        fileUpload(fileInput)\n      })\n    })\n\nSome questions.\n\n1. How does that double `file_field` work and why is it that the stray `file_field_tag` is the one that submits the files? I do not intuitively grasp how the two are connected. If the tag is named `files[]`, shouldn't my whitelisted params be something like `photos_attributes: { files: [] }`?\n2. If uppy and shrine upload the files to an s3 cache, how do I get that information into my controller? Presumably I would get a JSON response. The doc has this to say, but I'm confused by what it means:\n\n&gt;Once files are uploaded asynchronously, you can dynamically insert photo attachment fields for the `image` attachment attribute into the form, where the hidden field is filled with uploaded file data in JSON format, just like when doing single direct uploads. The attachment field names should be namespaced according to the convention that the nested attributes feature expects. In this case it should be `album[photos_attributes][&lt;uid&gt;]`, where `&lt;uid&gt;` is any unique string.", "author_fullname": "t2_76cp1k68", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "uploading multiple images to s3 with presign endpoint using shrine and uppy", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_iz9ux5", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 1.0, "author_flair_background_color": null, "subreddit_type": "public", "ups": 3, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 3, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": 1601005388.0, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1601024465.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;Sorry in advance for the overly broad question, but this isn&amp;#39;t about bugs so much as it is about architecture and confusion brought on by trying to twist two docs into one objective. My hope is that someone could help untangle my brain.&lt;/p&gt;\n\n&lt;p&gt;I would like to: upload (to s3) and process multiple images using Shrine and Uppy with a nested form in Rails.&lt;/p&gt;\n\n&lt;p&gt;However, what I am getting is a POST request that only creates a parent. The child &lt;code&gt;photos&lt;/code&gt; are neither uploaded to s3 nor saved to the database.&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;Processing by ItemsController#create as HTML&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;Parameters: {&amp;quot;utf8&amp;quot;=&amp;gt;&amp;quot;\u2713&amp;quot;, &amp;quot;authenticity_token&amp;quot;=&amp;gt;&amp;quot;[FILTERED]&amp;quot;, &amp;quot;files&amp;quot;=&amp;gt;[#&amp;lt;ActionDispatch::Http::UploadedFile:0x00007f9cbc59a050 u/tempfile=#&amp;lt;Tempfile:/var/folders/hj/g_90jx_n7s58m73qlf9h0c4w0000gn/T/RackMultipart20200924-5853-1pb0sdf.jpg&amp;gt;, u/original_filename=&amp;quot;in.jpg&amp;quot;, u/content_type=&amp;quot;image/jpeg&amp;quot;, u/headers=&amp;quot;Content-Disposition: form-data; name=\\&amp;quot;files[]\\&amp;quot;; filename=\\&amp;quot;in.jpg\\&amp;quot;\\r\\nContent-Type: image/jpeg\\r\\n&amp;quot;&amp;gt;], &amp;quot;item&amp;quot;=&amp;gt;{&amp;quot;title&amp;quot;=&amp;gt;&amp;quot;dip&amp;quot;, &amp;quot;price&amp;quot;=&amp;gt;&amp;quot;900&amp;quot;}, &amp;quot;commit&amp;quot;=&amp;gt;&amp;quot;Submit&amp;quot;}&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;Item Create (10.1ms) INSERT INTO &amp;quot;items&amp;quot; (&amp;quot;created_at&amp;quot;, &amp;quot;updated_at&amp;quot;, &amp;quot;title&amp;quot;, &amp;quot;price&amp;quot;, &amp;quot;user_id&amp;quot;) VALUES ($1, $2, $3, $4, $5) RETURNING &amp;quot;id&amp;quot; [[&amp;quot;created_at&amp;quot;, &amp;quot;2020-09-24 22:04:41.333195&amp;quot;], [&amp;quot;updated_at&amp;quot;, &amp;quot;2020-09-24 22:04:41.333195&amp;quot;], [&amp;quot;title&amp;quot;, &amp;quot;dip&amp;quot;], [&amp;quot;price&amp;quot;, 900], [&amp;quot;user_id&amp;quot;, 1]]&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;The Shrine docs for &lt;a href=\"https://shrinerb.com/docs/multiple-files#4b-direct-upload\"&gt;multiple uploads&lt;/a&gt; suggest a model, controller, and view structure that looks like this:&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;Models&lt;/strong&gt;&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;class Photo &amp;lt; ApplicationRecord\n include ImagesUploader::Attachment(:image)\n belongs_to :item\n validates_presence_of :image\nend\n\nclass Item &amp;lt; ApplicationRecord\n has_many :photos, dependent: :destroy\n accepts_nested_attributes_for :photos, allow_destroy: true\nend\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;strong&gt;Controller&lt;/strong&gt;&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;class ItemsController &amp;lt; ApplicationController\n def create\n  @item = Item.create(item_params)\n  @item.save\n end\n\n private\n def item_params\n  params.require(:item).permit(:title, photos_attributes: { image: [] })\n end\nend\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;strong&gt;View&lt;/strong&gt;&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;&amp;lt;%= form_for @item, html: { enctype: &amp;quot;multipart/form-data&amp;quot; } do |f| %&amp;gt;\n &amp;lt;%= f.text_field :title %&amp;gt;\n &amp;lt;%= f.fields_for :photos do |i| %&amp;gt;\n  &amp;lt;%= i.label :image %&amp;gt;\n  &amp;lt;%= i.hidden_field :image, value: i.object.cached_photos_data, class: &amp;quot;upload-data&amp;quot; %&amp;gt;\n  &amp;lt;%= i.file_field :image, class: &amp;quot;upload-file&amp;quot; %&amp;gt;\n &amp;lt;% end %&amp;gt;\n &amp;lt;%= file_field_tag &amp;quot;files[]&amp;quot;, multiple: true %&amp;gt;\n &amp;lt;%= f.submit &amp;quot;Submit&amp;quot; %&amp;gt;\n&amp;lt;% end %&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Ignoring my confusion over how this double &lt;code&gt;file_field/file_field_tag&lt;/code&gt; works (and why I only see the latter), I go to &lt;a href=\"https://github.com/shrinerb/shrine/wiki/Adding-Direct-S3-Uploads\"&gt;this github wiki&lt;/a&gt; to set up the presign endpoint with an initializer and a route:&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;shrine.rb&lt;/strong&gt;&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;require &amp;quot;shrine&amp;quot;\nrequire &amp;quot;shrine/storage/file_system&amp;quot;\nrequire &amp;quot;shrine/storage/s3&amp;quot;\n\nShrine.plugin :presign_endpoint, presign_options: -&amp;gt; (request) {\n  filename = request.params[&amp;quot;filename&amp;quot;]\n  type     = request.params[&amp;quot;type&amp;quot;]\n\n  {\n    content_disposition:    ContentDisposition.inline(filename), \n    content_type:           type,                                \n    content_length_range:   0..(5*1024*1024),                  \n  }\n}\n\nShrine.plugin :activerecord\nShrine.plugin :cached_attachment_data\nShrine.plugin :restore_cached_data\nShrine.plugin :validation\nShrine.plugin :validation_helpers\nShrine.plugin :determine_mime_type, analyzer: :marcel\nShrine.plugin :remove_invalid\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;strong&gt;routes.rb&lt;/strong&gt;&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;get &amp;#39;presign/s3/params&amp;#39;, to: &amp;#39;presigns#image&amp;#39;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Moved response to a controller for authorization:&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;class PresignsController &amp;lt; InheritedResources::Base\n before_action :authenticate_user!\n\n def image\n  set_rack_response ImagesUploader.presign_response(:cache, request.env)\n end\n\n private\n def set_rack_response((status, headers, body))\n  self.status = status\n  self.headers.merge!(headers)\n  self.response_body = body\n end\nend\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;To confirm that this is set up correctly, I visit &lt;code&gt;/presign/s3/params?filename=test&amp;amp;type=jpg&lt;/code&gt; and see JSON and my AWS credentials in the browser. Although the browser tab says &lt;code&gt;ActionController: Exception caught&lt;/code&gt;, it seems to work as expected.&lt;/p&gt;\n\n&lt;p&gt;Thinking I&amp;#39;m good, I add the uploader and the javascript for handling direct uploads:&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;uploader&lt;/strong&gt;&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;class ImagesUploader &amp;lt; Shrine\n  require &amp;quot;image_processing/mini_magick&amp;quot;\n  plugin :pretty_location\n  plugin :derivatives\n\n  s3 = { \n   bucket: ENV[&amp;#39;S3_BUCKET_NAME&amp;#39;],\n   region: ENV[&amp;#39;AWS_REGION&amp;#39;],\n   access_key_id: ENV[&amp;#39;AWS_ACCESS_KEY_ID&amp;#39;],\n   secret_access_key: ENV[&amp;#39;AWS_SECRET_ACCESS_KEY&amp;#39;]\n  }\n  Shrine.storages = { \n   cache: Shrine::Storage::S3.new(prefix: &amp;quot;cache&amp;quot;, **s3), \n   store: Shrine::Storage::S3.new(prefix: &amp;quot;store&amp;quot;, **s3)\n  }\n\n  Attacher.validate do\n   validate_min_size    10.kilobytes    \n   validate_max_size    5.megabytes, message: &amp;#39;must be smaller than 5MB&amp;#39;\n   validate_mime_type   %w[image/jpeg image/png]\n   validate_extension   %w[jpg jpeg png]\n  end\n\n  Attacher.derivatives do |original|\n   magick = ImageProcessing::MiniMagick.source(original)\n   {\n    large: magick.resize_to_limit!(1000, 1000),\n    small: magick.resize_and_pad!(225, 220)\n   }\n  end\nend\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;strong&gt;app/javascript/fileUpload.js&lt;/strong&gt;&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;import &amp;#39;uppy/dist/uppy.min.css&amp;#39;\n\nimport {\n  Core,\n  FileInput,\n  Informer,\n  ProgressBar,\n  ThumbnailGenerator,\n  AwsS3,\n} from &amp;#39;uppy&amp;#39;\n\nfunction fileUpload(fileInput) {\n  const hiddenInput = document.querySelector(&amp;#39;.upload-data&amp;#39;),\n        imagePreview = document.querySelector(&amp;#39;.upload-preview img&amp;#39;),\n        formGroup = fileInput.parentNode\n\n  formGroup.removeChild(fileInput)\n\n  const uppy = Core({\n      autoProceed: true,\n    })\n    .use(FileInput, {\n      target: formGroup,\n    })\n    .use(Informer, {\n      target: formGroup,\n    })\n    .use(ProgressBar, {\n      target: imagePreview.parentNode,\n    })\n    .use(ThumbnailGenerator, {\n      thumbnailWidth: 600,\n    })\n    .use(AwsS3, {\n      companionUrl: &amp;#39;/presign/s3/params&amp;#39;, // i set this to my presign endpoint, which I checked by visting site.com/presign/s3/params?filename=test&amp;amp;type=jpg\n    })\n\n  uppy.on(&amp;#39;thumbnail:generated&amp;#39;, (file, preview) =&amp;gt; {\n    imagePreview.src = preview\n  })\n\n  uppy.on(&amp;#39;upload-success&amp;#39;, (file, response) =&amp;gt; {\n    const uploadedFileData = {\n      id: file.meta[&amp;#39;key&amp;#39;].match(/^cache\\/(.+)/)[1],\n      storage: &amp;#39;cache&amp;#39;,\n      metadata: {\n        size: file.size,\n        filename: file.name,\n        mime_type: file.type,\n      }\n    }\n\n    hiddenInput.value = JSON.stringify(uploadedFileData)\n  })\n}\n\nexport default fileUpload\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;strong&gt;javascript/packs/application.js&lt;/strong&gt;&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;import fileUpload from &amp;#39;fileUpload&amp;#39;\n\ndocument.addEventListener(&amp;#39;turbolinks:load&amp;#39;, () =&amp;gt; {\n  document.querySelectorAll(&amp;#39;.upload-file&amp;#39;).forEach(fileInput =&amp;gt; {\n    fileUpload(fileInput)\n  })\n})\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Some questions.&lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;How does that double &lt;code&gt;file_field&lt;/code&gt; work and why is it that the stray &lt;code&gt;file_field_tag&lt;/code&gt; is the one that submits the files? I do not intuitively grasp how the two are connected. If the tag is named &lt;code&gt;files[]&lt;/code&gt;, shouldn&amp;#39;t my whitelisted params be something like &lt;code&gt;photos_attributes: { files: [] }&lt;/code&gt;?&lt;/li&gt;\n&lt;li&gt;If uppy and shrine upload the files to an s3 cache, how do I get that information into my controller? Presumably I would get a JSON response. The doc has this to say, but I&amp;#39;m confused by what it means:&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;blockquote&gt;\n&lt;p&gt;Once files are uploaded asynchronously, you can dynamically insert photo attachment fields for the &lt;code&gt;image&lt;/code&gt; attachment attribute into the form, where the hidden field is filled with uploaded file data in JSON format, just like when doing single direct uploads. The attachment field names should be namespaced according to the convention that the nested attributes feature expects. In this case it should be &lt;code&gt;album[photos_attributes][&amp;lt;uid&amp;gt;]&lt;/code&gt;, where &lt;code&gt;&amp;lt;uid&amp;gt;&lt;/code&gt; is any unique string.&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "iz9ux5", "is_robot_indexable": true, "report_reasons": null, "author": "Kni2L", "discussion_type": null, "num_comments": 0, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/iz9ux5/uploading_multiple_images_to_s3_with_presign/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/iz9ux5/uploading_multiple_images_to_s3_with_presign/", "subreddit_subscribers": 46038, "created_utc": 1600995665.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "Anyone have a good resource to understand Relational DB linking in rails? \n\nI\u2019ve read the docs, handheld a few tutorials and just cannot wrap my brain around how to properly understand it.", "author_fullname": "t2_5pwy99k5", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Relational DB tutorial?", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_iz6o8m", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 1.0, "author_flair_background_color": null, "subreddit_type": "public", "ups": 5, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 5, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1601013048.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;Anyone have a good resource to understand Relational DB linking in rails? &lt;/p&gt;\n\n&lt;p&gt;I\u2019ve read the docs, handheld a few tutorials and just cannot wrap my brain around how to properly understand it.&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": true, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "iz6o8m", "is_robot_indexable": true, "report_reasons": null, "author": "AlwaysWorkForBread", "discussion_type": null, "num_comments": 3, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/iz6o8m/relational_db_tutorial/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/iz6o8m/relational_db_tutorial/", "subreddit_subscribers": 46038, "created_utc": 1600984248.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "Is it possible to use AJAX to auto-save the form that's currently in view, but leave the default submit button active?  \n\n\nI'm using wicked, and I have a fairly large form that needed to be sliced into pieces. Now, I want to save each individual form step with autosave using a timed function. Is it possible?", "author_fullname": "t2_asanmgz", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Auto-save the current form without refresh", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_iyyhzh", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 1.0, "author_flair_background_color": null, "subreddit_type": "public", "ups": 11, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 11, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1600987300.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;Is it possible to use AJAX to auto-save the form that&amp;#39;s currently in view, but leave the default submit button active?  &lt;/p&gt;\n\n&lt;p&gt;I&amp;#39;m using wicked, and I have a fairly large form that needed to be sliced into pieces. Now, I want to save each individual form step with autosave using a timed function. Is it possible?&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "iyyhzh", "is_robot_indexable": true, "report_reasons": null, "author": "Code4Greatness", "discussion_type": null, "num_comments": 12, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/iyyhzh/autosave_the_current_form_without_refresh/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/iyyhzh/autosave_the_current_form_without_refresh/", "subreddit_subscribers": 46038, "created_utc": 1600958500.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "Hi! I'm in the process of writing tests for a new Rails app.\n\nThis is one my controller tests: [Gist](https://gist.github.com/ImMaax/6bd4802cb283e1cf4fe69bcd0a1f3eaf)\n\nEven though this test works perfectly fine, it just feels pretty wrong, as I repeat myself a lot and I'm unsure whether that's \"the right way\" to write a controller test. I've also seen integration tests, but I'm not quite sure where to put which tests now. Can someone help me? How would you optimize those tests?", "author_fullname": "t2_1vwkt1vm", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "How to improve my tests?", "link_flair_richtext": [{"e": "text", "t": "Help"}], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": "help", "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_iyz9e7", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 1.0, "author_flair_background_color": null, "subreddit_type": "public", "ups": 4, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": "Help", "can_mod_post": false, "score": 4, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1600989846.0, "link_flair_type": "richtext", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;Hi! I&amp;#39;m in the process of writing tests for a new Rails app.&lt;/p&gt;\n\n&lt;p&gt;This is one my controller tests: &lt;a href=\"https://gist.github.com/ImMaax/6bd4802cb283e1cf4fe69bcd0a1f3eaf\"&gt;Gist&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;Even though this test works perfectly fine, it just feels pretty wrong, as I repeat myself a lot and I&amp;#39;m unsure whether that&amp;#39;s &amp;quot;the right way&amp;quot; to write a controller test. I&amp;#39;ve also seen integration tests, but I&amp;#39;m not quite sure where to put which tests now. Can someone help me? How would you optimize those tests?&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "link_flair_template_id": "eef0b990-adfb-11e4-8e15-22000b3889f5", "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "iyz9e7", "is_robot_indexable": true, "report_reasons": null, "author": "ImMaaxYT", "discussion_type": null, "num_comments": 4, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/iyz9e7/how_to_improve_my_tests/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/iyz9e7/how_to_improve_my_tests/", "subreddit_subscribers": 46038, "created_utc": 1600961046.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "I just wrote an article about what it means to be an Indie Hacker, in a dev point of view.  \nSpoiler : I use Rails for this kind of project :) All thought are based on experience, which means very subjective and open to criticism :) [http://bdavidxyz.com/blog/indie-hacker-meaning/](http://bdavidxyz.com/blog/indie-hacker-meaning/)", "author_fullname": "t2_14z3on", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Indie Hacker : a possible meaning", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_iyyv2q", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 0.71, "author_flair_background_color": null, "subreddit_type": "public", "ups": 3, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 3, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1600988518.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;I just wrote an article about what it means to be an Indie Hacker, in a dev point of view.&lt;br/&gt;\nSpoiler : I use Rails for this kind of project :) All thought are based on experience, which means very subjective and open to criticism :) &lt;a href=\"http://bdavidxyz.com/blog/indie-hacker-meaning/\"&gt;http://bdavidxyz.com/blog/indie-hacker-meaning/&lt;/a&gt;&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "iyyv2q", "is_robot_indexable": true, "report_reasons": null, "author": "bdavidxyz", "discussion_type": null, "num_comments": 0, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/iyyv2q/indie_hacker_a_possible_meaning/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/iyyv2q/indie_hacker_a_possible_meaning/", "subreddit_subscribers": 46038, "created_utc": 1600959718.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "I know this might be more of a frontend issue, but I have the habit of having anything in one place (I think this might be a harmful thought, but I do most of my projects alone, so I keep them the way I can handle!). So, I'm a musician and when I was uploading an album on bandcamp, I noticed something. \n\nWhen you use \"album\", the damn thing automatically gives you a field of new song. I thing that be a really good feature to have, but I don't know what that's called and how I can have on that a rails project. If you guys have any experiences, I'd love to know. \n\nThanks!", "author_fullname": "t2_1lai2din", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "automatically getting more inputs and how to handle them in the backend", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_iynsdf", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 0.88, "author_flair_background_color": null, "subreddit_type": "public", "ups": 6, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 6, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1600940779.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;I know this might be more of a frontend issue, but I have the habit of having anything in one place (I think this might be a harmful thought, but I do most of my projects alone, so I keep them the way I can handle!). So, I&amp;#39;m a musician and when I was uploading an album on bandcamp, I noticed something. &lt;/p&gt;\n\n&lt;p&gt;When you use &amp;quot;album&amp;quot;, the damn thing automatically gives you a field of new song. I thing that be a really good feature to have, but I don&amp;#39;t know what that&amp;#39;s called and how I can have on that a rails project. If you guys have any experiences, I&amp;#39;d love to know. &lt;/p&gt;\n\n&lt;p&gt;Thanks!&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "iynsdf", "is_robot_indexable": true, "report_reasons": null, "author": "Haghiri75", "discussion_type": null, "num_comments": 3, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/iynsdf/automatically_getting_more_inputs_and_how_to/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/iynsdf/automatically_getting_more_inputs_and_how_to/", "subreddit_subscribers": 46038, "created_utc": 1600911979.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "I can't seem to access the wizard without receiving this error \"**The requested step did not match any steps defined for this controller**\". I don't know why its not starting the steps process when I send the user over to the controller for Wicked with the business form id. I'm also using friendly\\_id btw.\n\nI'm passing the id of the object to the path.\n\n*routes.rb*\n\n`resources  :business_form_wizard`\n\n*link in view*\n\n`&lt;%= link_to 'form wizard', form_wizard_path(current_provider.business_form), class:...%&gt;`\n\nbusiness\\_*form\\_wizard\\_controller.rb*\n\n`class BusinessFormWizardController &lt; ApplicationController`\n\n`include Wicked::Wizard`\n\n`steps :info, :scope_of_serv,...`\n\n`def show`\n\n `@business_form = BusinessForm.friendly.find(params[:id])`\n\n `render_wizard`\n\n`end`\n\n&amp;#x200B;\n\n`def update`\n\n `@ece_form.update_attributes(params[:business_form])`\n\n`render_wizard @business_form`\n\n`end`", "author_fullname": "t2_asanmgz", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Having trouble with wizard gem", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_iyegbd", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 1.0, "author_flair_background_color": null, "subreddit_type": "public", "ups": 5, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 5, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1600910238.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;I can&amp;#39;t seem to access the wizard without receiving this error &amp;quot;&lt;strong&gt;The requested step did not match any steps defined for this controller&lt;/strong&gt;&amp;quot;. I don&amp;#39;t know why its not starting the steps process when I send the user over to the controller for Wicked with the business form id. I&amp;#39;m also using friendly_id btw.&lt;/p&gt;\n\n&lt;p&gt;I&amp;#39;m passing the id of the object to the path.&lt;/p&gt;\n\n&lt;p&gt;&lt;em&gt;routes.rb&lt;/em&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;resources  :business_form_wizard&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;em&gt;link in view&lt;/em&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;&amp;lt;%= link_to &amp;#39;form wizard&amp;#39;, form_wizard_path(current_provider.business_form), class:...%&amp;gt;&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;business_&lt;em&gt;form_wizard_controller.rb&lt;/em&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;class BusinessFormWizardController &amp;lt; ApplicationController&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;include Wicked::Wizard&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;steps :info, :scope_of_serv,...&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;def show&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;@business_form = BusinessForm.friendly.find(params[:id])&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;render_wizard&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;end&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;&amp;#x200B;&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;def update&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;@ece_form.update_attributes(params[:business_form])&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;render_wizard @business_form&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;end&lt;/code&gt;&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "iyegbd", "is_robot_indexable": true, "report_reasons": null, "author": "Code4Greatness", "discussion_type": null, "num_comments": 4, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/iyegbd/having_trouble_with_wizard_gem/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/iyegbd/having_trouble_with_wizard_gem/", "subreddit_subscribers": 46038, "created_utc": 1600881438.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "Hi. My Rails app uses MySQL for prod and dev, but uses SQLite for testing. The problem with that is that everytime I run the tests, it overwrites the schema.rb file to fit SQLite instead of MySQL.\n\nThe problem with using MySQL for testing is that Rails always tries to access a database called something like `name_here-1`. That `-1` is illegal in MySQL, so I can't even create that database.\n\nIs it possible to do MySQL-based tests or do I have to stick to SQLite for that?\nIf I have to stick to SQLite, how can I stop Rails from overwriting `schema.rb`?", "author_fullname": "t2_1vwkt1vm", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Rails: testing with MySQL", "link_flair_richtext": [{"e": "text", "t": "Help"}], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": "help", "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_iyc18w", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 1.0, "author_flair_background_color": null, "subreddit_type": "public", "ups": 4, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": "Help", "can_mod_post": false, "score": 4, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1600902911.0, "link_flair_type": "richtext", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;Hi. My Rails app uses MySQL for prod and dev, but uses SQLite for testing. The problem with that is that everytime I run the tests, it overwrites the schema.rb file to fit SQLite instead of MySQL.&lt;/p&gt;\n\n&lt;p&gt;The problem with using MySQL for testing is that Rails always tries to access a database called something like &lt;code&gt;name_here-1&lt;/code&gt;. That &lt;code&gt;-1&lt;/code&gt; is illegal in MySQL, so I can&amp;#39;t even create that database.&lt;/p&gt;\n\n&lt;p&gt;Is it possible to do MySQL-based tests or do I have to stick to SQLite for that?\nIf I have to stick to SQLite, how can I stop Rails from overwriting &lt;code&gt;schema.rb&lt;/code&gt;?&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "link_flair_template_id": "eef0b990-adfb-11e4-8e15-22000b3889f5", "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "iyc18w", "is_robot_indexable": true, "report_reasons": null, "author": "ImMaaxYT", "discussion_type": null, "num_comments": 4, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/iyc18w/rails_testing_with_mysql/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/iyc18w/rails_testing_with_mysql/", "subreddit_subscribers": 46038, "created_utc": 1600874111.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "I'm using **flag\\_shih\\_tzu** gem and at my User model I include that lines  \n\n\n    include FlagShihTzu\n    \n       has_flags  2 =&gt; :admin,\n                  3 =&gt; :moderator\n\nI have a column **flags** as well in User table  **t.integer \"flags\", default: 1, null: false**  \n\n\nbut when I set Flags value to 2 or 3 it doesn't matter It will always return me the same value admin? for example  \n\n\n    user = User.first\n    user.flags = 2\n    user. save \n    \n    User.first.admin? \n    true \n    \n    user = User.second  \n    user.flags = 3\n    user.save\n    \n    User.second.admin?\n    true\n    User.second.moderator?\n    false", "author_fullname": "t2_7fudxvz7", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "flag_shih_tzu gem , return same value for any key", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_iy9u1k", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 1.0, "author_flair_background_color": null, "subreddit_type": "public", "ups": 1, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 1, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1600895581.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;I&amp;#39;m using &lt;strong&gt;flag_shih_tzu&lt;/strong&gt; gem and at my User model I include that lines  &lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;include FlagShihTzu\n\n   has_flags  2 =&amp;gt; :admin,\n              3 =&amp;gt; :moderator\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;I have a column &lt;strong&gt;flags&lt;/strong&gt; as well in User table  &lt;strong&gt;t.integer &amp;quot;flags&amp;quot;, default: 1, null: false&lt;/strong&gt;  &lt;/p&gt;\n\n&lt;p&gt;but when I set Flags value to 2 or 3 it doesn&amp;#39;t matter It will always return me the same value admin? for example  &lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;user = User.first\nuser.flags = 2\nuser. save \n\nUser.first.admin? \ntrue \n\nuser = User.second  \nuser.flags = 3\nuser.save\n\nUser.second.admin?\ntrue\nUser.second.moderator?\nfalse\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": true, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "iy9u1k", "is_robot_indexable": true, "report_reasons": null, "author": "Humayun-Naseer", "discussion_type": null, "num_comments": 6, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/iy9u1k/flag_shih_tzu_gem_return_same_value_for_any_key/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/iy9u1k/flag_shih_tzu_gem_return_same_value_for_any_key/", "subreddit_subscribers": 46038, "created_utc": 1600866781.0, "num_crossposts": 0, "media": null, "is_video": false}}], "after": "t3_iy9u1k", "before": null}}