{"kind": "Listing", "data": {"modhash": "", "dist": 11, "children": [{"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "In this thread you can showcase your personal pet project to other redditors.\n\nNeed help with a specific problem or just wanna have some extra eyeballs on your code? Ask away!\n\nA suggested format to get you started:\n\n1. **Name of your project**\n2. **A short description**\n3. **Application stack**\n4. **Link to Live app**\n5. **Link to GitHub**\n6. **You experience level**\n7. **Other information or areas that you would like advice on**\n\n\u00a0\n\n^(Many thanks to Kritnc for getting the ball rolling.)", "author_fullname": "t2_6l4z3", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Personal Projects - Show off your own project and/or ask for advice", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_igyvm1", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 1.0, "author_flair_background_color": null, "subreddit_type": "public", "ups": 3, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 3, "approved_by": null, "author_premium": true, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1598477561.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;In this thread you can showcase your personal pet project to other redditors.&lt;/p&gt;\n\n&lt;p&gt;Need help with a specific problem or just wanna have some extra eyeballs on your code? Ask away!&lt;/p&gt;\n\n&lt;p&gt;A suggested format to get you started:&lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;&lt;strong&gt;Name of your project&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;A short description&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Application stack&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Link to Live app&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Link to GitHub&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;You experience level&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Other information or areas that you would like advice on&lt;/strong&gt;&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;p&gt;\u00a0&lt;/p&gt;\n\n&lt;p&gt;&lt;sup&gt;Many thanks to Kritnc for getting the ball rolling.&lt;/sup&gt;&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": true, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": "moderator", "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "igyvm1", "is_robot_indexable": true, "report_reasons": null, "author": "AutoModerator", "discussion_type": null, "num_comments": 10, "send_replies": false, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/igyvm1/personal_projects_show_off_your_own_project_andor/", "parent_whitelist_status": "all_ads", "stickied": true, "url": "https://www.reddit.com/r/rails/comments/igyvm1/personal_projects_show_off_your_own_project_andor/", "subreddit_subscribers": 45811, "created_utc": 1598448761.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "I am having some issues with icalendar gem,  it is adding events   in UTC+00 and I wanted it to be readjusted to match users  timezone, how can I do it?", "author_fullname": "t2_9dfvqec", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "iCallendar issue", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_imdmnc", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 1.0, "author_flair_background_color": null, "subreddit_type": "public", "ups": 7, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 7, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1599244647.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;I am having some issues with icalendar gem,  it is adding events   in UTC+00 and I wanted it to be readjusted to match users  timezone, how can I do it?&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "imdmnc", "is_robot_indexable": true, "report_reasons": null, "author": "zilton7000", "discussion_type": null, "num_comments": 2, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/imdmnc/icallendar_issue/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/imdmnc/icallendar_issue/", "subreddit_subscribers": 45811, "created_utc": 1599215847.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "Hi everyone.\n\nI'm running a phusion passenger standalone instance and everything works fine except the automatic restart after the log rotation which occurs every night. When I wake up, the \"built-in\" nginx reports a 502 bad gateway.\n\nI'm using a script to stop/start passenger and when I restart in an interactive ssh session, everything works fine. However, when logrotate executes the same script, passenger restarts but there's a missing directory in /tmp so the built-in nginx can't speak with passenger.\n\nI'm at a loss. I don't know what's wrong and what to check next.\n\nMy script is just doing this :\n\n    #!/bin/bash\n    su -l myuser /home/myuser/scripts/passenger_stop.sh\n    su -l myuser /home/myuser/scripts/passenger_start.sh\n\npassenger\\_start.sh :\n\n    #!/bin/bash\n    export RBENV_ROOT=\"/opt/rbenv\"\n    export PATH=\"/opt/rbenv/plugins/ruby-build/bin:/opt/rbenv/bin:$PATH\"\n    eval \"$(rbenv init -)\"\n    alias node=nodejs\n    SOCKET=\"/home/myuser/passenger-nginx.socket\"\n    PID_FILE=\"/home/myuser/project/shared/pids/passenger.pid\"\n    cd /home/myuser/project/current\n    bundle exec passenger start -e production --socket=${SOCKET} -d --pid-file ${PID_FILE}\n\nThe passenger.log file :\n\n    [ N 2020-09-04 00:05:31.7264 20421/T1 age/Cor/CoreMain.cpp:1340 ]: Starting Passenger core...\n    [ N 2020-09-04 00:05:31.7265 20421/T1 age/Cor/CoreMain.cpp:256 ]: Passenger core running in multi-application mode.\n    [ N 2020-09-04 00:05:31.7350 20421/T1 age/Cor/CoreMain.cpp:1015 ]: Passenger core online, PID 20421\n    [ N 2020-09-04 00:05:33.8468 20421/T5 age/Cor/SecurityUpdateChecker.h:519 ]: Security update check: no update found (next check in 24 hours)\n    /opt/rbenv/versions/2.6.6/lib/ruby/2.6.0/bundler/shared_helpers.rb:71:in `getwd': No such file or directory - getcwd (Errno::ENOENT)\n            from /opt/rbenv/versions/2.6.6/lib/ruby/2.6.0/bundler/shared_helpers.rb:71:in `pwd'\n            from /opt/rbenv/versions/2.6.6/lib/ruby/2.6.0/bundler/shared_helpers.rb:71:in `block in pwd'\n            from /opt/rbenv/versions/2.6.6/lib/ruby/2.6.0/monitor.rb:235:in `mon_synchronize'\n            from /opt/rbenv/versions/2.6.6/lib/ruby/2.6.0/bundler/shared_helpers.rb:70:in `pwd'\n            from /opt/rbenv/versions/2.6.6/lib/ruby/2.6.0/bundler/shared_helpers.rb:272:in `search_up'\n            from /opt/rbenv/versions/2.6.6/lib/ruby/2.6.0/bundler/shared_helpers.rb:155:in `print_major_deprecations!'\n            from /opt/rbenv/versions/2.6.6/lib/ruby/2.6.0/bundler.rb:103:in `setup'\n            from /opt/rbenv/versions/2.6.6/lib/ruby/2.6.0/bundler/setup.rb:20:in `&lt;top (required)&gt;'\n            from /opt/rbenv/versions/2.6.6/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n            from /opt/rbenv/versions/2.6.6/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    2020/09/04 00:05:51 [crit] 20441#0: *3 connect() to unix:/passenger_core failed (2: No such file or directory) while connecting to upstream, client: unix:, server: _, request: \"GET / HTTP/1.0\", upstream: \"passenger:unix:/passenger_core:\", host: \"myhost\"\n    2020/09/04 00:05:52 [crit] 20441#0: *5 connect() to unix:/tmp/passenger.Bh5wxh4/agents.s/core failed (2: No such file or directory) while connecting to upstream, client: unix:, server: _, request: \"GET / HTTP/1.0\", upstream: \"passenger:unix:/tmp/passenger.Bh5wxh4/agents.s/core:\", host: \"myhost\"\n\nThe last line repeats for every request.\n\nThe process command lines (for nginx and PassengerAgent) are referencing this \"/tmp/passenger.something\" directory but it doesn't exist.\n\nI just have to execute the restart script again (in ssh interactive, not in my logrotate script) and both the command lines and the tmp directory are ok. The command lines are then exactly the same except for the random tmp path and the referenced pids.\n\nPhusion Passenger v6.0.6 with nginx 1.18.0 (I guess its the default for passenger 6.0.6) running on ubuntu server 20.04 up-to-date.\n\n&amp;#x200B;\n\nThanks for your time and for the help :-)", "author_fullname": "t2_dpiha", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "missing /tmp/passenger.xxxxx directory with standalone passenger run by logrotate", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_imcai3", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 1.0, "author_flair_background_color": null, "subreddit_type": "public", "ups": 4, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 4, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1599237030.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;Hi everyone.&lt;/p&gt;\n\n&lt;p&gt;I&amp;#39;m running a phusion passenger standalone instance and everything works fine except the automatic restart after the log rotation which occurs every night. When I wake up, the &amp;quot;built-in&amp;quot; nginx reports a 502 bad gateway.&lt;/p&gt;\n\n&lt;p&gt;I&amp;#39;m using a script to stop/start passenger and when I restart in an interactive ssh session, everything works fine. However, when logrotate executes the same script, passenger restarts but there&amp;#39;s a missing directory in /tmp so the built-in nginx can&amp;#39;t speak with passenger.&lt;/p&gt;\n\n&lt;p&gt;I&amp;#39;m at a loss. I don&amp;#39;t know what&amp;#39;s wrong and what to check next.&lt;/p&gt;\n\n&lt;p&gt;My script is just doing this :&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;#!/bin/bash\nsu -l myuser /home/myuser/scripts/passenger_stop.sh\nsu -l myuser /home/myuser/scripts/passenger_start.sh\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;passenger_start.sh :&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;#!/bin/bash\nexport RBENV_ROOT=&amp;quot;/opt/rbenv&amp;quot;\nexport PATH=&amp;quot;/opt/rbenv/plugins/ruby-build/bin:/opt/rbenv/bin:$PATH&amp;quot;\neval &amp;quot;$(rbenv init -)&amp;quot;\nalias node=nodejs\nSOCKET=&amp;quot;/home/myuser/passenger-nginx.socket&amp;quot;\nPID_FILE=&amp;quot;/home/myuser/project/shared/pids/passenger.pid&amp;quot;\ncd /home/myuser/project/current\nbundle exec passenger start -e production --socket=${SOCKET} -d --pid-file ${PID_FILE}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;The passenger.log file :&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;[ N 2020-09-04 00:05:31.7264 20421/T1 age/Cor/CoreMain.cpp:1340 ]: Starting Passenger core...\n[ N 2020-09-04 00:05:31.7265 20421/T1 age/Cor/CoreMain.cpp:256 ]: Passenger core running in multi-application mode.\n[ N 2020-09-04 00:05:31.7350 20421/T1 age/Cor/CoreMain.cpp:1015 ]: Passenger core online, PID 20421\n[ N 2020-09-04 00:05:33.8468 20421/T5 age/Cor/SecurityUpdateChecker.h:519 ]: Security update check: no update found (next check in 24 hours)\n/opt/rbenv/versions/2.6.6/lib/ruby/2.6.0/bundler/shared_helpers.rb:71:in `getwd&amp;#39;: No such file or directory - getcwd (Errno::ENOENT)\n        from /opt/rbenv/versions/2.6.6/lib/ruby/2.6.0/bundler/shared_helpers.rb:71:in `pwd&amp;#39;\n        from /opt/rbenv/versions/2.6.6/lib/ruby/2.6.0/bundler/shared_helpers.rb:71:in `block in pwd&amp;#39;\n        from /opt/rbenv/versions/2.6.6/lib/ruby/2.6.0/monitor.rb:235:in `mon_synchronize&amp;#39;\n        from /opt/rbenv/versions/2.6.6/lib/ruby/2.6.0/bundler/shared_helpers.rb:70:in `pwd&amp;#39;\n        from /opt/rbenv/versions/2.6.6/lib/ruby/2.6.0/bundler/shared_helpers.rb:272:in `search_up&amp;#39;\n        from /opt/rbenv/versions/2.6.6/lib/ruby/2.6.0/bundler/shared_helpers.rb:155:in `print_major_deprecations!&amp;#39;\n        from /opt/rbenv/versions/2.6.6/lib/ruby/2.6.0/bundler.rb:103:in `setup&amp;#39;\n        from /opt/rbenv/versions/2.6.6/lib/ruby/2.6.0/bundler/setup.rb:20:in `&amp;lt;top (required)&amp;gt;&amp;#39;\n        from /opt/rbenv/versions/2.6.6/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require&amp;#39;\n        from /opt/rbenv/versions/2.6.6/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require&amp;#39;\n2020/09/04 00:05:51 [crit] 20441#0: *3 connect() to unix:/passenger_core failed (2: No such file or directory) while connecting to upstream, client: unix:, server: _, request: &amp;quot;GET / HTTP/1.0&amp;quot;, upstream: &amp;quot;passenger:unix:/passenger_core:&amp;quot;, host: &amp;quot;myhost&amp;quot;\n2020/09/04 00:05:52 [crit] 20441#0: *5 connect() to unix:/tmp/passenger.Bh5wxh4/agents.s/core failed (2: No such file or directory) while connecting to upstream, client: unix:, server: _, request: &amp;quot;GET / HTTP/1.0&amp;quot;, upstream: &amp;quot;passenger:unix:/tmp/passenger.Bh5wxh4/agents.s/core:&amp;quot;, host: &amp;quot;myhost&amp;quot;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;The last line repeats for every request.&lt;/p&gt;\n\n&lt;p&gt;The process command lines (for nginx and PassengerAgent) are referencing this &amp;quot;/tmp/passenger.something&amp;quot; directory but it doesn&amp;#39;t exist.&lt;/p&gt;\n\n&lt;p&gt;I just have to execute the restart script again (in ssh interactive, not in my logrotate script) and both the command lines and the tmp directory are ok. The command lines are then exactly the same except for the random tmp path and the referenced pids.&lt;/p&gt;\n\n&lt;p&gt;Phusion Passenger v6.0.6 with nginx 1.18.0 (I guess its the default for passenger 6.0.6) running on ubuntu server 20.04 up-to-date.&lt;/p&gt;\n\n&lt;p&gt;&amp;#x200B;&lt;/p&gt;\n\n&lt;p&gt;Thanks for your time and for the help :-)&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": true, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "imcai3", "is_robot_indexable": true, "report_reasons": null, "author": "daPabOu", "discussion_type": null, "num_comments": 0, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/imcai3/missing_tmppassengerxxxxx_directory_with/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/imcai3/missing_tmppassengerxxxxx_directory_with/", "subreddit_subscribers": 45811, "created_utc": 1599208230.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "I have added dynamic form feature inside the rails application.The end-user can create form fields by selecting input fields from a bunch of available input options i.e text field, radio buttons, file field etc .    It works perfectly fine. After the form is created, end-users can submit this form without any issue. Now,I have a use case in which I would like to pre-set data in some of the input fields. For instance, an admin-user created a form with the following input fields: `First Name(String), Last Name(String),Father's First Name(String), Father's Last Name(String)`, etc.\n\nNow, a member logs in to fill in this form. I would like to preset  data in `First Name, Last Name` fields with the first\\_name, last\\_name of the logged in user  by fetching this information from the user's profile page. From a usability point of view, it would be a burden for the user to type this information once again. Since the form fields are created dynamically and the  name attribute of each of the input fields is a generated at run time so its hard to figure out that which input field corresponds to what user information. What could be the reasonable solution to preset data in dynamic form input fields? Any help will be highly appreciated.  Thanks.", "author_fullname": "t2_gzm2t", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "[HELP] Preset data in dynamic forms.", "link_flair_richtext": [{"e": "text", "t": "Help"}], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": "help", "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_imcpmz", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 1.0, "author_flair_background_color": null, "subreddit_type": "public", "ups": 3, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": "Help", "can_mod_post": false, "score": 3, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1599239515.0, "link_flair_type": "richtext", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;I have added dynamic form feature inside the rails application.The end-user can create form fields by selecting input fields from a bunch of available input options i.e text field, radio buttons, file field etc .    It works perfectly fine. After the form is created, end-users can submit this form without any issue. Now,I have a use case in which I would like to pre-set data in some of the input fields. For instance, an admin-user created a form with the following input fields: &lt;code&gt;First Name(String), Last Name(String),Father&amp;#39;s First Name(String), Father&amp;#39;s Last Name(String)&lt;/code&gt;, etc.&lt;/p&gt;\n\n&lt;p&gt;Now, a member logs in to fill in this form. I would like to preset  data in &lt;code&gt;First Name, Last Name&lt;/code&gt; fields with the first_name, last_name of the logged in user  by fetching this information from the user&amp;#39;s profile page. From a usability point of view, it would be a burden for the user to type this information once again. Since the form fields are created dynamically and the  name attribute of each of the input fields is a generated at run time so its hard to figure out that which input field corresponds to what user information. What could be the reasonable solution to preset data in dynamic form input fields? Any help will be highly appreciated.  Thanks.&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "imcpmz", "is_robot_indexable": true, "report_reasons": null, "author": "MakeMeBeleive", "discussion_type": null, "num_comments": 1, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/imcpmz/help_preset_data_in_dynamic_forms/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/imcpmz/help_preset_data_in_dynamic_forms/", "subreddit_subscribers": 45811, "created_utc": 1599210715.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "It works well in localhost, but when I deployed it to development &amp; production, it returns **No such file or directory @ rb\\_sysopen - /usr/src/app/public/tmp/file\\_name.csv** error when I try to read the file.\n\nThe file is created with sidekiq job, and the sidekiq jobs are processed (success) so I assume the file is created since I don't have access to the server directory. This is how the file is created inside sidekiq job.\n\n        dir_name = \"#{Rails.root}/public/tmp\"\n        FileUtils.mkdir_p dir_name\n        file = \"#{dir_name}/file_name.csv\"\n        header = [\"test\"]  \n    \n        CSV.open( file, 'w' ) do |writer|\n            writer &lt;&lt; header\n            body.each do |b|\n                writer &lt;&lt; [b[\"test\"]]\n            end\n        end\n\nAnd this is how the file is read in controller.\n\n        file_path = \"#{Rails.root}/public/tmp/#{filename}\"\n        File.open(file_path, 'r') do |f|\n            send_data f.read,\n                    :type =&gt; 'text/csv; charset=iso-8859-1; header=present',\n                              :disposition =&gt; \"attachment; filename=#{filename}\"\n        end", "author_fullname": "t2_3i6l9ux0", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Can't read \"public/tmp/\" in development &amp; production environment", "link_flair_richtext": [{"e": "text", "t": "Question"}], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": "question", "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_im9wx6", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 1.0, "author_flair_background_color": null, "subreddit_type": "public", "ups": 5, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": "Question", "can_mod_post": false, "score": 5, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1599224809.0, "link_flair_type": "richtext", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;It works well in localhost, but when I deployed it to development &amp;amp; production, it returns &lt;strong&gt;No such file or directory @ rb_sysopen - /usr/src/app/public/tmp/file_name.csv&lt;/strong&gt; error when I try to read the file.&lt;/p&gt;\n\n&lt;p&gt;The file is created with sidekiq job, and the sidekiq jobs are processed (success) so I assume the file is created since I don&amp;#39;t have access to the server directory. This is how the file is created inside sidekiq job.&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;    dir_name = &amp;quot;#{Rails.root}/public/tmp&amp;quot;\n    FileUtils.mkdir_p dir_name\n    file = &amp;quot;#{dir_name}/file_name.csv&amp;quot;\n    header = [&amp;quot;test&amp;quot;]  \n\n    CSV.open( file, &amp;#39;w&amp;#39; ) do |writer|\n        writer &amp;lt;&amp;lt; header\n        body.each do |b|\n            writer &amp;lt;&amp;lt; [b[&amp;quot;test&amp;quot;]]\n        end\n    end\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;And this is how the file is read in controller.&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;    file_path = &amp;quot;#{Rails.root}/public/tmp/#{filename}&amp;quot;\n    File.open(file_path, &amp;#39;r&amp;#39;) do |f|\n        send_data f.read,\n                :type =&amp;gt; &amp;#39;text/csv; charset=iso-8859-1; header=present&amp;#39;,\n                          :disposition =&amp;gt; &amp;quot;attachment; filename=#{filename}&amp;quot;\n    end\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": true, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "link_flair_template_id": "fdfc6806-aea7-11e4-bf37-22000b3889f5", "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "im9wx6", "is_robot_indexable": true, "report_reasons": null, "author": "MazeyEJ", "discussion_type": null, "num_comments": 2, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/im9wx6/cant_read_publictmp_in_development_production/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/im9wx6/cant_read_publictmp_in_development_production/", "subreddit_subscribers": 45811, "created_utc": 1599196009.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "I have devise set up for Users. I have a model for Companies, and Users have a field called company_relationship with an integer of the company.id saved to their account when they sign up. How can I check if the email and company ID are correct when a user logs in from a Company\u2019s page.\n\nAlso if a user is signed in to another company\u2019s page, how do I destroy the old session when they log in to the page of another company?\n\nReally appreciate the help!", "author_fullname": "t2_qopjx", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Multiple accounts with the same email address", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_im2mny", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 1.0, "author_flair_background_color": null, "subreddit_type": "public", "ups": 12, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 12, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1599197218.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;I have devise set up for Users. I have a model for Companies, and Users have a field called company_relationship with an integer of the company.id saved to their account when they sign up. How can I check if the email and company ID are correct when a user logs in from a Company\u2019s page.&lt;/p&gt;\n\n&lt;p&gt;Also if a user is signed in to another company\u2019s page, how do I destroy the old session when they log in to the page of another company?&lt;/p&gt;\n\n&lt;p&gt;Really appreciate the help!&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "im2mny", "is_robot_indexable": true, "report_reasons": null, "author": "thegrowls", "discussion_type": null, "num_comments": 18, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/im2mny/multiple_accounts_with_the_same_email_address/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/im2mny/multiple_accounts_with_the_same_email_address/", "subreddit_subscribers": 45811, "created_utc": 1599168418.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "A *symmetrical bi-directional self-referential association* is a bit of a mouthful, but I'd like to understand what the simplest way of designing something like a Facebook-style friendship would be. Using the principle of Occam's Razor, could I design this in a simpler way? To me this currently seems like a lot of work for the functionality it provides.\n\nIn the way I've made this, every time a friendship is created it sets the status to \"requested\", and creates a \"reverse friendship\" that is set to \"pending\" using callbacks. When the friend accepts, it updates both friendships to \u201caccepted\u201d and sets an \u201caccepted at\u201d datetime value.\n\nWhen a friendship is destroyed it destroys both friendships.\n\nThe friendships and users controllers are essentially basic RESTful scaffold controllers.\n\nUser Model: \n\n    class User &lt; ApplicationRecord\n      has_many :friendships, dependent: :destroy\n      has_many :friends, -&gt; { where \"status = 'accepted'\" }, through: :friendships\n      has_many :requested_friends, -&gt; { where \"status = 'requested'\" }, through: :friendships, source: :friend\n      has_many :pending_friends, -&gt; { where \"status = 'pending'\" }, through: :friendships, source: :friend\n    end\nFriendship Model:\n    \n    class Friendship &lt; ApplicationRecord\n      belongs_to :user\n      belongs_to :friend, class_name: 'User', foreign_key: 'friend_id'\n      scope :friends, -&gt; { where(\"status = 'accepted'\", true) }\n      scope :not_friends, -&gt; { where(\"status = 'accepted'\", false) }\n   \n      attribute :status, :string, default: 'requested'\n      after_create :create_inverse\n        # - VALIDATIONS\n      validates_presence_of :user_id, :friend_id, :status\n      validate :user_is_not_equal_friend\n      validates_uniqueness_of :user_id, scope: :friend_id\n      after_destroy :destroy_inverse\n\n      private\n    \n      def self.accept(user, friend)\n        transaction do\n          accepted_at = Time.now\n          accept_one_side(user, friend, accepted_at)\n          accept_one_side(friend, user, accepted_at)\n        end\n      end\n    \n      def self.accept_one_side(current_user, friend, accepted_at)\n        request = find_by_user_id_and_friend_id(current_user, friend)\n        request.status = 'accepted'\n        request.accepted_at = accepted_at\n        request.save!\n      end\n    \n     \n    \n      def create_inverse\n        self.class.create(user_id: self.friend.id, friend_id: self.user.id, status: 'pending')\n      end\n    \n      def destroy_inverse\n        self.class.delete_by(user_id: self.friend.id, friend_id: self.user.id)\n      end\n    \n      def user_is_not_equal_friend\n        errors.add(:friend, \"can't be the same as the user\") if user == friend\n      end \n    end\n\nSchema:\n\n      create_table \"friendships\", id: :serial, force: :cascade do |t|\n        t.integer \"friend_id\"\n        t.datetime \"created_at\"\n        t.datetime \"updated_at\"\n        t.bigint \"user_id\"\n        t.string \"status\"\n        t.datetime \"accepted_at\"\n        t.index [\"user_id\"], name: \"index_friendships_on_user_id\"\n      end\n    \n      create_table \"users\", force: :cascade do |t|\n        t.string \"email\", default: \"\", null: false\n        t.string \"encrypted_password\", default: \"\", null: false\n        t.string \"reset_password_token\"\n        t.datetime \"reset_password_sent_at\"\n        t.datetime \"remember_created_at\"\n        t.datetime \"created_at\", precision: 6, null: false\n        t.datetime \"updated_at\", precision: 6, null: false\n        t.string \"first_name\"\n        t.string \"last_name\"\n        t.string \"provider\"\n        t.string \"uid\"\n        t.index [\"email\"], name: \"index_users_on_email\", unique: true\n        t.index [\"reset_password_token\"], name: \"index_users_on_reset_password_token\", unique: true\n      end\n\nViews:\n\n    &lt;%= link_to 'Add Friend', friendships_path(friendship: {friend_id: @user.id, user_id: current_user.id}), method: :post%&gt;\n    \n    &lt;% if friendship.status == \"pending\" %&gt; &lt;!-- If receiving friendship request ---&gt;\n      &lt;%= link_to 'Accept', friendship, friendship:{status: \"accepted\", accepted_at:\"#{Time.now}\"}, remote: true, method: :patch\" %&gt;&lt;%= link_to 'Delete', friendship, friendship:{user_id: friendship.friend, friend_id: current_user }, remote: true, method: :delete, data: { confirm: 'Are you sure?' }\" %&gt;\n       &lt;% elsif friendship.status == \"accepted\" &amp;&amp; friendship.friend == current_user %&gt; &lt;!-- If accepted friendship request and friend ---&gt;\n       &lt;%= link_to 'Delete', friendship, friendship:{user_id: friendship.friend, friend_id: current_user }, remote: true, method: :delete, data: { confirm: 'Are you sure?' }\" %&gt;\n       &lt;% elsif friendship.status == \"accepted\" &amp;&amp; friendship.user == current_user %&gt; &lt;!-- If accepted friendship request and user ---&gt;\n       &lt;%= link_to 'Delete', friendship, friendship:{user_id: current_user, friend_id: friendship.friend }, remote: true, method: :delete, data: { confirm: 'Are you sure?' }\" %&gt;\n       &lt;% else %&gt; &lt;!-- if sending friendship request --&gt;\n       &lt;%= link_to 'Delete', friendship, friendship:{user_id: current_user, friend_id: friendship.friend}, remote: true, method: :delete, data: { confirm: 'Are you sure?' }\" %&gt;\n     &lt;% end %&gt;", "author_fullname": "t2_3m23w", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Is this the simplest way to create a Facebook-style friendship functionality?", "link_flair_richtext": [{"e": "text", "t": "Question"}], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": "question", "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_im32av", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 0.9, "author_flair_background_color": null, "subreddit_type": "public", "ups": 8, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": "Question", "can_mod_post": false, "score": 8, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": 1599210282.0, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1599198645.0, "link_flair_type": "richtext", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;A &lt;em&gt;symmetrical bi-directional self-referential association&lt;/em&gt; is a bit of a mouthful, but I&amp;#39;d like to understand what the simplest way of designing something like a Facebook-style friendship would be. Using the principle of Occam&amp;#39;s Razor, could I design this in a simpler way? To me this currently seems like a lot of work for the functionality it provides.&lt;/p&gt;\n\n&lt;p&gt;In the way I&amp;#39;ve made this, every time a friendship is created it sets the status to &amp;quot;requested&amp;quot;, and creates a &amp;quot;reverse friendship&amp;quot; that is set to &amp;quot;pending&amp;quot; using callbacks. When the friend accepts, it updates both friendships to \u201caccepted\u201d and sets an \u201caccepted at\u201d datetime value.&lt;/p&gt;\n\n&lt;p&gt;When a friendship is destroyed it destroys both friendships.&lt;/p&gt;\n\n&lt;p&gt;The friendships and users controllers are essentially basic RESTful scaffold controllers.&lt;/p&gt;\n\n&lt;p&gt;User Model: &lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;class User &amp;lt; ApplicationRecord\n  has_many :friendships, dependent: :destroy\n  has_many :friends, -&amp;gt; { where &amp;quot;status = &amp;#39;accepted&amp;#39;&amp;quot; }, through: :friendships\n  has_many :requested_friends, -&amp;gt; { where &amp;quot;status = &amp;#39;requested&amp;#39;&amp;quot; }, through: :friendships, source: :friend\n  has_many :pending_friends, -&amp;gt; { where &amp;quot;status = &amp;#39;pending&amp;#39;&amp;quot; }, through: :friendships, source: :friend\nend\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Friendship Model:&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;class Friendship &amp;lt; ApplicationRecord\n  belongs_to :user\n  belongs_to :friend, class_name: &amp;#39;User&amp;#39;, foreign_key: &amp;#39;friend_id&amp;#39;\n  scope :friends, -&amp;gt; { where(&amp;quot;status = &amp;#39;accepted&amp;#39;&amp;quot;, true) }\n  scope :not_friends, -&amp;gt; { where(&amp;quot;status = &amp;#39;accepted&amp;#39;&amp;quot;, false) }\n\n  attribute :status, :string, default: &amp;#39;requested&amp;#39;\n  after_create :create_inverse\n    # - VALIDATIONS\n  validates_presence_of :user_id, :friend_id, :status\n  validate :user_is_not_equal_friend\n  validates_uniqueness_of :user_id, scope: :friend_id\n  after_destroy :destroy_inverse\n\n  private\n\n  def self.accept(user, friend)\n    transaction do\n      accepted_at = Time.now\n      accept_one_side(user, friend, accepted_at)\n      accept_one_side(friend, user, accepted_at)\n    end\n  end\n\n  def self.accept_one_side(current_user, friend, accepted_at)\n    request = find_by_user_id_and_friend_id(current_user, friend)\n    request.status = &amp;#39;accepted&amp;#39;\n    request.accepted_at = accepted_at\n    request.save!\n  end\n\n\n\n  def create_inverse\n    self.class.create(user_id: self.friend.id, friend_id: self.user.id, status: &amp;#39;pending&amp;#39;)\n  end\n\n  def destroy_inverse\n    self.class.delete_by(user_id: self.friend.id, friend_id: self.user.id)\n  end\n\n  def user_is_not_equal_friend\n    errors.add(:friend, &amp;quot;can&amp;#39;t be the same as the user&amp;quot;) if user == friend\n  end \nend\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Schema:&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;  create_table &amp;quot;friendships&amp;quot;, id: :serial, force: :cascade do |t|\n    t.integer &amp;quot;friend_id&amp;quot;\n    t.datetime &amp;quot;created_at&amp;quot;\n    t.datetime &amp;quot;updated_at&amp;quot;\n    t.bigint &amp;quot;user_id&amp;quot;\n    t.string &amp;quot;status&amp;quot;\n    t.datetime &amp;quot;accepted_at&amp;quot;\n    t.index [&amp;quot;user_id&amp;quot;], name: &amp;quot;index_friendships_on_user_id&amp;quot;\n  end\n\n  create_table &amp;quot;users&amp;quot;, force: :cascade do |t|\n    t.string &amp;quot;email&amp;quot;, default: &amp;quot;&amp;quot;, null: false\n    t.string &amp;quot;encrypted_password&amp;quot;, default: &amp;quot;&amp;quot;, null: false\n    t.string &amp;quot;reset_password_token&amp;quot;\n    t.datetime &amp;quot;reset_password_sent_at&amp;quot;\n    t.datetime &amp;quot;remember_created_at&amp;quot;\n    t.datetime &amp;quot;created_at&amp;quot;, precision: 6, null: false\n    t.datetime &amp;quot;updated_at&amp;quot;, precision: 6, null: false\n    t.string &amp;quot;first_name&amp;quot;\n    t.string &amp;quot;last_name&amp;quot;\n    t.string &amp;quot;provider&amp;quot;\n    t.string &amp;quot;uid&amp;quot;\n    t.index [&amp;quot;email&amp;quot;], name: &amp;quot;index_users_on_email&amp;quot;, unique: true\n    t.index [&amp;quot;reset_password_token&amp;quot;], name: &amp;quot;index_users_on_reset_password_token&amp;quot;, unique: true\n  end\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Views:&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;&amp;lt;%= link_to &amp;#39;Add Friend&amp;#39;, friendships_path(friendship: {friend_id: @user.id, user_id: current_user.id}), method: :post%&amp;gt;\n\n&amp;lt;% if friendship.status == &amp;quot;pending&amp;quot; %&amp;gt; &amp;lt;!-- If receiving friendship request ---&amp;gt;\n  &amp;lt;%= link_to &amp;#39;Accept&amp;#39;, friendship, friendship:{status: &amp;quot;accepted&amp;quot;, accepted_at:&amp;quot;#{Time.now}&amp;quot;}, remote: true, method: :patch&amp;quot; %&amp;gt;&amp;lt;%= link_to &amp;#39;Delete&amp;#39;, friendship, friendship:{user_id: friendship.friend, friend_id: current_user }, remote: true, method: :delete, data: { confirm: &amp;#39;Are you sure?&amp;#39; }&amp;quot; %&amp;gt;\n   &amp;lt;% elsif friendship.status == &amp;quot;accepted&amp;quot; &amp;amp;&amp;amp; friendship.friend == current_user %&amp;gt; &amp;lt;!-- If accepted friendship request and friend ---&amp;gt;\n   &amp;lt;%= link_to &amp;#39;Delete&amp;#39;, friendship, friendship:{user_id: friendship.friend, friend_id: current_user }, remote: true, method: :delete, data: { confirm: &amp;#39;Are you sure?&amp;#39; }&amp;quot; %&amp;gt;\n   &amp;lt;% elsif friendship.status == &amp;quot;accepted&amp;quot; &amp;amp;&amp;amp; friendship.user == current_user %&amp;gt; &amp;lt;!-- If accepted friendship request and user ---&amp;gt;\n   &amp;lt;%= link_to &amp;#39;Delete&amp;#39;, friendship, friendship:{user_id: current_user, friend_id: friendship.friend }, remote: true, method: :delete, data: { confirm: &amp;#39;Are you sure?&amp;#39; }&amp;quot; %&amp;gt;\n   &amp;lt;% else %&amp;gt; &amp;lt;!-- if sending friendship request --&amp;gt;\n   &amp;lt;%= link_to &amp;#39;Delete&amp;#39;, friendship, friendship:{user_id: current_user, friend_id: friendship.friend}, remote: true, method: :delete, data: { confirm: &amp;#39;Are you sure?&amp;#39; }&amp;quot; %&amp;gt;\n &amp;lt;% end %&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "link_flair_template_id": "fdfc6806-aea7-11e4-bf37-22000b3889f5", "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "im32av", "is_robot_indexable": true, "report_reasons": null, "author": "dudewhatthehellman", "discussion_type": null, "num_comments": 1, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/im32av/is_this_the_simplest_way_to_create_a/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/im32av/is_this_the_simplest_way_to_create_a/", "subreddit_subscribers": 45811, "created_utc": 1599169845.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "I want To calculate leave of Employee from joining Date on yearly basis\n\n    class Leave &lt; ApplicationRecord\n     after_update :calculate_availed_leave \n     def calculate_availed_leave\n        date = self.employee.joining_date.to_i + 365\n        apply_date = self.leave_date.to_i\n        if apply_date &lt; date\n          taken_leaves = self.employee.leaves.where(status: \"Approved\").count\n          availed_leaves = self.employee.allowed_leaves - taken_leaves\n          self.employee.update(availed_leaves: availed_leaves)\n        elsif apply_date &lt; new_date\n          allowed_leaves = self.employee.allowed_leaves\n          self.employee.update(availed_leaves: allowed_leaves)\n        end\n     end \n    end", "author_fullname": "t2_6iz6hciy", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Calculate leaves of Employee of year", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_im9hyz", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 0.71, "author_flair_background_color": null, "subreddit_type": "public", "ups": 3, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 3, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1599222937.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;I want To calculate leave of Employee from joining Date on yearly basis&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;class Leave &amp;lt; ApplicationRecord\n after_update :calculate_availed_leave \n def calculate_availed_leave\n    date = self.employee.joining_date.to_i + 365\n    apply_date = self.leave_date.to_i\n    if apply_date &amp;lt; date\n      taken_leaves = self.employee.leaves.where(status: &amp;quot;Approved&amp;quot;).count\n      availed_leaves = self.employee.allowed_leaves - taken_leaves\n      self.employee.update(availed_leaves: availed_leaves)\n    elsif apply_date &amp;lt; new_date\n      allowed_leaves = self.employee.allowed_leaves\n      self.employee.update(availed_leaves: allowed_leaves)\n    end\n end \nend\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": true, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "im9hyz", "is_robot_indexable": true, "report_reasons": null, "author": "SnooBunnies9924", "discussion_type": null, "num_comments": 7, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/im9hyz/calculate_leaves_of_employee_of_year/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/im9hyz/calculate_leaves_of_employee_of_year/", "subreddit_subscribers": 45811, "created_utc": 1599194137.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "We have a Rails Monolith in Heroku. We serve assets in the same server since we don't have many users and all the workload is managed by Sidekiq.\nWe use Sprockets and Webpacker for our frontend. We use react-webpacker to \"prerender\" the props of some root components that are later rendered in the client.\n\nWe have a listing view that's fairly slow: we render some filters and two lists. The list items are \"prerendered\" react-webpacker components. The filters are rendered by the old pipeline by using chosenjs.\n\nThe thing is that in Heroku, when accessing this page, all we can see for the first **40 seconds** are the filters as raw html select elements. Then, it seems that the JS executes, chosenjs and react components render.\n\nThe problem is that I have no clue why it hangs. All that I did was run a benchmark in Chrome's Performance Tab and I get that 37 seconds are spent in Layout recalculations.  So at first I thought that maybe prerendering too many react components would have something to do with this and therefore I changed that to a single prerendered component that would be in charge of building everything else. That didn't affect performance at all.\n\nThen I took a closer look and found that the HTML page is **10mb** and that Time To First Byte is around 10 seconds. I guess this last metric has something to do with Request Queue Time, but I have no clue where to retrieve this in Heroku. I checked New Relic and it says that the worst requests to this page take 4 seconds max.\n\nI am kind of lost what it could be, I ran into a Nate Berkopec blog post saying that Heroku buffer is of 1024 bytes and that on big requests that might affect the queue time. However, I am using Puma so I guess it shouldn't really affect it?\n\nI am clueless on where to look. We are thinking about removing the logic from the html rendering and just add API endpoints that are fetched as soon as React components mount, but that's a huge change and I want to discard everything else before moving into that.", "author_fullname": "t2_piwno", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Page client rendering too slow", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_im32bl", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 1.0, "author_flair_background_color": null, "subreddit_type": "public", "ups": 5, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 5, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1599198647.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;We have a Rails Monolith in Heroku. We serve assets in the same server since we don&amp;#39;t have many users and all the workload is managed by Sidekiq.\nWe use Sprockets and Webpacker for our frontend. We use react-webpacker to &amp;quot;prerender&amp;quot; the props of some root components that are later rendered in the client.&lt;/p&gt;\n\n&lt;p&gt;We have a listing view that&amp;#39;s fairly slow: we render some filters and two lists. The list items are &amp;quot;prerendered&amp;quot; react-webpacker components. The filters are rendered by the old pipeline by using chosenjs.&lt;/p&gt;\n\n&lt;p&gt;The thing is that in Heroku, when accessing this page, all we can see for the first &lt;strong&gt;40 seconds&lt;/strong&gt; are the filters as raw html select elements. Then, it seems that the JS executes, chosenjs and react components render.&lt;/p&gt;\n\n&lt;p&gt;The problem is that I have no clue why it hangs. All that I did was run a benchmark in Chrome&amp;#39;s Performance Tab and I get that 37 seconds are spent in Layout recalculations.  So at first I thought that maybe prerendering too many react components would have something to do with this and therefore I changed that to a single prerendered component that would be in charge of building everything else. That didn&amp;#39;t affect performance at all.&lt;/p&gt;\n\n&lt;p&gt;Then I took a closer look and found that the HTML page is &lt;strong&gt;10mb&lt;/strong&gt; and that Time To First Byte is around 10 seconds. I guess this last metric has something to do with Request Queue Time, but I have no clue where to retrieve this in Heroku. I checked New Relic and it says that the worst requests to this page take 4 seconds max.&lt;/p&gt;\n\n&lt;p&gt;I am kind of lost what it could be, I ran into a Nate Berkopec blog post saying that Heroku buffer is of 1024 bytes and that on big requests that might affect the queue time. However, I am using Puma so I guess it shouldn&amp;#39;t really affect it?&lt;/p&gt;\n\n&lt;p&gt;I am clueless on where to look. We are thinking about removing the logic from the html rendering and just add API endpoints that are fetched as soon as React components mount, but that&amp;#39;s a huge change and I want to discard everything else before moving into that.&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "im32bl", "is_robot_indexable": true, "report_reasons": null, "author": "mattgrave", "discussion_type": null, "num_comments": 8, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/im32bl/page_client_rendering_too_slow/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/im32bl/page_client_rendering_too_slow/", "subreddit_subscribers": 45811, "created_utc": 1599169847.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "I'm new to using the spring gem and have been impressed at how it has made my tests run quicker. I've followed the documentation:\n\n1. Included the spring and spring-command-rspec gems in the development and test groups\n2. ran $ bundle install\n3. ran $ bundle exec spring binstub --all\n\nI have direnv, so can type rspec and it runs it with spring. So when I do\n\n&amp;#x200B;\n\n$ rspec ./spec/path/to/file\\_spec.rb \n\nIt runs it much quicker! Should I be expecting the same behaviour when I run:\n\n$ rspec ./spec/ \n\nBecause currently, it runs at the same speed as when I run it without spring.\n\nAny pointers and advice would be appreciated, thanks.", "author_fullname": "t2_dpkos", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Is Spring meant to work when I run my full rspec tests suite?", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_iluo64", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 1.0, "author_flair_background_color": null, "subreddit_type": "public", "ups": 10, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 10, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1599172897.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": true, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;I&amp;#39;m new to using the spring gem and have been impressed at how it has made my tests run quicker. I&amp;#39;ve followed the documentation:&lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;Included the spring and spring-command-rspec gems in the development and test groups&lt;/li&gt;\n&lt;li&gt;ran $ bundle install&lt;/li&gt;\n&lt;li&gt;ran $ bundle exec spring binstub --all&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;p&gt;I have direnv, so can type rspec and it runs it with spring. So when I do&lt;/p&gt;\n\n&lt;p&gt;&amp;#x200B;&lt;/p&gt;\n\n&lt;p&gt;$ rspec ./spec/path/to/file_spec.rb &lt;/p&gt;\n\n&lt;p&gt;It runs it much quicker! Should I be expecting the same behaviour when I run:&lt;/p&gt;\n\n&lt;p&gt;$ rspec ./spec/ &lt;/p&gt;\n\n&lt;p&gt;Because currently, it runs at the same speed as when I run it without spring.&lt;/p&gt;\n\n&lt;p&gt;Any pointers and advice would be appreciated, thanks.&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": true, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "iluo64", "is_robot_indexable": true, "report_reasons": null, "author": "Jugann", "discussion_type": null, "num_comments": 11, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/iluo64/is_spring_meant_to_work_when_i_run_my_full_rspec/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/iluo64/is_spring_meant_to_work_when_i_run_my_full_rspec/", "subreddit_subscribers": 45811, "created_utc": 1599144097.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "I want to add (or subtract) hours like these  '+0330' to datetime. Let's say if I have '2020-09-03 15:30:20'\n\nfor '+0330' I want it to become '2020-09-03 19:00:20'. \n\nfor '-0330' I want it to become '2020-09-03 12:00:20'. \n\nI came up with this simple method, but it seems to be prone to errors, any suggestions? :)\n\n    def timezoneize(timedate, timezone_digits)\n    digits = timezone_digits.gsub('0', '')\n     if digits[0] = '+'\n       timedate + digits.to_i.hours\n     else\n       timedate - digits.to_i.hours\n     end\n end", "author_fullname": "t2_9dfvqec", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "How to add hours to datetime?", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_ilsvo3", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 0.89, "author_flair_background_color": null, "subreddit_type": "public", "ups": 7, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 7, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1599166651.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;I want to add (or subtract) hours like these  &amp;#39;+0330&amp;#39; to datetime. Let&amp;#39;s say if I have &amp;#39;2020-09-03 15:30:20&amp;#39;&lt;/p&gt;\n\n&lt;p&gt;for &amp;#39;+0330&amp;#39; I want it to become &amp;#39;2020-09-03 19:00:20&amp;#39;. &lt;/p&gt;\n\n&lt;p&gt;for &amp;#39;-0330&amp;#39; I want it to become &amp;#39;2020-09-03 12:00:20&amp;#39;. &lt;/p&gt;\n\n&lt;p&gt;I came up with this simple method, but it seems to be prone to errors, any suggestions? :)&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;def timezoneize(timedate, timezone_digits)\ndigits = timezone_digits.gsub(&amp;#39;0&amp;#39;, &amp;#39;&amp;#39;)\n if digits[0] = &amp;#39;+&amp;#39;\n   timedate + digits.to_i.hours\n else\n   timedate - digits.to_i.hours\n end\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;end&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "ilsvo3", "is_robot_indexable": true, "report_reasons": null, "author": "zilton7000", "discussion_type": null, "num_comments": 14, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/ilsvo3/how_to_add_hours_to_datetime/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/ilsvo3/how_to_add_hours_to_datetime/", "subreddit_subscribers": 45811, "created_utc": 1599137851.0, "num_crossposts": 0, "media": null, "is_video": false}}], "after": "t3_ilsvo3", "before": null}}