{"kind": "Listing", "data": {"modhash": "", "dist": 12, "children": [{"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "In this thread you can showcase your personal pet project to other redditors.\n\nNeed help with a specific problem or just wanna have some extra eyeballs on your code? Ask away!\n\nA suggested format to get you started:\n\n1. **Name of your project**\n2. **A short description**\n3. **Application stack**\n4. **Link to Live app**\n5. **Link to GitHub**\n6. **You experience level**\n7. **Other information or areas that you would like advice on**\n\n\u00a0\n\n^(Many thanks to Kritnc for getting the ball rolling.)", "author_fullname": "t2_6l4z3", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Personal Projects - Show off your own project and/or ask for advice", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_ipfxw8", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 0.93, "author_flair_background_color": null, "subreddit_type": "public", "ups": 11, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 11, "approved_by": null, "author_premium": true, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1599687159.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;In this thread you can showcase your personal pet project to other redditors.&lt;/p&gt;\n\n&lt;p&gt;Need help with a specific problem or just wanna have some extra eyeballs on your code? Ask away!&lt;/p&gt;\n\n&lt;p&gt;A suggested format to get you started:&lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;&lt;strong&gt;Name of your project&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;A short description&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Application stack&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Link to Live app&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Link to GitHub&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;You experience level&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Other information or areas that you would like advice on&lt;/strong&gt;&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;p&gt;\u00a0&lt;/p&gt;\n\n&lt;p&gt;&lt;sup&gt;Many thanks to Kritnc for getting the ball rolling.&lt;/sup&gt;&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": true, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": "moderator", "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "ipfxw8", "is_robot_indexable": true, "report_reasons": null, "author": "AutoModerator", "discussion_type": null, "num_comments": 7, "send_replies": false, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/ipfxw8/personal_projects_show_off_your_own_project_andor/", "parent_whitelist_status": "all_ads", "stickied": true, "url": "https://www.reddit.com/r/rails/comments/ipfxw8/personal_projects_show_off_your_own_project_andor/", "subreddit_subscribers": 45954, "created_utc": 1599658359.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "Please use this thread to discuss **cool** but relatively **unknown** gems you've found.\n\nYou **should not** post popular gems such as [those listed in wiki](https://www.reddit.com/r/rails/wiki/index#wiki_popular_gems) that are already well known.\n\nPlease include a **description** and a **link** to the gem's homepage in your comment.", "author_fullname": "t2_6l4z3", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Gimme Gems Thursdays - Found an awesome new gem? Post it here!", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_iui4p8", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 0.95, "author_flair_background_color": null, "subreddit_type": "public", "ups": 15, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 15, "approved_by": null, "author_premium": true, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1600373192.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;Please use this thread to discuss &lt;strong&gt;cool&lt;/strong&gt; but relatively &lt;strong&gt;unknown&lt;/strong&gt; gems you&amp;#39;ve found.&lt;/p&gt;\n\n&lt;p&gt;You &lt;strong&gt;should not&lt;/strong&gt; post popular gems such as &lt;a href=\"https://www.reddit.com/r/rails/wiki/index#wiki_popular_gems\"&gt;those listed in wiki&lt;/a&gt; that are already well known.&lt;/p&gt;\n\n&lt;p&gt;Please include a &lt;strong&gt;description&lt;/strong&gt; and a &lt;strong&gt;link&lt;/strong&gt; to the gem&amp;#39;s homepage in your comment.&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": true, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": "moderator", "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "iui4p8", "is_robot_indexable": true, "report_reasons": null, "author": "AutoModerator", "discussion_type": null, "num_comments": 5, "send_replies": false, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/iui4p8/gimme_gems_thursdays_found_an_awesome_new_gem/", "parent_whitelist_status": "all_ads", "stickied": true, "url": "https://www.reddit.com/r/rails/comments/iui4p8/gimme_gems_thursdays_found_an_awesome_new_gem/", "subreddit_subscribers": 45954, "created_utc": 1600344392.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "I have a model \n\n    class Posts\n      has_many :comments\n \n      def latest_comment\n        comments.order(:created_at).last\n      end\n    end\n\nIf I do\n\n    Post.includes(:comments).each do |post|\n        puts post.latest_comment\n    end\n\nThe ***instance method*** seems to ignore the ```includes``` and runs a query for each post to get the latest comment for each post.\n\nI'm able to circumvent this via a static/class method which is:\n\n    def self.get_latest_comment(post)\n        post.comments.sort_by{|x|x.created_at}.last\n    end\n\nbut this feels inelegant. Is this the only solution?\n\nThanks in advance!\n\n**Edit** fixed my example", "author_fullname": "t2_11ix0b", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Please help me with my N+1 Problem", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_iv2ga7", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 0.85, "author_flair_background_color": null, "subreddit_type": "public", "ups": 8, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 8, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1600447556.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;I have a model &lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;class Posts\n  has_many :comments\n\n  def latest_comment\n    comments.order(:created_at).last\n  end\nend\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;If I do&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;Post.includes(:comments).each do |post|\n    puts post.latest_comment\nend\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;The &lt;strong&gt;&lt;em&gt;instance method&lt;/em&gt;&lt;/strong&gt; seems to ignore the &lt;code&gt;includes&lt;/code&gt; and runs a query for each post to get the latest comment for each post.&lt;/p&gt;\n\n&lt;p&gt;I&amp;#39;m able to circumvent this via a static/class method which is:&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;def self.get_latest_comment(post)\n    post.comments.sort_by{|x|x.created_at}.last\nend\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;but this feels inelegant. Is this the only solution?&lt;/p&gt;\n\n&lt;p&gt;Thanks in advance!&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;Edit&lt;/strong&gt; fixed my example&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "iv2ga7", "is_robot_indexable": true, "report_reasons": null, "author": "Nrdrsr", "discussion_type": null, "num_comments": 9, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/iv2ga7/please_help_me_with_my_n1_problem/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/iv2ga7/please_help_me_with_my_n1_problem/", "subreddit_subscribers": 45954, "created_utc": 1600418756.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "How and why does this work?   \n\n\n    class User &lt; ActiveRecord::Base\n      CONSTANT = 1\n    end\n\nAnd when I add space in between class and const name it still prints the value.   \n\n\n    User::CONSTANT # prints 1\n    User::                   CONSTANT # prints 1", "author_fullname": "t2_7m8mv9r7", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Any number of spaces after :: is okay?", "link_flair_richtext": [{"e": "text", "t": "Question"}], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": "question", "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_iv3849", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 1.0, "author_flair_background_color": null, "subreddit_type": "public", "ups": 2, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": "Question", "can_mod_post": false, "score": 2, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1600451840.0, "link_flair_type": "richtext", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;How and why does this work?   &lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;class User &amp;lt; ActiveRecord::Base\n  CONSTANT = 1\nend\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;And when I add space in between class and const name it still prints the value.   &lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;User::CONSTANT # prints 1\nUser::                   CONSTANT # prints 1\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "link_flair_template_id": "fdfc6806-aea7-11e4-bf37-22000b3889f5", "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "iv3849", "is_robot_indexable": true, "report_reasons": null, "author": "prosperousdoggo", "discussion_type": null, "num_comments": 2, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/iv3849/any_number_of_spaces_after_is_okay/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/iv3849/any_number_of_spaces_after_is_okay/", "subreddit_subscribers": 45954, "created_utc": 1600423040.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "A few days ago I posted a problem I had with [Nginx (also Apache)](https://www.reddit.com/r/rails/comments/ito2ou/trying_to_deploy_my_web_app_on_digitalocean/), so at the end what I did was:\n\n1. Use standalone passenger and serve my web app on ports 5000 (HTTP) and 5001 (HTTPS)\n2. redirect port `80` to `5000` and 443 to `5001` with `iptables`, example: `sudo iptables -t nat -I PREROUTING -p tcp --dport 80 -j REDIRECT --to-ports 5000`\n\nIs this a banana solution?", "author_fullname": "t2_7u5ml9u0", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Is this a banana solution?", "link_flair_richtext": [{"e": "text", "t": "Learning"}], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": "learning", "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_iutmqo", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 0.9, "author_flair_background_color": null, "subreddit_type": "public", "ups": 8, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": "Learning", "can_mod_post": false, "score": 8, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1600409557.0, "link_flair_type": "richtext", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;A few days ago I posted a problem I had with &lt;a href=\"https://www.reddit.com/r/rails/comments/ito2ou/trying_to_deploy_my_web_app_on_digitalocean/\"&gt;Nginx (also Apache)&lt;/a&gt;, so at the end what I did was:&lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;Use standalone passenger and serve my web app on ports 5000 (HTTP) and 5001 (HTTPS)&lt;/li&gt;\n&lt;li&gt;redirect port &lt;code&gt;80&lt;/code&gt; to &lt;code&gt;5000&lt;/code&gt; and 443 to &lt;code&gt;5001&lt;/code&gt; with &lt;code&gt;iptables&lt;/code&gt;, example: &lt;code&gt;sudo iptables -t nat -I PREROUTING -p tcp --dport 80 -j REDIRECT --to-ports 5000&lt;/code&gt;&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;p&gt;Is this a banana solution?&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "link_flair_template_id": "c0045e6c-adff-11e4-9f08-22000b3012cc", "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "iutmqo", "is_robot_indexable": true, "report_reasons": null, "author": "MishiMusho", "discussion_type": null, "num_comments": 19, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/iutmqo/is_this_a_banana_solution/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/iutmqo/is_this_a_banana_solution/", "subreddit_subscribers": 45954, "created_utc": 1600380757.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "I would like to set webpacker to user a nonce. My app's CSP breaks ever since I installed it. I think it has something to do with `style-loader`. The browser console error looks like this:\n\n`Content Security Policy: The page\u2019s settings observed the loading of a resource at inline (\u201cstyle-src\u201d). A CSP report is being sent. injectStylesIntoStyleTag.js:117`\n\n`Content Security Policy: The page\u2019s settings observed the loading of a resource at inline (\u201cstyle-src\u201d). A CSP report is being sent. injectStylesIntoStyleTag.js:190`\n\nThe code in question:\n\n    function insertStyleElement(options) {\n      var style = document.createElement('style');      \n      ...\n      if (typeof options.insert === 'function') {\n        options.insert(style);\n      } else {\n        var target = getTarget(options.insert || 'head');\n        if (!target) {\n          throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n        }\n        target.appendChild(style); //LINE 117//\n      }\n      return style;\n    }\n\nAnd:\n\n    function applyToTag(style, options, obj) {\n      var css = obj.css;\n      ...\n      if (style.styleSheet) {\n        style.styleSheet.cssText = css;\n      } else {\n        while (style.firstChild) {\n          style.removeChild(style.firstChild);\n        }\n        style.appendChild(document.createTextNode(css)); //LINE 190//\n      }\n    }\n\nHow do I whitelist this? Note that I'm using Turbolinks. This ([https://webpack.js.org/guides/csp/](https://webpack.js.org/guides/csp/)) says to add `__webpack_nonce__ = 'random'` to my entry file ( in this case `app/javascript/packs/application.js`), yet adding that nonce to my csp file has no effect on the style-src violation. Which in this case, looks like this: `config.style_src :self, '`[`https://fonts.googleapis.com`](https://fonts.googleapis.com)`', 'nonce-random'`", "author_fullname": "t2_76cp1k68", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "webpacker breaks CSP", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_iusays", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 0.86, "author_flair_background_color": null, "subreddit_type": "public", "ups": 5, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 5, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": 1600397653.0, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1600405206.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;I would like to set webpacker to user a nonce. My app&amp;#39;s CSP breaks ever since I installed it. I think it has something to do with &lt;code&gt;style-loader&lt;/code&gt;. The browser console error looks like this:&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;Content Security Policy: The page\u2019s settings observed the loading of a resource at inline (\u201cstyle-src\u201d). A CSP report is being sent. injectStylesIntoStyleTag.js:117&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;Content Security Policy: The page\u2019s settings observed the loading of a resource at inline (\u201cstyle-src\u201d). A CSP report is being sent. injectStylesIntoStyleTag.js:190&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;The code in question:&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;function insertStyleElement(options) {\n  var style = document.createElement(&amp;#39;style&amp;#39;);      \n  ...\n  if (typeof options.insert === &amp;#39;function&amp;#39;) {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || &amp;#39;head&amp;#39;);\n    if (!target) {\n      throw new Error(&amp;quot;Couldn&amp;#39;t find a style target. This probably means that the value for the &amp;#39;insert&amp;#39; parameter is invalid.&amp;quot;);\n    }\n    target.appendChild(style); //LINE 117//\n  }\n  return style;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;And:&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;function applyToTag(style, options, obj) {\n  var css = obj.css;\n  ...\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n    style.appendChild(document.createTextNode(css)); //LINE 190//\n  }\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;How do I whitelist this? Note that I&amp;#39;m using Turbolinks. This (&lt;a href=\"https://webpack.js.org/guides/csp/\"&gt;https://webpack.js.org/guides/csp/&lt;/a&gt;) says to add &lt;code&gt;__webpack_nonce__ = &amp;#39;random&amp;#39;&lt;/code&gt; to my entry file ( in this case &lt;code&gt;app/javascript/packs/application.js&lt;/code&gt;), yet adding that nonce to my csp file has no effect on the style-src violation. Which in this case, looks like this: &lt;code&gt;config.style_src :self, &amp;#39;&lt;/code&gt;&lt;a href=\"https://fonts.googleapis.com\"&gt;&lt;code&gt;https://fonts.googleapis.com&lt;/code&gt;&lt;/a&gt;&lt;code&gt;&amp;#39;, &amp;#39;nonce-random&amp;#39;&lt;/code&gt;&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "iusays", "is_robot_indexable": true, "report_reasons": null, "author": "Kni2L", "discussion_type": null, "num_comments": 4, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/iusays/webpacker_breaks_csp/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/iusays/webpacker_breaks_csp/", "subreddit_subscribers": 45954, "created_utc": 1600376406.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "Please correct me if you see any better way to organize my problem. \n\n&amp;#x200B;\n\nI am doing data backup from a 3rd party provider. Their data is provided daily, and is not finalized for 14-days. \n\n&amp;#x200B;\n\nMeaning we basically have 14 days of \"fresh\" data to fetch, and the oldest is more important than the newest.\n\n&amp;#x200B;\n\nEveryday we take all records for the last 14 days and mark them as \"new\"\n\nEvery 10 minutes we fetch data on records sorted oldest to newest mostly to make sure we don't hit API limits but i really don't have much observability into how often we retry jobs due to the API limits. \n\n&amp;#x200B;\n\nAnyone have a rock-solid solution that has ETL experience and whatnot?", "author_fullname": "t2_559ez", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "anyone successfully convert a model into a queue for ETL purposes?", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_iumw4v", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 1.0, "author_flair_background_color": null, "subreddit_type": "public", "ups": 7, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 7, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1600388866.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;Please correct me if you see any better way to organize my problem. &lt;/p&gt;\n\n&lt;p&gt;&amp;#x200B;&lt;/p&gt;\n\n&lt;p&gt;I am doing data backup from a 3rd party provider. Their data is provided daily, and is not finalized for 14-days. &lt;/p&gt;\n\n&lt;p&gt;&amp;#x200B;&lt;/p&gt;\n\n&lt;p&gt;Meaning we basically have 14 days of &amp;quot;fresh&amp;quot; data to fetch, and the oldest is more important than the newest.&lt;/p&gt;\n\n&lt;p&gt;&amp;#x200B;&lt;/p&gt;\n\n&lt;p&gt;Everyday we take all records for the last 14 days and mark them as &amp;quot;new&amp;quot;&lt;/p&gt;\n\n&lt;p&gt;Every 10 minutes we fetch data on records sorted oldest to newest mostly to make sure we don&amp;#39;t hit API limits but i really don&amp;#39;t have much observability into how often we retry jobs due to the API limits. &lt;/p&gt;\n\n&lt;p&gt;&amp;#x200B;&lt;/p&gt;\n\n&lt;p&gt;Anyone have a rock-solid solution that has ETL experience and whatnot?&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "iumw4v", "is_robot_indexable": true, "report_reasons": null, "author": "seainhd", "discussion_type": null, "num_comments": 7, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/iumw4v/anyone_successfully_convert_a_model_into_a_queue/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/iumw4v/anyone_successfully_convert_a_model_into_a_queue/", "subreddit_subscribers": 45954, "created_utc": 1600360066.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "I'm using the active\\_storage-send-zip, but it seems to only focus on has\\_many\\_attached.  I need to zip all files from the model at once. I can't seem to combine the two, to get the results that I want.\n\n&amp;#x200B;\n\nFor example:\n\nUser.rb\n\nhas\\_one\\_attached :avatar\n\nhas\\_many\\_attached :photos\n\n&amp;#x200B;\n\nzip all photos + their avatar image", "author_fullname": "t2_asanmgz", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Zipping active storage has_one_attached &amp; has_many_attached files in one zip file for a model", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_iui5g4", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 1.0, "author_flair_background_color": null, "subreddit_type": "public", "ups": 10, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 10, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1600373284.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;I&amp;#39;m using the active_storage-send-zip, but it seems to only focus on has_many_attached.  I need to zip all files from the model at once. I can&amp;#39;t seem to combine the two, to get the results that I want.&lt;/p&gt;\n\n&lt;p&gt;&amp;#x200B;&lt;/p&gt;\n\n&lt;p&gt;For example:&lt;/p&gt;\n\n&lt;p&gt;User.rb&lt;/p&gt;\n\n&lt;p&gt;has_one_attached :avatar&lt;/p&gt;\n\n&lt;p&gt;has_many_attached :photos&lt;/p&gt;\n\n&lt;p&gt;&amp;#x200B;&lt;/p&gt;\n\n&lt;p&gt;zip all photos + their avatar image&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "iui5g4", "is_robot_indexable": true, "report_reasons": null, "author": "Code4Greatness", "discussion_type": null, "num_comments": 2, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/iui5g4/zipping_active_storage_has_one_attached_has_many/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/iui5g4/zipping_active_storage_has_one_attached_has_many/", "subreddit_subscribers": 45954, "created_utc": 1600344484.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "From robocops style guidelines this is what they suggest. [https://github.com/rubocop-hq/rails-style-guide#callbacks-order](https://github.com/rubocop-hq/rails-style-guide#callbacks-order)\n\n    #bad\n    class Person\n      after_commit :after_commit_callback\n      before_validation :before_validation_callback\n    end\n    \n    #good\n    class Person\n      before_validation :before_validation_callback\n      after_commit :after_commit_callback\n    end\n\nMy question is suppose we have something like this  \n\n\n    class Person\n      after_save :after_user_update on: :update\n      after_save :after_user_save on: :create\n      before_validation :validate_user_update on: :update\n      before_validation :validate_user_destroy on: :destroy\n    end\n\nIn that case, what is the best approach? \n\nOption 1) Group all before\\_validations for create, update, delete and then after\\_validation and so on\n\n    class Person\n      before_validation :validate_user_update on: :update\n      before_validation :validate_user_destroy on: :destroy\n      after_save :after_user_save on: :create\n      after_save :after_user_update on: :update\n    end\n\nOr   \ngo with the all the callbacks together for each of the action, first set for create and then update and delete.   \nfrom the list here [https://guides.rubyonrails.org/active\\_record\\_callbacks.html#available-callbacks](https://guides.rubyonrails.org/active_record_callbacks.html#available-callbacks)\n\n    class Person\n      before_validation :validate_user_update on: :update\n      after_save :after_user_save on: :create\n      before_validation :validate_user_destroy on: :destroy\n      after_save :after_user_update on: :update\n    end\n\nWhat are your thoughts?", "author_fullname": "t2_7m8mv9r7", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "rails code style for model callbacks", "link_flair_richtext": [{"e": "text", "t": "Discussion"}], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": "discussion", "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_iujskb", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 1.0, "author_flair_background_color": null, "subreddit_type": "public", "ups": 6, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": "Discussion", "can_mod_post": false, "score": 6, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1600379277.0, "link_flair_type": "richtext", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;From robocops style guidelines this is what they suggest. &lt;a href=\"https://github.com/rubocop-hq/rails-style-guide#callbacks-order\"&gt;https://github.com/rubocop-hq/rails-style-guide#callbacks-order&lt;/a&gt;&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;#bad\nclass Person\n  after_commit :after_commit_callback\n  before_validation :before_validation_callback\nend\n\n#good\nclass Person\n  before_validation :before_validation_callback\n  after_commit :after_commit_callback\nend\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;My question is suppose we have something like this  &lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;class Person\n  after_save :after_user_update on: :update\n  after_save :after_user_save on: :create\n  before_validation :validate_user_update on: :update\n  before_validation :validate_user_destroy on: :destroy\nend\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;In that case, what is the best approach? &lt;/p&gt;\n\n&lt;p&gt;Option 1) Group all before_validations for create, update, delete and then after_validation and so on&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;class Person\n  before_validation :validate_user_update on: :update\n  before_validation :validate_user_destroy on: :destroy\n  after_save :after_user_save on: :create\n  after_save :after_user_update on: :update\nend\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Or&lt;br/&gt;\ngo with the all the callbacks together for each of the action, first set for create and then update and delete.&lt;br/&gt;\nfrom the list here &lt;a href=\"https://guides.rubyonrails.org/active_record_callbacks.html#available-callbacks\"&gt;https://guides.rubyonrails.org/active_record_callbacks.html#available-callbacks&lt;/a&gt;&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;class Person\n  before_validation :validate_user_update on: :update\n  after_save :after_user_save on: :create\n  before_validation :validate_user_destroy on: :destroy\n  after_save :after_user_update on: :update\nend\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;What are your thoughts?&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "link_flair_template_id": "a5131406-c185-11e4-b5eb-22000bc14795", "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "iujskb", "is_robot_indexable": true, "report_reasons": null, "author": "prosperousdoggo", "discussion_type": null, "num_comments": 0, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/iujskb/rails_code_style_for_model_callbacks/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/iujskb/rails_code_style_for_model_callbacks/", "subreddit_subscribers": 45954, "created_utc": 1600350477.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "", "author_fullname": "t2_7sp80ywk", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "I am using carrierwave to upload the image and parsley for validation. when I tried to edit the form it shows required value in image field though the image is uploaded.", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_iuhi7w", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 1.0, "author_flair_background_color": null, "subreddit_type": "public", "ups": 6, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 6, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1600370475.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": null, "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": true, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "iuhi7w", "is_robot_indexable": true, "report_reasons": null, "author": "sthasys", "discussion_type": null, "num_comments": 0, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/iuhi7w/i_am_using_carrierwave_to_upload_the_image_and/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/iuhi7w/i_am_using_carrierwave_to_upload_the_image_and/", "subreddit_subscribers": 45954, "created_utc": 1600341675.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "Have you helped companies specifically just upgrade their Rails app to the latest version? then, We might have your next challenge to conquer. Please leave your email here if you are interested and I will reach out to you.", "author_fullname": "t2_e0cmd", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Rails upgrade experts wanted", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_iuu79l", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 0.29, "author_flair_background_color": null, "subreddit_type": "public", "ups": 0, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 0, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1600411570.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;Have you helped companies specifically just upgrade their Rails app to the latest version? then, We might have your next challenge to conquer. Please leave your email here if you are interested and I will reach out to you.&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": true, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "iuu79l", "is_robot_indexable": true, "report_reasons": null, "author": "gogooliMagooli", "discussion_type": null, "num_comments": 2, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/iuu79l/rails_upgrade_experts_wanted/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/iuu79l/rails_upgrade_experts_wanted/", "subreddit_subscribers": 45954, "created_utc": 1600382770.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "This is a bit of a n00b question (I'm sure), but ...\n\nI'm writing a simple Rails application that allows the user to upload a PDF file with two pages of scanned text. Once uploaded, the application should perform OCR on the PDF and display the \"extracted\" text. This sounds simple.\n\nI'm using Rails 6, Active Storage, and the local disk during development.\n\nI'm able to upload a PDF and attach it to a Case, but I don't know how to access it so I can send it to the OCR method (I'm using Docsplit with Tesseract for now).\n\nI want to be able to say something like this in my controller:\n\n    @c = Case.first\n    @c.ocr_text = Docsplit.extract_text(@c.attachement)\n\nAnd something like this in my view:\n\n    &lt;p&gt;The text from the PDF is:&lt;/p&gt;\n    &lt;%= @c.ocr_text %&gt;\n\nIt's so easy to upload a file. I'm surprised it isn't as easy (apparently) to get access to the file. Am I misunderstanding something?\n\nAtDhVaAnNkCsE (thanks in ADVANCE)", "author_fullname": "t2_15bao", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "How to upload and access a file?", "link_flair_richtext": [{"e": "text", "t": "Question"}], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": "question", "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_iucars", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 0.88, "author_flair_background_color": null, "subreddit_type": "public", "ups": 6, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": "Question", "can_mod_post": false, "score": 6, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1600345503.0, "link_flair_type": "richtext", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;This is a bit of a n00b question (I&amp;#39;m sure), but ...&lt;/p&gt;\n\n&lt;p&gt;I&amp;#39;m writing a simple Rails application that allows the user to upload a PDF file with two pages of scanned text. Once uploaded, the application should perform OCR on the PDF and display the &amp;quot;extracted&amp;quot; text. This sounds simple.&lt;/p&gt;\n\n&lt;p&gt;I&amp;#39;m using Rails 6, Active Storage, and the local disk during development.&lt;/p&gt;\n\n&lt;p&gt;I&amp;#39;m able to upload a PDF and attach it to a Case, but I don&amp;#39;t know how to access it so I can send it to the OCR method (I&amp;#39;m using Docsplit with Tesseract for now).&lt;/p&gt;\n\n&lt;p&gt;I want to be able to say something like this in my controller:&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;@c = Case.first\n@c.ocr_text = Docsplit.extract_text(@c.attachement)\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;And something like this in my view:&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;&amp;lt;p&amp;gt;The text from the PDF is:&amp;lt;/p&amp;gt;\n&amp;lt;%= @c.ocr_text %&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;It&amp;#39;s so easy to upload a file. I&amp;#39;m surprised it isn&amp;#39;t as easy (apparently) to get access to the file. Am I misunderstanding something?&lt;/p&gt;\n\n&lt;p&gt;AtDhVaAnNkCsE (thanks in ADVANCE)&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "link_flair_template_id": "fdfc6806-aea7-11e4-bf37-22000b3889f5", "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "iucars", "is_robot_indexable": true, "report_reasons": null, "author": "rman666", "discussion_type": null, "num_comments": 6, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/iucars/how_to_upload_and_access_a_file/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/iucars/how_to_upload_and_access_a_file/", "subreddit_subscribers": 45954, "created_utc": 1600316703.0, "num_crossposts": 0, "media": null, "is_video": false}}], "after": "t3_iucars", "before": null}}