{"kind": "Listing", "data": {"modhash": "", "dist": 10, "children": [{"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "golang", "selftext": "", "author_fullname": "t2_57o7t", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "dotGo 2020 has been cancelled", "link_flair_richtext": [], "subreddit_name_prefixed": "r/golang", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "hide_score": false, "name": "t3_fdkbd1", "quarantine": false, "link_flair_text_color": "dark", "author_flair_background_color": null, "subreddit_type": "public", "ups": 95, "total_awards_received": 0, "media_embed": {"content": "&lt;blockquote class=\"twitter-video\"&gt;&lt;p lang=\"en\" dir=\"ltr\"&gt;\ud83d\udea8 IMPORTANT \ud83d\udea8&lt;br&gt;&lt;br&gt;It is with great sadness that we must cancel dotGo 2020 :-(&lt;br&gt;&lt;br&gt;This cancellation follows the recent instructions from the French government to cancel large events in France due to the COVID-19 outbreak. &lt;a href=\"https://t.co/6aQQrYHa76\"&gt;pic.twitter.com/6aQQrYHa76&lt;/a&gt;&lt;/p&gt;&amp;mdash; dotGo (@dotGoEu) &lt;a href=\"https://twitter.com/dotGoEu/status/1234767083369639937?ref_src=twsrc%5Etfw\"&gt;March 3, 2020&lt;/a&gt;&lt;/blockquote&gt;\n&lt;script async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"&gt;&lt;/script&gt;\n", "width": 350, "scrolling": false, "height": 427}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": {"type": "twitter.com", "oembed": {"provider_url": "https://twitter.com", "version": "1.0", "url": "https://twitter.com/dotGoEu/status/1234767083369639937", "author_name": "dotGo", "height": 427, "width": 350, "html": "&lt;blockquote class=\"twitter-video\"&gt;&lt;p lang=\"en\" dir=\"ltr\"&gt;\ud83d\udea8 IMPORTANT \ud83d\udea8&lt;br&gt;&lt;br&gt;It is with great sadness that we must cancel dotGo 2020 :-(&lt;br&gt;&lt;br&gt;This cancellation follows the recent instructions from the French government to cancel large events in France due to the COVID-19 outbreak. &lt;a href=\"https://t.co/6aQQrYHa76\"&gt;pic.twitter.com/6aQQrYHa76&lt;/a&gt;&lt;/p&gt;&amp;mdash; dotGo (@dotGoEu) &lt;a href=\"https://twitter.com/dotGoEu/status/1234767083369639937?ref_src=twsrc%5Etfw\"&gt;March 3, 2020&lt;/a&gt;&lt;/blockquote&gt;\n&lt;script async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"&gt;&lt;/script&gt;\n", "author_url": "https://twitter.com/dotGoEu", "provider_name": "Twitter", "cache_age": 3153600000, "type": "rich"}}, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {"content": "&lt;blockquote class=\"twitter-video\"&gt;&lt;p lang=\"en\" dir=\"ltr\"&gt;\ud83d\udea8 IMPORTANT \ud83d\udea8&lt;br&gt;&lt;br&gt;It is with great sadness that we must cancel dotGo 2020 :-(&lt;br&gt;&lt;br&gt;This cancellation follows the recent instructions from the French government to cancel large events in France due to the COVID-19 outbreak. &lt;a href=\"https://t.co/6aQQrYHa76\"&gt;pic.twitter.com/6aQQrYHa76&lt;/a&gt;&lt;/p&gt;&amp;mdash; dotGo (@dotGoEu) &lt;a href=\"https://twitter.com/dotGoEu/status/1234767083369639937?ref_src=twsrc%5Etfw\"&gt;March 3, 2020&lt;/a&gt;&lt;/blockquote&gt;\n&lt;script async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"&gt;&lt;/script&gt;\n", "width": 350, "scrolling": false, "media_domain_url": "https://www.redditmedia.com/mediaembed/fdkbd1", "height": 427}, "link_flair_text": null, "can_mod_post": false, "score": 95, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": false, "mod_note": null, "created": 1583386939.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "twitter.com", "allow_live_comments": false, "selftext_html": null, "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2rc7j", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "fdkbd1", "is_robot_indexable": true, "report_reasons": null, "author": "callcifer", "discussion_type": null, "num_comments": 6, "send_replies": false, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/golang/comments/fdkbd1/dotgo_2020_has_been_cancelled/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://twitter.com/dotGoEu/status/1234767083369639937", "subreddit_subscribers": 104995, "created_utc": 1583358139.0, "num_crossposts": 0, "media": {"type": "twitter.com", "oembed": {"provider_url": "https://twitter.com", "version": "1.0", "url": "https://twitter.com/dotGoEu/status/1234767083369639937", "author_name": "dotGo", "height": 427, "width": 350, "html": "&lt;blockquote class=\"twitter-video\"&gt;&lt;p lang=\"en\" dir=\"ltr\"&gt;\ud83d\udea8 IMPORTANT \ud83d\udea8&lt;br&gt;&lt;br&gt;It is with great sadness that we must cancel dotGo 2020 :-(&lt;br&gt;&lt;br&gt;This cancellation follows the recent instructions from the French government to cancel large events in France due to the COVID-19 outbreak. &lt;a href=\"https://t.co/6aQQrYHa76\"&gt;pic.twitter.com/6aQQrYHa76&lt;/a&gt;&lt;/p&gt;&amp;mdash; dotGo (@dotGoEu) &lt;a href=\"https://twitter.com/dotGoEu/status/1234767083369639937?ref_src=twsrc%5Etfw\"&gt;March 3, 2020&lt;/a&gt;&lt;/blockquote&gt;\n&lt;script async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"&gt;&lt;/script&gt;\n", "author_url": "https://twitter.com/dotGoEu", "provider_name": "Twitter", "cache_age": 3153600000, "type": "rich"}}, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "golang", "selftext": "", "author_fullname": "t2_u2irb", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Unit testing CLI programs", "link_flair_richtext": [], "subreddit_name_prefixed": "r/golang", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "hide_score": false, "name": "t3_fdrx7b", "quarantine": false, "link_flair_text_color": "dark", "author_flair_background_color": null, "subreddit_type": "public", "ups": 13, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 13, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": false, "mod_note": null, "created": 1583423109.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "medium.com", "allow_live_comments": false, "selftext_html": null, "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2rc7j", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "fdrx7b", "is_robot_indexable": true, "report_reasons": null, "author": "elliotchance", "discussion_type": null, "num_comments": 2, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/golang/comments/fdrx7b/unit_testing_cli_programs/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://medium.com/swlh/unit-testing-cli-programs-in-go-6275c85af2e7", "subreddit_subscribers": 104995, "created_utc": 1583394309.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "golang", "selftext": "", "author_fullname": "t2_ncvfd", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Look what my colleague gave me. It's so cute! \ud83e\udd70", "link_flair_richtext": [], "subreddit_name_prefixed": "r/golang", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "hide_score": false, "name": "t3_fdab62", "quarantine": false, "link_flair_text_color": "dark", "author_flair_background_color": null, "subreddit_type": "public", "ups": 316, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": true, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 316, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": false, "mod_note": null, "created": 1583340997.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "i.redd.it", "allow_live_comments": false, "selftext_html": null, "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2rc7j", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "fdab62", "is_robot_indexable": true, "report_reasons": null, "author": "flippeeer", "discussion_type": null, "num_comments": 17, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/golang/comments/fdab62/look_what_my_colleague_gave_me_its_so_cute/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://i.redd.it/w44c9ga5emk41.jpg", "subreddit_subscribers": 104995, "created_utc": 1583312197.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "golang", "selftext": "Imagine you have started writing a new Go application, and you're about to write some unit tests that require database interaction. How would you do so? How would you store the environment configs for different environments?\n\nI assume I need to use a separate database for tests and to run migrations for this database separately. \n\nSince previously I was writing applications in Ruby on Rails, I thought it would be best to have separate config/env files for each environment and have some handy commands that could be run on each environment outside of my app's logic.\n\nWhat I managed to do, was storing my environment variables in two files under:\n\n    config/.dev.env\n    config/.test.env\n\nThen using [migrate package](https://github.com/golang-migrate/migrate) for migrations, and putting migrate commands in the Makefile similar to below:\n\n    ENV?=dev\n    \n    include config/.$(ENV).env\n    \n    export\n    POSTGRES_URL=postgres://${POSTGRESQL_USER}:${POSTGRESQL_PASSWORD}@${POSTGRESQL_HOST}:${POSTGRESQL_PORT}/${POSTGRESQL_DB}?sslmode=disable\n    \n    # create the database\n    .PHONY: db-create\n    db-create:\n    \t@env \"PGPASSWORD=${POSTGRESQL_PASSWORD}\" psql -h \"${POSTGRESQL_HOST}\" -p \"${POSTGRESQL_PORT}\" \\\n    \t\t\t-U \"${POSTGRESQL_USER}\" -w -c \"SELECT 1 FROM pg_database WHERE datname = '${POSTGRESQL_DB}';\" \\\n    \t\t\t| grep 1 \\\n    \t\t\t|| env \"PGPASSWORD=${POSTGRESQL_PASSWORD}\" psql -h \"${POSTGRESQL_HOST}\" -p \"${POSTGRESQL_PORT}\" \\\n    \t\t\t\t-U \"${POSTGRESQL_USER}\" -w -c \"create database \\\"${POSTGRESQL_DB}\\\";\"\n    \n    # apply all new migrations. pass steps flag to limit number of migrations to run\n    .PHONY: migrate-up\n    migrate-up:\n    \t@migrate -database ${POSTGRES_URL} -path ./database/migrations up ${steps}\n\nThis allows me to run migrations for my test database with a simple: `make migrate-up ENV=test`\n\nI have not found a similar approach looking at other go applications. Is there a better way?", "author_fullname": "t2_5gq2frtk", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "How would you handle database interaction in unit tests?", "link_flair_richtext": [], "subreddit_name_prefixed": "r/golang", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "hide_score": true, "name": "t3_fdvalp", "quarantine": false, "link_flair_text_color": "dark", "author_flair_background_color": null, "subreddit_type": "public", "ups": 1, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 1, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1583443969.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.golang", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;Imagine you have started writing a new Go application, and you&amp;#39;re about to write some unit tests that require database interaction. How would you do so? How would you store the environment configs for different environments?&lt;/p&gt;\n\n&lt;p&gt;I assume I need to use a separate database for tests and to run migrations for this database separately. &lt;/p&gt;\n\n&lt;p&gt;Since previously I was writing applications in Ruby on Rails, I thought it would be best to have separate config/env files for each environment and have some handy commands that could be run on each environment outside of my app&amp;#39;s logic.&lt;/p&gt;\n\n&lt;p&gt;What I managed to do, was storing my environment variables in two files under:&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;config/.dev.env\nconfig/.test.env\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Then using &lt;a href=\"https://github.com/golang-migrate/migrate\"&gt;migrate package&lt;/a&gt; for migrations, and putting migrate commands in the Makefile similar to below:&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;ENV?=dev\n\ninclude config/.$(ENV).env\n\nexport\nPOSTGRES_URL=postgres://${POSTGRESQL_USER}:${POSTGRESQL_PASSWORD}@${POSTGRESQL_HOST}:${POSTGRESQL_PORT}/${POSTGRESQL_DB}?sslmode=disable\n\n# create the database\n.PHONY: db-create\ndb-create:\n    @env &amp;quot;PGPASSWORD=${POSTGRESQL_PASSWORD}&amp;quot; psql -h &amp;quot;${POSTGRESQL_HOST}&amp;quot; -p &amp;quot;${POSTGRESQL_PORT}&amp;quot; \\\n            -U &amp;quot;${POSTGRESQL_USER}&amp;quot; -w -c &amp;quot;SELECT 1 FROM pg_database WHERE datname = &amp;#39;${POSTGRESQL_DB}&amp;#39;;&amp;quot; \\\n            | grep 1 \\\n            || env &amp;quot;PGPASSWORD=${POSTGRESQL_PASSWORD}&amp;quot; psql -h &amp;quot;${POSTGRESQL_HOST}&amp;quot; -p &amp;quot;${POSTGRESQL_PORT}&amp;quot; \\\n                -U &amp;quot;${POSTGRESQL_USER}&amp;quot; -w -c &amp;quot;create database \\&amp;quot;${POSTGRESQL_DB}\\&amp;quot;;&amp;quot;\n\n# apply all new migrations. pass steps flag to limit number of migrations to run\n.PHONY: migrate-up\nmigrate-up:\n    @migrate -database ${POSTGRES_URL} -path ./database/migrations up ${steps}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;This allows me to run migrations for my test database with a simple: &lt;code&gt;make migrate-up ENV=test&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;I have not found a similar approach looking at other go applications. Is there a better way?&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": true, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2rc7j", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "fdvalp", "is_robot_indexable": true, "report_reasons": null, "author": "mknycha", "discussion_type": null, "num_comments": 0, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/golang/comments/fdvalp/how_would_you_handle_database_interaction_in_unit/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/golang/comments/fdvalp/how_would_you_handle_database_interaction_in_unit/", "subreddit_subscribers": 104995, "created_utc": 1583415169.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "golang", "selftext": "We are pleased to release a first RC of Plik 1.3\n\nPlik is an OpenSource temporary file upload system ( wetransfer like )\n\nIt is shipped with a cool UI and CLI.  \nFiles can be stored locally or in S3 or OpenStack Swift.  \nMetadata can be stored locally ( sqlite3 ) or in a postgresql database.  \nIt supports authentication using local users or Goolgle API.  \n\n\nSome cool features like one shot upload deleted after the first download, stream mode where the files are not stored on the server and piped directly from the uploader to the dowloader, basic auth protection,...\n\nGive it a go ;)", "author_fullname": "t2_14e08il", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Plik - OpenSource temporary file upload system ( wetransfer like ) in Go", "link_flair_richtext": [], "subreddit_name_prefixed": "r/golang", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "hide_score": true, "name": "t3_fdv9ku", "quarantine": false, "link_flair_text_color": "dark", "author_flair_background_color": null, "subreddit_type": "public", "ups": 1, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 1, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1583443824.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.golang", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;We are pleased to release a first RC of Plik 1.3&lt;/p&gt;\n\n&lt;p&gt;Plik is an OpenSource temporary file upload system ( wetransfer like )&lt;/p&gt;\n\n&lt;p&gt;It is shipped with a cool UI and CLI.&lt;br/&gt;\nFiles can be stored locally or in S3 or OpenStack Swift.&lt;br/&gt;\nMetadata can be stored locally ( sqlite3 ) or in a postgresql database.&lt;br/&gt;\nIt supports authentication using local users or Goolgle API.  &lt;/p&gt;\n\n&lt;p&gt;Some cool features like one shot upload deleted after the first download, stream mode where the files are not stored on the server and piped directly from the uploader to the dowloader, basic auth protection,...&lt;/p&gt;\n\n&lt;p&gt;Give it a go ;)&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": true, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2rc7j", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "fdv9ku", "is_robot_indexable": true, "report_reasons": null, "author": "rekursiff", "discussion_type": null, "num_comments": 0, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/golang/comments/fdv9ku/plik_opensource_temporary_file_upload_system/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/golang/comments/fdv9ku/plik_opensource_temporary_file_upload_system/", "subreddit_subscribers": 104995, "created_utc": 1583415024.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "golang", "selftext": "Hi, I am building a side project which requires to deploy an agent in customers docker clusters.\n\nThis agent will look for some events and push them to a backend server.\n\nRight now, I have implemented 2 kinds of way to transmit those events:\n\n* based on grpc (stream and non-stream)\n* json/REST\n\nIn the case of a grpc stream, I would need to open the stream at the beginning of the program, keep the stream open and push events to the stream whenever they are coming. Would you see any drawback in keeping that connection open for the entire lifecycle of the process? Is the grpc client smart enough to maintain the connection open *no matter what*?\n\nI can see some cons of using grpc for non-internal communication: mostly it requires that the connection is not intercepted by TLS terminating proxies which is not often the case. It feels like the advantages of using grpc (security, performance) in that case do not counter-balance the drawbacks I might face and I might be digging a rabbit hole.\n\nWhat's your experience with grpc based web-services? would you recommend it in my use case?", "author_fullname": "t2_19p73o8g", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Use or gRPC or json/REST for web services?", "link_flair_richtext": [], "subreddit_name_prefixed": "r/golang", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "hide_score": false, "name": "t3_fdsy9h", "quarantine": false, "link_flair_text_color": "dark", "author_flair_background_color": null, "subreddit_type": "public", "ups": 3, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 3, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1583430205.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.golang", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;Hi, I am building a side project which requires to deploy an agent in customers docker clusters.&lt;/p&gt;\n\n&lt;p&gt;This agent will look for some events and push them to a backend server.&lt;/p&gt;\n\n&lt;p&gt;Right now, I have implemented 2 kinds of way to transmit those events:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;based on grpc (stream and non-stream)&lt;/li&gt;\n&lt;li&gt;json/REST&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;In the case of a grpc stream, I would need to open the stream at the beginning of the program, keep the stream open and push events to the stream whenever they are coming. Would you see any drawback in keeping that connection open for the entire lifecycle of the process? Is the grpc client smart enough to maintain the connection open &lt;em&gt;no matter what&lt;/em&gt;?&lt;/p&gt;\n\n&lt;p&gt;I can see some cons of using grpc for non-internal communication: mostly it requires that the connection is not intercepted by TLS terminating proxies which is not often the case. It feels like the advantages of using grpc (security, performance) in that case do not counter-balance the drawbacks I might face and I might be digging a rabbit hole.&lt;/p&gt;\n\n&lt;p&gt;What&amp;#39;s your experience with grpc based web-services? would you recommend it in my use case?&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": true, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2rc7j", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "fdsy9h", "is_robot_indexable": true, "report_reasons": null, "author": "Zippyddqd", "discussion_type": null, "num_comments": 5, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/golang/comments/fdsy9h/use_or_grpc_or_jsonrest_for_web_services/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/golang/comments/fdsy9h/use_or_grpc_or_jsonrest_for_web_services/", "subreddit_subscribers": 104995, "created_utc": 1583401405.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "golang", "selftext": "I'm trying to build a web application which \n\u2022 Takes input from user\n\u2022 Uses it to run a process which creates files\n\u2022 Serves them to the user\n\n\nRight now this is the flow of the app\n\u2022 Takes some input from a html form\n\u2022 Runs an external process (with os/exec) that uses user input as flags. \n\u2022 External process creates directories with files\n\u2022 Zip the files I need \n\u2022 Serve them to the user\n\nThe way I separate files for each user is that for every request I create a random directory for each.\nI then run the external program and set each user's directory as the output dir.\n\nMy issue is that this external program creates other directories and then puts actual output in the most nested so for every request I have :\nRandomUserDir/X/output/*FilesINeedToZip\n\nWhen I try to zip these files, the .zip I get will have the same structure when unzipped so the end user will see and have to go through all 3 directories before accessing his files which is not really great user experience.\n\nWarning : the following feels like really bad practice\n\nI tried to solve this by running os.Chdir and going into the output directory to zip the files and then zip which works - i don't get all dirs in the zip file - but if the user tries to make another request it won't work because the app will try to chdir in the directory it's already in\n\nI solved this by having the handler chdir back to the original directory where data is stored and things kind of work now but when two users make a request simultaneously one of them will still get an error because of chdir.\n\nThis feels like pretty bad design so do you know what would be a better way to architecture this ?\n And maybe a way of not getting all directories when zipping but juste the files i need?\n\nAny help would be appreciated thank you.", "author_fullname": "t2_1bc7y6oz", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Zip file with nested folders and architecture issue", "link_flair_richtext": [], "subreddit_name_prefixed": "r/golang", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "hide_score": true, "name": "t3_fdv1bb", "quarantine": false, "link_flair_text_color": "dark", "author_flair_background_color": null, "subreddit_type": "public", "ups": 1, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 1, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1583442640.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.golang", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;I&amp;#39;m trying to build a web application which \n\u2022 Takes input from user\n\u2022 Uses it to run a process which creates files\n\u2022 Serves them to the user&lt;/p&gt;\n\n&lt;p&gt;Right now this is the flow of the app\n\u2022 Takes some input from a html form\n\u2022 Runs an external process (with os/exec) that uses user input as flags. \n\u2022 External process creates directories with files\n\u2022 Zip the files I need \n\u2022 Serve them to the user&lt;/p&gt;\n\n&lt;p&gt;The way I separate files for each user is that for every request I create a random directory for each.\nI then run the external program and set each user&amp;#39;s directory as the output dir.&lt;/p&gt;\n\n&lt;p&gt;My issue is that this external program creates other directories and then puts actual output in the most nested so for every request I have :\nRandomUserDir/X/output/*FilesINeedToZip&lt;/p&gt;\n\n&lt;p&gt;When I try to zip these files, the .zip I get will have the same structure when unzipped so the end user will see and have to go through all 3 directories before accessing his files which is not really great user experience.&lt;/p&gt;\n\n&lt;p&gt;Warning : the following feels like really bad practice&lt;/p&gt;\n\n&lt;p&gt;I tried to solve this by running os.Chdir and going into the output directory to zip the files and then zip which works - i don&amp;#39;t get all dirs in the zip file - but if the user tries to make another request it won&amp;#39;t work because the app will try to chdir in the directory it&amp;#39;s already in&lt;/p&gt;\n\n&lt;p&gt;I solved this by having the handler chdir back to the original directory where data is stored and things kind of work now but when two users make a request simultaneously one of them will still get an error because of chdir.&lt;/p&gt;\n\n&lt;p&gt;This feels like pretty bad design so do you know what would be a better way to architecture this ?\n And maybe a way of not getting all directories when zipping but juste the files i need?&lt;/p&gt;\n\n&lt;p&gt;Any help would be appreciated thank you.&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": true, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2rc7j", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "fdv1bb", "is_robot_indexable": true, "report_reasons": null, "author": "blackmambus", "discussion_type": null, "num_comments": 0, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/golang/comments/fdv1bb/zip_file_with_nested_folders_and_architecture/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/golang/comments/fdv1bb/zip_file_with_nested_folders_and_architecture/", "subreddit_subscribers": 104995, "created_utc": 1583413840.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "golang", "selftext": "I need to rant because my frustration with Go and Vscode can no longer be contained.\n\n&amp;#x200B;\n\nI am primarily a Backend NodeJS Developer, but I love go. I have been advocating for years to use Go at my job. I have written some tools in Go that were adopted with success at my work. I have written small personal projects and had a blast doing it.\n\n&amp;#x200B;\n\nHowever, the state of gopls, and the vscode integration is just so terrible that I am no longer comfortable recommending Go to other developers who are primarily web based or from a Javascript background. Vscode intelisense and type inference is better for vanilla js than it is for go, a static language. The language server is constantly broken, and since I have updated Go to v1.14 I can't get the language server to work at all. My symbols are never loaded. No features work.\n\n&amp;#x200B;\n\nI understand that people will tell me to switch to GoLand, but I don't like JetBrain products. Nothing wrong with them but they're not for me, and regardless I am not going to try and convince a team of web developers to change their editors so they can pick up a new language. Just not going to happen.\n\n&amp;#x200B;\n\nI understand people debate go over \"err != nil\" or lack of generics, or issues that are language related. But having the tooling broken with arguably the most popular code editor is just unacceptable. \n\n&amp;#x200B;\n\nCurrently I have no pleasant environment to work with Go. I might as well download notepad++ and run a terminal instance next to it and depend entirely on the compiler messages.\n\n&amp;#x200B;\n\nAs it stands, as much as I love Go, I think until the editor tooling gets better, I have no choice but to abandon my efforts to get other people to use it, because I myself am not enjoying my experience coding in my favourite language. Even my own personal adoption of it is decreasing over time just because of how piss poor the developer experience is now.\n\n&amp;#x200B;\n\nRant over.\n\n&amp;#x200B;\n\nIf anybody has a magic bullet / config to fix vscode and go I would love to hear it.\n\nOtherwise, I'll check back in with the next few months hoping it is resolved, but I somehow doubt they won't just break it again immediately.", "author_fullname": "t2_zr27l", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "VSCode Rant", "link_flair_richtext": [], "subreddit_name_prefixed": "r/golang", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "hide_score": false, "name": "t3_fdggl7", "quarantine": false, "link_flair_text_color": "dark", "author_flair_background_color": null, "subreddit_type": "public", "ups": 30, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 30, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1583371936.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.golang", "allow_live_comments": true, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;I need to rant because my frustration with Go and Vscode can no longer be contained.&lt;/p&gt;\n\n&lt;p&gt;&amp;#x200B;&lt;/p&gt;\n\n&lt;p&gt;I am primarily a Backend NodeJS Developer, but I love go. I have been advocating for years to use Go at my job. I have written some tools in Go that were adopted with success at my work. I have written small personal projects and had a blast doing it.&lt;/p&gt;\n\n&lt;p&gt;&amp;#x200B;&lt;/p&gt;\n\n&lt;p&gt;However, the state of gopls, and the vscode integration is just so terrible that I am no longer comfortable recommending Go to other developers who are primarily web based or from a Javascript background. Vscode intelisense and type inference is better for vanilla js than it is for go, a static language. The language server is constantly broken, and since I have updated Go to v1.14 I can&amp;#39;t get the language server to work at all. My symbols are never loaded. No features work.&lt;/p&gt;\n\n&lt;p&gt;&amp;#x200B;&lt;/p&gt;\n\n&lt;p&gt;I understand that people will tell me to switch to GoLand, but I don&amp;#39;t like JetBrain products. Nothing wrong with them but they&amp;#39;re not for me, and regardless I am not going to try and convince a team of web developers to change their editors so they can pick up a new language. Just not going to happen.&lt;/p&gt;\n\n&lt;p&gt;&amp;#x200B;&lt;/p&gt;\n\n&lt;p&gt;I understand people debate go over &amp;quot;err != nil&amp;quot; or lack of generics, or issues that are language related. But having the tooling broken with arguably the most popular code editor is just unacceptable. &lt;/p&gt;\n\n&lt;p&gt;&amp;#x200B;&lt;/p&gt;\n\n&lt;p&gt;Currently I have no pleasant environment to work with Go. I might as well download notepad++ and run a terminal instance next to it and depend entirely on the compiler messages.&lt;/p&gt;\n\n&lt;p&gt;&amp;#x200B;&lt;/p&gt;\n\n&lt;p&gt;As it stands, as much as I love Go, I think until the editor tooling gets better, I have no choice but to abandon my efforts to get other people to use it, because I myself am not enjoying my experience coding in my favourite language. Even my own personal adoption of it is decreasing over time just because of how piss poor the developer experience is now.&lt;/p&gt;\n\n&lt;p&gt;&amp;#x200B;&lt;/p&gt;\n\n&lt;p&gt;Rant over.&lt;/p&gt;\n\n&lt;p&gt;&amp;#x200B;&lt;/p&gt;\n\n&lt;p&gt;If anybody has a magic bullet / config to fix vscode and go I would love to hear it.&lt;/p&gt;\n\n&lt;p&gt;Otherwise, I&amp;#39;ll check back in with the next few months hoping it is resolved, but I somehow doubt they won&amp;#39;t just break it again immediately.&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2rc7j", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "fdggl7", "is_robot_indexable": true, "report_reasons": null, "author": "davidmdm", "discussion_type": null, "num_comments": 117, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/golang/comments/fdggl7/vscode_rant/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/golang/comments/fdggl7/vscode_rant/", "subreddit_subscribers": 104995, "created_utc": 1583343136.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "golang", "selftext": "I'm new, but I'm not new new, like 8 months new. I google literally anything. Even things that i did them 15-20 times before. Should i start memorizing or this is something normal?", "author_fullname": "t2_57kgon6s", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Is it normal to literally google everything?", "link_flair_richtext": [], "subreddit_name_prefixed": "r/golang", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "hide_score": false, "name": "t3_fdtnit", "quarantine": false, "link_flair_text_color": "dark", "author_flair_background_color": null, "subreddit_type": "public", "ups": 0, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 0, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1583434929.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.golang", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;I&amp;#39;m new, but I&amp;#39;m not new new, like 8 months new. I google literally anything. Even things that i did them 15-20 times before. Should i start memorizing or this is something normal?&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": true, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2rc7j", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "fdtnit", "is_robot_indexable": true, "report_reasons": null, "author": "InfiTualEr", "discussion_type": null, "num_comments": 8, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/golang/comments/fdtnit/is_it_normal_to_literally_google_everything/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/golang/comments/fdtnit/is_it_normal_to_literally_google_everything/", "subreddit_subscribers": 104995, "created_utc": 1583406129.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "golang", "selftext": "", "author_fullname": "t2_7b0r0", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Forward proxy with rate limiting.", "link_flair_richtext": [], "subreddit_name_prefixed": "r/golang", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "hide_score": false, "name": "t3_fdth2t", "quarantine": false, "link_flair_text_color": "dark", "author_flair_background_color": null, "subreddit_type": "public", "ups": 0, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 0, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": false, "mod_note": null, "created": 1583433738.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "github.com", "allow_live_comments": false, "selftext_html": null, "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": true, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2rc7j", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "fdth2t", "is_robot_indexable": true, "report_reasons": null, "author": "moriarty_", "discussion_type": null, "num_comments": 1, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/golang/comments/fdth2t/forward_proxy_with_rate_limiting/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://github.com/jamesmoriarty/goforward", "subreddit_subscribers": 104995, "created_utc": 1583404938.0, "num_crossposts": 0, "media": null, "is_video": false}}], "after": "t3_fdth2t", "before": null}}