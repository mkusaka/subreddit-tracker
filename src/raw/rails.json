{"kind": "Listing", "data": {"modhash": "", "dist": 11, "children": [{"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "In this thread you can showcase your personal pet project to other redditors.\n\nNeed help with a specific problem or just wanna have some extra eyeballs on your code? Ask away!\n\nA suggested format to get you started:\n\n1. **Name of your project**\n2. **A short description**\n3. **Application stack**\n4. **Link to Live app**\n5. **Link to GitHub**\n6. **You experience level**\n7. **Other information or areas that you would like advice on**\n\n\u00a0\n\n^(Many thanks to Kritnc for getting the ball rolling.)", "author_fullname": "t2_6l4z3", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Personal Projects - Show off your own project and/or ask for advice", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "hide_score": false, "name": "t3_ep2dw9", "quarantine": false, "link_flair_text_color": "dark", "author_flair_background_color": null, "subreddit_type": "public", "ups": 14, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 14, "approved_by": null, "author_premium": true, "thumbnail": "", "edited": false, "author_flair_css_class": null, "steward_reports": [], "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1579123979.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;In this thread you can showcase your personal pet project to other redditors.&lt;/p&gt;\n\n&lt;p&gt;Need help with a specific problem or just wanna have some extra eyeballs on your code? Ask away!&lt;/p&gt;\n\n&lt;p&gt;A suggested format to get you started:&lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;&lt;strong&gt;Name of your project&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;A short description&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Application stack&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Link to Live app&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Link to GitHub&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;You experience level&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Other information or areas that you would like advice on&lt;/strong&gt;&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;p&gt;\u00a0&lt;/p&gt;\n\n&lt;p&gt;&lt;sup&gt;Many thanks to Kritnc for getting the ball rolling.&lt;/sup&gt;&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": true, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "visited": false, "removed_by": null, "num_reports": null, "distinguished": "moderator", "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "ep2dw9", "is_robot_indexable": true, "report_reasons": null, "author": "AutoModerator", "discussion_type": null, "num_comments": 3, "send_replies": false, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/ep2dw9/personal_projects_show_off_your_own_project_andor/", "parent_whitelist_status": "all_ads", "stickied": true, "url": "https://www.reddit.com/r/rails/comments/ep2dw9/personal_projects_show_off_your_own_project_andor/", "subreddit_subscribers": 41326, "created_utc": 1579095179.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "We recently upgraded our monolith to Rails 6 and unfortunately there is a clear trend: https://i.imgur.com/6Ca3pT4.png  \n*edit/*  \nx-axis = time (this is like 4 days)  \ny-axis = response time (mean, 90th, 95th)  \n*/edit*\n\nWe did a few things at once (updated several gems to new major versions, finally using cache versioning) but no real change in *our* code. We switched back to non-versioned caching for a while but that doesn't change anything in the timings.\n\nI don't want to exclude the possibility that it's not Rails but any of the gems we are using but before I do some more testing I thought I'd ask if any of you guys have some insights. Did your apps perform better or worse after Rails 5&gt;6 upgrade? Did you encounter anything particular while migrating?\n\nThanks in advance :)", "author_fullname": "t2_cyg5x", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "How y'all doing performance wise with Rails 6 (compared to 5.2)?", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "hide_score": false, "name": "t3_ep8odb", "quarantine": false, "link_flair_text_color": "dark", "author_flair_background_color": null, "subreddit_type": "public", "ups": 27, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 27, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": 1579124887.0, "author_flair_css_class": null, "steward_reports": [], "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1579152135.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": true, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;We recently upgraded our monolith to Rails 6 and unfortunately there is a clear trend: &lt;a href=\"https://i.imgur.com/6Ca3pT4.png\"&gt;https://i.imgur.com/6Ca3pT4.png&lt;/a&gt;&lt;br/&gt;\n&lt;em&gt;edit/&lt;/em&gt;&lt;br/&gt;\nx-axis = time (this is like 4 days)&lt;br/&gt;\ny-axis = response time (mean, 90th, 95th)&lt;br/&gt;\n&lt;em&gt;/edit&lt;/em&gt;&lt;/p&gt;\n\n&lt;p&gt;We did a few things at once (updated several gems to new major versions, finally using cache versioning) but no real change in &lt;em&gt;our&lt;/em&gt; code. We switched back to non-versioned caching for a while but that doesn&amp;#39;t change anything in the timings.&lt;/p&gt;\n\n&lt;p&gt;I don&amp;#39;t want to exclude the possibility that it&amp;#39;s not Rails but any of the gems we are using but before I do some more testing I thought I&amp;#39;d ask if any of you guys have some insights. Did your apps perform better or worse after Rails 5&amp;gt;6 upgrade? Did you encounter anything particular while migrating?&lt;/p&gt;\n\n&lt;p&gt;Thanks in advance :)&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "ep8odb", "is_robot_indexable": true, "report_reasons": null, "author": "2called_chaos", "discussion_type": null, "num_comments": 13, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/ep8odb/how_yall_doing_performance_wise_with_rails_6/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/ep8odb/how_yall_doing_performance_wise_with_rails_6/", "subreddit_subscribers": 41326, "created_utc": 1579123335.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "with rails 6  \nwhen generating a model like this \"be rails g model step step:text page:references\"  \nit adds foreign keys in postgres, and destroy can fail like this:  \n\n\n[destroy can fail](https://preview.redd.it/f55cbmzlv2b41.png?width=1388&amp;format=png&amp;auto=webp&amp;s=9cc4d726bdb7f4e5aea573a7e6e43ed75f71ba40)\n\n  \nwhat is better?  \nlet ruby handle deletions or let postgres handle it via \"on delete cascade\" ?", "author_fullname": "t2_1szauu7h", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "prefer \"dependent: destroy\" in ruby/model or in postgres on delete cascade?", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "hide_score": false, "media_metadata": {"f55cbmzlv2b41": {"status": "valid", "e": "Image", "s": {"y": 131, "x": 1388, "u": "https://preview.redd.it/f55cbmzlv2b41.png?width=1388&amp;format=png&amp;auto=webp&amp;s=9cc4d726bdb7f4e5aea573a7e6e43ed75f71ba40"}, "m": "image/png", "id": "f55cbmzlv2b41"}}, "name": "t3_epf2d6", "quarantine": false, "link_flair_text_color": "dark", "author_flair_background_color": null, "subreddit_type": "public", "ups": 3, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 3, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "steward_reports": [], "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1579182190.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;with rails 6&lt;br/&gt;\nwhen generating a model like this &amp;quot;be rails g model step step:text page:references&amp;quot;&lt;br/&gt;\nit adds foreign keys in postgres, and destroy can fail like this:  &lt;/p&gt;\n\n&lt;p&gt;&lt;a href=\"https://preview.redd.it/f55cbmzlv2b41.png?width=1388&amp;amp;format=png&amp;amp;auto=webp&amp;amp;s=9cc4d726bdb7f4e5aea573a7e6e43ed75f71ba40\"&gt;destroy can fail&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;what is better?&lt;br/&gt;\nlet ruby handle deletions or let postgres handle it via &amp;quot;on delete cascade&amp;quot; ?&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "epf2d6", "is_robot_indexable": true, "report_reasons": null, "author": "oystersauce8", "discussion_type": null, "num_comments": 5, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/epf2d6/prefer_dependent_destroy_in_rubymodel_or_in/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/epf2d6/prefer_dependent_destroy_in_rubymodel_or_in/", "subreddit_subscribers": 41326, "created_utc": 1579153390.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "Any tips?", "author_fullname": "t2_ku4i0", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Had anyone here packaged a rails app for on prem licensing and installation?", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "hide_score": false, "name": "t3_ephv2t", "quarantine": false, "link_flair_text_color": "dark", "author_flair_background_color": null, "subreddit_type": "public", "ups": 1, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 1, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "steward_reports": [], "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1579201255.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;Any tips?&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": true, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "ephv2t", "is_robot_indexable": true, "report_reasons": null, "author": "rorykoehler", "discussion_type": null, "num_comments": 0, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/ephv2t/had_anyone_here_packaged_a_rails_app_for_on_prem/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/ephv2t/had_anyone_here_packaged_a_rails_app_for_on_prem/", "subreddit_subscribers": 41326, "created_utc": 1579172455.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "In my application a user can have a group with many alerts. When an alert is created it has an `t.boolean \"read\", default: false` attribute, which I want to set to `true` once the users has seen it.  \n\n\nI have the following:\n\n**groups\\_controller.rb**\n\n    class GroupsController &lt; ApplicationController\n      def index\n        @groups = current_user.groups.includes(:alerts, :new_alerts)\n      end\n    end\n\n**index.html.erb**\n\n    &lt;% @groups.each do |group| %&gt;\n      &lt;% group.alerts.limit(5).each do |alert| %&gt;\n         &lt;% if alert.unread? %&gt;\n            &lt;span class=\"badge pending-status\"&gt;New&lt;/span&gt;\n         &lt;% end %&gt;\n         ...\n      &lt;% end %&gt;\n    &lt;% end %&gt;\n\nAnd in the **show.html.erb** on a group I show all the alerts.  \n\n\nI want to know if it's possible to mark those 5 in **index.html.erb** as read once they have been loaded into the view? So if I have 5 alerts and 3 are unread, I want the 3 to be shown as **New**, but once the page is refresh or **show.html.erb** is loaded, they will be shown an read.\n\nAny suggestions?\n\n&amp;#x200B;\n\nI have been fiddling with an idea of having the read attribute as an integer instead, with a default of 0 and first time they are loaded `alert.update(read: 1)` and then alerts with `read &gt; 2` would be the unread ones. What do you think about that?", "author_fullname": "t2_4gnytiep", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "How to update attribute on notifications after load?", "link_flair_richtext": [{"e": "text", "t": "Question"}], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": "question", "downs": 0, "hide_score": false, "name": "t3_ep9f5y", "quarantine": false, "link_flair_text_color": "dark", "author_flair_background_color": null, "subreddit_type": "public", "ups": 3, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": "Question", "can_mod_post": false, "score": 3, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "steward_reports": [], "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1579155236.0, "link_flair_type": "richtext", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;In my application a user can have a group with many alerts. When an alert is created it has an &lt;code&gt;t.boolean &amp;quot;read&amp;quot;, default: false&lt;/code&gt; attribute, which I want to set to &lt;code&gt;true&lt;/code&gt; once the users has seen it.  &lt;/p&gt;\n\n&lt;p&gt;I have the following:&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;groups_controller.rb&lt;/strong&gt;&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;class GroupsController &amp;lt; ApplicationController\n  def index\n    @groups = current_user.groups.includes(:alerts, :new_alerts)\n  end\nend\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;strong&gt;index.html.erb&lt;/strong&gt;&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;&amp;lt;% @groups.each do |group| %&amp;gt;\n  &amp;lt;% group.alerts.limit(5).each do |alert| %&amp;gt;\n     &amp;lt;% if alert.unread? %&amp;gt;\n        &amp;lt;span class=&amp;quot;badge pending-status&amp;quot;&amp;gt;New&amp;lt;/span&amp;gt;\n     &amp;lt;% end %&amp;gt;\n     ...\n  &amp;lt;% end %&amp;gt;\n&amp;lt;% end %&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;And in the &lt;strong&gt;show.html.erb&lt;/strong&gt; on a group I show all the alerts.  &lt;/p&gt;\n\n&lt;p&gt;I want to know if it&amp;#39;s possible to mark those 5 in &lt;strong&gt;index.html.erb&lt;/strong&gt; as read once they have been loaded into the view? So if I have 5 alerts and 3 are unread, I want the 3 to be shown as &lt;strong&gt;New&lt;/strong&gt;, but once the page is refresh or &lt;strong&gt;show.html.erb&lt;/strong&gt; is loaded, they will be shown an read.&lt;/p&gt;\n\n&lt;p&gt;Any suggestions?&lt;/p&gt;\n\n&lt;p&gt;&amp;#x200B;&lt;/p&gt;\n\n&lt;p&gt;I have been fiddling with an idea of having the read attribute as an integer instead, with a default of 0 and first time they are loaded &lt;code&gt;alert.update(read: 1)&lt;/code&gt; and then alerts with &lt;code&gt;read &amp;gt; 2&lt;/code&gt; would be the unread ones. What do you think about that?&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": true, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "link_flair_template_id": "fdfc6806-aea7-11e4-bf37-22000b3889f5", "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "ep9f5y", "is_robot_indexable": true, "report_reasons": null, "author": "created_to_answer", "discussion_type": null, "num_comments": 2, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/ep9f5y/how_to_update_attribute_on_notifications_after/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/ep9f5y/how_to_update_attribute_on_notifications_after/", "subreddit_subscribers": 41326, "created_utc": 1579126436.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "I am currently working on an app that requires a user to send out questions to other users at an interval either from when created and/or when answered. For example, one question is set to recur on the first of every month. Another is set to recur 30 days after the user has answered it. I started using the ice\\_cube gem but am thinking there might be a better option out there. Does anyone know a good gem to handle this?", "author_fullname": "t2_16k604", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Best Gems for Recurring Jobs", "link_flair_richtext": [{"e": "text", "t": "Question"}], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": "question", "downs": 0, "hide_score": false, "name": "t3_ep6hey", "quarantine": false, "link_flair_text_color": "dark", "author_flair_background_color": null, "subreddit_type": "public", "ups": 5, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": "Question", "can_mod_post": false, "score": 5, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "steward_reports": [], "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1579143079.0, "link_flair_type": "richtext", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;I am currently working on an app that requires a user to send out questions to other users at an interval either from when created and/or when answered. For example, one question is set to recur on the first of every month. Another is set to recur 30 days after the user has answered it. I started using the ice_cube gem but am thinking there might be a better option out there. Does anyone know a good gem to handle this?&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": true, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "link_flair_template_id": "fdfc6806-aea7-11e4-bf37-22000b3889f5", "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "ep6hey", "is_robot_indexable": true, "report_reasons": null, "author": "lhosb", "discussion_type": null, "num_comments": 8, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/ep6hey/best_gems_for_recurring_jobs/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/ep6hey/best_gems_for_recurring_jobs/", "subreddit_subscribers": 41326, "created_utc": 1579114279.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "So I have a an app where users can be in relationships with each other (purely platonic, of course).  There's a couple of included associations on each relationship, such as the inverse relationship, and I want to filter out relationships where the other user isn't active:\n\nMy first solution, to query against the included table, is incredibly slow\n```\nuser.relationships.includes(\n                :related_user,\n                :other_table,\n                inverse_relationship: [:other_table],\n              )\n                .where(users: { active: true })\n            )\n```\n\nin the server logs I can see a massive query like this: \n```\nSELECT \"relationships\".\"id\" AS t0_r0, \"relationships\".\"relating_user_id\" AS t0_r1, \"relationships\".\"related_user_id\" AS t0_r2, \"relationships\".\"inverse_relationship_id\" AS t0_r3, \"relationships\".\"created_at\" AS t0_r4, \"relationships\".\"updated_at\" AS t0_r5, \"users\".\"id\" AS t1_r0, \"users\".\"first_name\" AS t1_r1, \"users\".\"last_name\" AS t1_r2, \"users\".\"email\" AS t1_r3, \"users\".\"password_digest\" AS t1_r4, \"users\".\"avatar\" AS t1_r5, \"users\".\"admin\" AS t1_r6, \"users\".\"manager\" AS t1_r7, \"users\".\"title\" AS t1_r8, \"users\".\"created_at\" AS t1_r9, \"users\".\"updated_at\" AS t1_r10,\n```\n\nThe second query is this: \n```\nuser.relationships.includes(\n                :related_user,\n                :other_table,\n                inverse_relationship: [:other_table],\n              )\n                .reject { |r| !r.related_user.active? }\n            )\n```\n\nThis query is blazing fast\n\nI'm curious what rails is doing under the hood here, as commonly you would keep this kind of filtering in the query,", "author_fullname": "t2_3sibg", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Why is querying against an includes so slow in this query?", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "hide_score": false, "name": "t3_ep5eoj", "quarantine": false, "link_flair_text_color": "dark", "author_flair_background_color": null, "subreddit_type": "public", "ups": 2, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 2, "approved_by": null, "author_premium": true, "thumbnail": "", "edited": false, "author_flair_css_class": null, "steward_reports": [], "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1579138611.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;So I have a an app where users can be in relationships with each other (purely platonic, of course).  There&amp;#39;s a couple of included associations on each relationship, such as the inverse relationship, and I want to filter out relationships where the other user isn&amp;#39;t active:&lt;/p&gt;\n\n&lt;p&gt;My first solution, to query against the included table, is incredibly slow\n&lt;code&gt;\nuser.relationships.includes(\n                :related_user,\n                :other_table,\n                inverse_relationship: [:other_table],\n              )\n                .where(users: { active: true })\n            )\n&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;in the server logs I can see a massive query like this: \n&lt;code&gt;\nSELECT &amp;quot;relationships&amp;quot;.&amp;quot;id&amp;quot; AS t0_r0, &amp;quot;relationships&amp;quot;.&amp;quot;relating_user_id&amp;quot; AS t0_r1, &amp;quot;relationships&amp;quot;.&amp;quot;related_user_id&amp;quot; AS t0_r2, &amp;quot;relationships&amp;quot;.&amp;quot;inverse_relationship_id&amp;quot; AS t0_r3, &amp;quot;relationships&amp;quot;.&amp;quot;created_at&amp;quot; AS t0_r4, &amp;quot;relationships&amp;quot;.&amp;quot;updated_at&amp;quot; AS t0_r5, &amp;quot;users&amp;quot;.&amp;quot;id&amp;quot; AS t1_r0, &amp;quot;users&amp;quot;.&amp;quot;first_name&amp;quot; AS t1_r1, &amp;quot;users&amp;quot;.&amp;quot;last_name&amp;quot; AS t1_r2, &amp;quot;users&amp;quot;.&amp;quot;email&amp;quot; AS t1_r3, &amp;quot;users&amp;quot;.&amp;quot;password_digest&amp;quot; AS t1_r4, &amp;quot;users&amp;quot;.&amp;quot;avatar&amp;quot; AS t1_r5, &amp;quot;users&amp;quot;.&amp;quot;admin&amp;quot; AS t1_r6, &amp;quot;users&amp;quot;.&amp;quot;manager&amp;quot; AS t1_r7, &amp;quot;users&amp;quot;.&amp;quot;title&amp;quot; AS t1_r8, &amp;quot;users&amp;quot;.&amp;quot;created_at&amp;quot; AS t1_r9, &amp;quot;users&amp;quot;.&amp;quot;updated_at&amp;quot; AS t1_r10,\n&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;The second query is this: \n&lt;code&gt;\nuser.relationships.includes(\n                :related_user,\n                :other_table,\n                inverse_relationship: [:other_table],\n              )\n                .reject { |r| !r.related_user.active? }\n            )\n&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;This query is blazing fast&lt;/p&gt;\n\n&lt;p&gt;I&amp;#39;m curious what rails is doing under the hood here, as commonly you would keep this kind of filtering in the query,&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "ep5eoj", "is_robot_indexable": true, "report_reasons": null, "author": "bakedleaf", "discussion_type": null, "num_comments": 1, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/ep5eoj/why_is_querying_against_an_includes_so_slow_in/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/ep5eoj/why_is_querying_against_an_includes_so_slow_in/", "subreddit_subscribers": 41326, "created_utc": 1579109811.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "Hi everyone! As the title says I'm having trouble with a custom method when I deploy to production.\n\nWhat I'm trying to do is to dynamically populate as much info as possible when a user is registering their address. Basically, the city field is disabled and when a user inputs their postal code the app looks it up and returns the potal code's city_id so it can then call cities/id and get the city's name to display it. \n\nHere's some code:\n\n**controllers/postal_codes_controller.rb**\n\n    # Get postal_code data by postal_code.number\n    def get_postal_code_by_number\n      @postal_code = PostalCode.find_by_number(params[:number])\n      render json: @postal_code.to_json, status: :ok, location: @postal_code\n    end\n\n**config/routes.rb**\n\n      get 'get_postal_code_by_number/:number', :to =&gt; 'postal_codes#get_postal_code_by_number'\n\n\nThis works 100% fine locally but when I try it in heroku it responds with a 301 code and redirects to home ('/').\n\n\n**Example**\n\nWhen I enter the url *app-name.herokuapp.com/get_postal_code_by_number/91000* this is what I get:\n\n[Chrome: Inspect element &gt; Network](https://imgur.com/cawFzbg)\t\n\n\nPlease note that the postal codes that will be used in the app are just numbers and are not continuous, so I can't do id=number.\n\nAny ideas?\n\nCheers!\n\n------\n\n\n**[UPDATE: SOLVED!]**\n\nTurns out it didn't have to do with the method or the ajax but rather it was a routing problem. I'm still not sure why it wasn't working on production but I was able to get it to work by adding the method as a collection resource in routes.rb:\n\n**config/routes.rb**\n\n    resources :postal_codes do\n      collection do\n        get 'number/:number', :action =&gt; 'get_by_number'\n      end\n    end\n\nThis makes it possible to have a url like:\n\n&gt;herokuapp.com/postal_codes/number/91000\n\nAs you can see, I also changed the method name and route so that they make a bit more sense now that the url is structured in such a way. If the original names were kept, the url would have looked like:\n\n&gt;herokuapp.com/postal_codes/get_postal_code_by_number/91000\n\nwhich is not as good looking.\n\nThe only issue I'm now facing with this solution is that it's not generating a path, if I were to do something like:\n\n**config/routes.rb**\n\n    ... \n    get 'number/:number', :action =&gt; 'get_by_number', :as =&gt; by_number\n    ...\n\nThe path would be *by_number_postal_codes_path* and not *postal_codes_by_number_path* as I would've liked. But nevertheless, it works in both development and production so it's all good now.\n\nHopefully this will help someone if they hit the same problem.\n\nCheers! :D", "author_fullname": "t2_4e7s5", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "[Help] Custom method works in development (local) but returns 301 in production (Heroku).", "link_flair_richtext": [{"e": "text", "t": "Help"}], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": "help", "downs": 0, "hide_score": false, "name": "t3_ep5iar", "quarantine": false, "link_flair_text_color": "dark", "author_flair_background_color": null, "subreddit_type": "public", "ups": 3, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": "Help", "can_mod_post": false, "score": 3, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": 1579144583.0, "author_flair_css_class": null, "steward_reports": [], "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1579139045.0, "link_flair_type": "richtext", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;Hi everyone! As the title says I&amp;#39;m having trouble with a custom method when I deploy to production.&lt;/p&gt;\n\n&lt;p&gt;What I&amp;#39;m trying to do is to dynamically populate as much info as possible when a user is registering their address. Basically, the city field is disabled and when a user inputs their postal code the app looks it up and returns the potal code&amp;#39;s city_id so it can then call cities/id and get the city&amp;#39;s name to display it. &lt;/p&gt;\n\n&lt;p&gt;Here&amp;#39;s some code:&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;controllers/postal_codes_controller.rb&lt;/strong&gt;&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;# Get postal_code data by postal_code.number\ndef get_postal_code_by_number\n  @postal_code = PostalCode.find_by_number(params[:number])\n  render json: @postal_code.to_json, status: :ok, location: @postal_code\nend\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;strong&gt;config/routes.rb&lt;/strong&gt;&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;  get &amp;#39;get_postal_code_by_number/:number&amp;#39;, :to =&amp;gt; &amp;#39;postal_codes#get_postal_code_by_number&amp;#39;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;This works 100% fine locally but when I try it in heroku it responds with a 301 code and redirects to home (&amp;#39;/&amp;#39;).&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;Example&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;When I enter the url &lt;em&gt;app-name.herokuapp.com/get_postal_code_by_number/91000&lt;/em&gt; this is what I get:&lt;/p&gt;\n\n&lt;p&gt;&lt;a href=\"https://imgur.com/cawFzbg\"&gt;Chrome: Inspect element &amp;gt; Network&lt;/a&gt;  &lt;/p&gt;\n\n&lt;p&gt;Please note that the postal codes that will be used in the app are just numbers and are not continuous, so I can&amp;#39;t do id=number.&lt;/p&gt;\n\n&lt;p&gt;Any ideas?&lt;/p&gt;\n\n&lt;p&gt;Cheers!&lt;/p&gt;\n\n&lt;hr/&gt;\n\n&lt;p&gt;&lt;strong&gt;[UPDATE: SOLVED!]&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;Turns out it didn&amp;#39;t have to do with the method or the ajax but rather it was a routing problem. I&amp;#39;m still not sure why it wasn&amp;#39;t working on production but I was able to get it to work by adding the method as a collection resource in routes.rb:&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;config/routes.rb&lt;/strong&gt;&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;resources :postal_codes do\n  collection do\n    get &amp;#39;number/:number&amp;#39;, :action =&amp;gt; &amp;#39;get_by_number&amp;#39;\n  end\nend\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;This makes it possible to have a url like:&lt;/p&gt;\n\n&lt;blockquote&gt;\n&lt;p&gt;herokuapp.com/postal_codes/number/91000&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;As you can see, I also changed the method name and route so that they make a bit more sense now that the url is structured in such a way. If the original names were kept, the url would have looked like:&lt;/p&gt;\n\n&lt;blockquote&gt;\n&lt;p&gt;herokuapp.com/postal_codes/get_postal_code_by_number/91000&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;which is not as good looking.&lt;/p&gt;\n\n&lt;p&gt;The only issue I&amp;#39;m now facing with this solution is that it&amp;#39;s not generating a path, if I were to do something like:&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;config/routes.rb&lt;/strong&gt;&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;... \nget &amp;#39;number/:number&amp;#39;, :action =&amp;gt; &amp;#39;get_by_number&amp;#39;, :as =&amp;gt; by_number\n...\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;The path would be &lt;em&gt;by_number_postal_codes_path&lt;/em&gt; and not &lt;em&gt;postal_codes_by_number_path&lt;/em&gt; as I would&amp;#39;ve liked. But nevertheless, it works in both development and production so it&amp;#39;s all good now.&lt;/p&gt;\n\n&lt;p&gt;Hopefully this will help someone if they hit the same problem.&lt;/p&gt;\n\n&lt;p&gt;Cheers! :D&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": true, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "ep5iar", "is_robot_indexable": true, "report_reasons": null, "author": "UpwardBinkie", "discussion_type": null, "num_comments": 2, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/ep5iar/help_custom_method_works_in_development_local_but/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/ep5iar/help_custom_method_works_in_development_local_but/", "subreddit_subscribers": 41326, "created_utc": 1579110245.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "For a class like this, ActiveRecord::Errors, to\\_h and to\\_hash gives two different outputs although they are alias of each other.\n\n&gt;class Person  \n&gt;  \n&gt;\\# Required dependency for ActiveModel::Errors  \n&gt;  \n&gt;extend ActiveModel::Naming  \n&gt;  \n&gt;  \n&gt;  \n&gt;def initialize  \n&gt;  \n&gt;u/errors = ActiveModel::Errors.new(self) # wanted to type \"@errors\"  \n&gt;  \n&gt;end  \n&gt;  \n&gt;  \n&gt;  \n&gt;attr\\_accessor :name, :phone, :age  \n&gt;  \n&gt;attr\\_reader   :errors  \n&gt;  \n&gt;  \n&gt;  \n&gt;def validate!  \n&gt;  \n&gt;errors.add(:name, :blank, message: \"Name cannot be nil\") if name.nil?  \n&gt;  \n&gt;errors.add(:name, :blank, message: \"Name is mandatory\") if name.nil?  \n&gt;  \n&gt;errors.add(:phone, :blank, message: \"Phone cannot be nil\") if phone.nil?  \n&gt;  \n&gt;end  \n&gt;  \n&gt;\\# The following methods are needed to be minimally implemented  \n&gt;  \n&gt;  \n&gt;  \n&gt;def read\\_attribute\\_for\\_validation(attr)  \n&gt;  \n&gt;send(attr)  \n&gt;  \n&gt;end  \n&gt;  \n&gt;  \n&gt;  \n&gt;def self.human\\_attribute\\_name(attr, options = {})  \n&gt;  \n&gt;attr  \n&gt;  \n&gt;end  \n&gt;  \n&gt;  \n&gt;  \n&gt;def self.lookup\\_ancestors  \n&gt;  \n&gt;\\[self\\]  \n&gt;  \n&gt;end  \n&gt;  \n&gt;end  \n&gt;  \n&gt;  \n&gt;  \n&gt;person = [Person.new](https://Person.new)()  \n&gt;  \n&gt;person.validate!  \n&gt;  \n&gt;person.errors.message =&gt; {:name=&gt;\\[\"can't be blank\", \"can't be blank\"\\], :phone=&gt;\\[\"can't be blank\"\\]}  \n&gt;  \n&gt;person.to\\_hash =&gt; {:name=&gt;\\[\"can't be blank\", \"can't be blank\"\\], :phone=&gt;\\[\"can't be blank\"\\]}  \n&gt;  \n&gt;person.to\\_h =&gt; {:name=&gt;\"can't be blank\", :phone=&gt;\"can't be blank\"}\n\n&amp;#x200B;\n\nWhy is this difference between to\\_h and to\\_hash for this particular class?  \n\n\nto\\_hash has documentation in here [https://apidock.com/rails/v5.2.3/ActiveModel/Errors/to\\_hash](https://apidock.com/rails/v5.2.3/ActiveModel/Errors/to_hash)", "author_fullname": "t2_pgq24c7", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Difference between to_h and to_hash for ActiveRecord::Errors class in rails", "link_flair_richtext": [{"e": "text", "t": "Question"}], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": "question", "downs": 0, "hide_score": false, "name": "t3_ep6dtr", "quarantine": false, "link_flair_text_color": "dark", "author_flair_background_color": null, "subreddit_type": "public", "ups": 2, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": "Question", "can_mod_post": false, "score": 2, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "steward_reports": [], "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1579142664.0, "link_flair_type": "richtext", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;For a class like this, ActiveRecord::Errors, to_h and to_hash gives two different outputs although they are alias of each other.&lt;/p&gt;\n\n&lt;blockquote&gt;\n&lt;p&gt;class Person  &lt;/p&gt;\n\n&lt;p&gt;# Required dependency for ActiveModel::Errors  &lt;/p&gt;\n\n&lt;p&gt;extend ActiveModel::Naming  &lt;/p&gt;\n\n&lt;p&gt;def initialize  &lt;/p&gt;\n\n&lt;p&gt;&lt;a href=\"/u/errors\"&gt;u/errors&lt;/a&gt; = ActiveModel::Errors.new(self) # wanted to type &amp;quot;@errors&amp;quot;  &lt;/p&gt;\n\n&lt;p&gt;end  &lt;/p&gt;\n\n&lt;p&gt;attr_accessor :name, :phone, :age  &lt;/p&gt;\n\n&lt;p&gt;attr_reader   :errors  &lt;/p&gt;\n\n&lt;p&gt;def validate!  &lt;/p&gt;\n\n&lt;p&gt;errors.add(:name, :blank, message: &amp;quot;Name cannot be nil&amp;quot;) if name.nil?  &lt;/p&gt;\n\n&lt;p&gt;errors.add(:name, :blank, message: &amp;quot;Name is mandatory&amp;quot;) if name.nil?  &lt;/p&gt;\n\n&lt;p&gt;errors.add(:phone, :blank, message: &amp;quot;Phone cannot be nil&amp;quot;) if phone.nil?  &lt;/p&gt;\n\n&lt;p&gt;end  &lt;/p&gt;\n\n&lt;p&gt;# The following methods are needed to be minimally implemented  &lt;/p&gt;\n\n&lt;p&gt;def read_attribute_for_validation(attr)  &lt;/p&gt;\n\n&lt;p&gt;send(attr)  &lt;/p&gt;\n\n&lt;p&gt;end  &lt;/p&gt;\n\n&lt;p&gt;def self.human_attribute_name(attr, options = {})  &lt;/p&gt;\n\n&lt;p&gt;attr  &lt;/p&gt;\n\n&lt;p&gt;end  &lt;/p&gt;\n\n&lt;p&gt;def self.lookup_ancestors  &lt;/p&gt;\n\n&lt;p&gt;[self]  &lt;/p&gt;\n\n&lt;p&gt;end  &lt;/p&gt;\n\n&lt;p&gt;end  &lt;/p&gt;\n\n&lt;p&gt;person = &lt;a href=\"https://Person.new\"&gt;Person.new&lt;/a&gt;()  &lt;/p&gt;\n\n&lt;p&gt;person.validate!  &lt;/p&gt;\n\n&lt;p&gt;person.errors.message =&amp;gt; {:name=&amp;gt;[&amp;quot;can&amp;#39;t be blank&amp;quot;, &amp;quot;can&amp;#39;t be blank&amp;quot;], :phone=&amp;gt;[&amp;quot;can&amp;#39;t be blank&amp;quot;]}  &lt;/p&gt;\n\n&lt;p&gt;person.to_hash =&amp;gt; {:name=&amp;gt;[&amp;quot;can&amp;#39;t be blank&amp;quot;, &amp;quot;can&amp;#39;t be blank&amp;quot;], :phone=&amp;gt;[&amp;quot;can&amp;#39;t be blank&amp;quot;]}  &lt;/p&gt;\n\n&lt;p&gt;person.to_h =&amp;gt; {:name=&amp;gt;&amp;quot;can&amp;#39;t be blank&amp;quot;, :phone=&amp;gt;&amp;quot;can&amp;#39;t be blank&amp;quot;}&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;&amp;#x200B;&lt;/p&gt;\n\n&lt;p&gt;Why is this difference between to_h and to_hash for this particular class?  &lt;/p&gt;\n\n&lt;p&gt;to_hash has documentation in here &lt;a href=\"https://apidock.com/rails/v5.2.3/ActiveModel/Errors/to_hash\"&gt;https://apidock.com/rails/v5.2.3/ActiveModel/Errors/to_hash&lt;/a&gt;&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "link_flair_template_id": "fdfc6806-aea7-11e4-bf37-22000b3889f5", "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "ep6dtr", "is_robot_indexable": true, "report_reasons": null, "author": "bennyman32", "discussion_type": null, "num_comments": 2, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/ep6dtr/difference_between_to_h_and_to_hash_for/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/ep6dtr/difference_between_to_h_and_to_hash_for/", "subreddit_subscribers": 41326, "created_utc": 1579113864.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "was speaking to someone who said things can get quite bloated as a Rails app gets larger and larger, in their view, so just wondering.", "author_fullname": "t2_tg15v2g", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Read that the next Ruby release would update Ruby to be 3xs faster. Will that also improve/affect Rails performance?", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "hide_score": false, "name": "t3_ep5lzs", "quarantine": false, "link_flair_text_color": "dark", "author_flair_background_color": null, "subreddit_type": "public", "ups": 2, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 2, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "steward_reports": [], "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1579139476.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;was speaking to someone who said things can get quite bloated as a Rails app gets larger and larger, in their view, so just wondering.&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "ep5lzs", "is_robot_indexable": true, "report_reasons": null, "author": "babbagack", "discussion_type": null, "num_comments": 8, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/ep5lzs/read_that_the_next_ruby_release_would_update_ruby/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/ep5lzs/read_that_the_next_ruby_release_would_update_ruby/", "subreddit_subscribers": 41326, "created_utc": 1579110676.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "I'm writing an update API where when the user sends the updated parameter the already existing records for that association must be deleted and the ones in the API must be updated.   \nIf I have a relationship like Book has many Authors and if a particular book has a few authors and I'm trying to update the book by setting the new authors. The already existing authors for this book must be deleted and the new one updated. \n\nThe association is defined as below\n\n    has_many :authors, class_name: 'Authors', dependent: :destroy, autosave: true, after_add: :compute_something,\nafter_remove: :compute_some_other_thing\n\nIn my update method, I have something like this \n\n    book.authors.delete_all\n    book.update_attributes(params[:book])\n\nI'm creating new authors even if they exist after removing them by using the accepts\\_nested\\_attributes\\_for property in rails.   \n\n\nMy question is do you see any pitfalls or bottlenecks with this approach in terms of the after\\_add and after\\_remove method execution or something else too.   \nThe authors aren't huge always it's mostly around 5 on average and around 25 at max.", "author_fullname": "t2_pgq24c7", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "The best approach for deleting existing association while updating", "link_flair_richtext": [{"e": "text", "t": "Question"}], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": "question", "downs": 0, "hide_score": false, "name": "t3_ep12dg", "quarantine": false, "link_flair_text_color": "dark", "author_flair_background_color": null, "subreddit_type": "public", "ups": 6, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": "Question", "can_mod_post": false, "score": 6, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "steward_reports": [], "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1579116014.0, "link_flair_type": "richtext", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;I&amp;#39;m writing an update API where when the user sends the updated parameter the already existing records for that association must be deleted and the ones in the API must be updated.&lt;br/&gt;\nIf I have a relationship like Book has many Authors and if a particular book has a few authors and I&amp;#39;m trying to update the book by setting the new authors. The already existing authors for this book must be deleted and the new one updated. &lt;/p&gt;\n\n&lt;p&gt;The association is defined as below&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;has_many :authors, class_name: &amp;#39;Authors&amp;#39;, dependent: :destroy, autosave: true, after_add: :compute_something,\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;after_remove: :compute_some_other_thing&lt;/p&gt;\n\n&lt;p&gt;In my update method, I have something like this &lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;book.authors.delete_all\nbook.update_attributes(params[:book])\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;I&amp;#39;m creating new authors even if they exist after removing them by using the accepts_nested_attributes_for property in rails.   &lt;/p&gt;\n\n&lt;p&gt;My question is do you see any pitfalls or bottlenecks with this approach in terms of the after_add and after_remove method execution or something else too.&lt;br/&gt;\nThe authors aren&amp;#39;t huge always it&amp;#39;s mostly around 5 on average and around 25 at max.&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "link_flair_template_id": "fdfc6806-aea7-11e4-bf37-22000b3889f5", "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "ep12dg", "is_robot_indexable": true, "report_reasons": null, "author": "bennyman32", "discussion_type": null, "num_comments": 4, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/ep12dg/the_best_approach_for_deleting_existing/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/ep12dg/the_best_approach_for_deleting_existing/", "subreddit_subscribers": 41326, "created_utc": 1579087214.0, "num_crossposts": 0, "media": null, "is_video": false}}], "after": "t3_ep12dg", "before": null}}