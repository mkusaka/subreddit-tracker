{"kind": "Listing", "data": {"modhash": "", "dist": 12, "children": [{"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rust", "selftext": "Mystified about strings? Borrow checker have you in a headlock? Seek help here! There are no stupid questions, only docs that haven't been written yet.\n\nIf you have a [StackOverflow](http://stackoverflow.com/) account, consider asking it there instead! StackOverflow shows up much higher in search results, so having your question there also helps future Rust users (be sure to give it [the \"Rust\" tag](http://stackoverflow.com/questions/tagged/rust) for maximum visibility). Note that this site is very interested in question quality. I've been asked to read a RFC I authored once. If you want your code reviewed or review other's code, there's a [codereview stackexchange](https://codereview.stackexchange.com/questions/tagged/rust), too. If you need to test your code, maybe [the Rust playground](https://play.rust-lang.org) is for you.\n\nHere are some other venues where help may be found:\n\n[/r/learnrust](https://www.reddit.com/r/learnrust) is a subreddit to share your questions and epiphanies learning Rust programming.\n\nThe official Rust user forums: [https://users.rust-lang.org/](https://users.rust-lang.org/).\n\nThe official Rust Programming Language Discord: [https://discord.gg/rust-lang](https://discord.gg/rust-lang)\n\nThe unofficial Rust community Discord: [https://bit.ly/rust-community](https://bit.ly/rust-community)\n\nAlso check out [last weeks' thread](https://reddit.com/r/rust/comments/ifiec2/hey_rustaceans_got_an_easy_question_ask_here/) with many good questions and answers. And if you believe your question to be either very complex or worthy of larger dissemination, feel free to create a text post.\n\nAlso if you want to be mentored by experienced Rustaceans, tell us the area of expertise that you seek.", "author_fullname": "t2_1kxp4", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Hey Rustaceans! Got an easy question? Ask here (36/2020)!", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rust", "hidden": false, "pwls": 6, "link_flair_css_class": "easyquestions", "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_ijvwsk", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 0.86, "author_flair_background_color": "", "subreddit_type": "public", "ups": 14, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": "\ud83d\ude4b", "can_mod_post": false, "score": 14, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": "contrib", "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1598900502.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rust", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;Mystified about strings? Borrow checker have you in a headlock? Seek help here! There are no stupid questions, only docs that haven&amp;#39;t been written yet.&lt;/p&gt;\n\n&lt;p&gt;If you have a &lt;a href=\"http://stackoverflow.com/\"&gt;StackOverflow&lt;/a&gt; account, consider asking it there instead! StackOverflow shows up much higher in search results, so having your question there also helps future Rust users (be sure to give it &lt;a href=\"http://stackoverflow.com/questions/tagged/rust\"&gt;the &amp;quot;Rust&amp;quot; tag&lt;/a&gt; for maximum visibility). Note that this site is very interested in question quality. I&amp;#39;ve been asked to read a RFC I authored once. If you want your code reviewed or review other&amp;#39;s code, there&amp;#39;s a &lt;a href=\"https://codereview.stackexchange.com/questions/tagged/rust\"&gt;codereview stackexchange&lt;/a&gt;, too. If you need to test your code, maybe &lt;a href=\"https://play.rust-lang.org\"&gt;the Rust playground&lt;/a&gt; is for you.&lt;/p&gt;\n\n&lt;p&gt;Here are some other venues where help may be found:&lt;/p&gt;\n\n&lt;p&gt;&lt;a href=\"https://www.reddit.com/r/learnrust\"&gt;/r/learnrust&lt;/a&gt; is a subreddit to share your questions and epiphanies learning Rust programming.&lt;/p&gt;\n\n&lt;p&gt;The official Rust user forums: &lt;a href=\"https://users.rust-lang.org/\"&gt;https://users.rust-lang.org/&lt;/a&gt;.&lt;/p&gt;\n\n&lt;p&gt;The official Rust Programming Language Discord: &lt;a href=\"https://discord.gg/rust-lang\"&gt;https://discord.gg/rust-lang&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;The unofficial Rust community Discord: &lt;a href=\"https://bit.ly/rust-community\"&gt;https://bit.ly/rust-community&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;Also check out &lt;a href=\"https://reddit.com/r/rust/comments/ifiec2/hey_rustaceans_got_an_easy_question_ask_here/\"&gt;last weeks&amp;#39; thread&lt;/a&gt; with many good questions and answers. And if you believe your question to be either very complex or worthy of larger dissemination, feel free to create a text post.&lt;/p&gt;\n\n&lt;p&gt;Also if you want to be mentored by experienced Rustaceans, tell us the area of expertise that you seek.&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": "new", "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "link_flair_template_id": "e86091d6-dfe6-11ea-a6d0-0eaf4ae01c99", "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": "clippy \u00b7 twir \u00b7 rust \u00b7 mutagen \u00b7 flamer \u00b7 overflower \u00b7 bytecount", "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": "moderator", "subreddit_id": "t5_2s7lj", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "#f7f5ff", "id": "ijvwsk", "is_robot_indexable": true, "report_reasons": null, "author": "llogiq", "discussion_type": null, "num_comments": 67, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": "dark", "permalink": "/r/rust/comments/ijvwsk/hey_rustaceans_got_an_easy_question_ask_here/", "parent_whitelist_status": "all_ads", "stickied": true, "url": "https://www.reddit.com/r/rust/comments/ijvwsk/hey_rustaceans_got_an_easy_question_ask_here/", "subreddit_subscribers": 112417, "created_utc": 1598871702.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rust", "selftext": "New week, new Rust! What are you folks up to? Answer here or over at [rust-users](https://users.rust-lang.org/t/whats-everyone-working-on-this-week-36-2020/48100?u=llogiq)!", "author_fullname": "t2_1kxp4", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "What's everyone working on this week (36/2020)?", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rust", "hidden": false, "pwls": 6, "link_flair_css_class": "workingon", "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_ijvxwz", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 0.89, "author_flair_background_color": "", "subreddit_type": "public", "ups": 21, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": "\ud83d\udee0\ufe0f", "can_mod_post": false, "score": 21, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": "contrib", "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1598900646.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rust", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;New week, new Rust! What are you folks up to? Answer here or over at &lt;a href=\"https://users.rust-lang.org/t/whats-everyone-working-on-this-week-36-2020/48100?u=llogiq\"&gt;rust-users&lt;/a&gt;!&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "link_flair_template_id": "bcf7a574-dfe7-11ea-a8e3-0e6d3227496b", "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": "clippy \u00b7 twir \u00b7 rust \u00b7 mutagen \u00b7 flamer \u00b7 overflower \u00b7 bytecount", "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": "moderator", "subreddit_id": "t5_2s7lj", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "#fff0f5", "id": "ijvxwz", "is_robot_indexable": true, "report_reasons": null, "author": "llogiq", "discussion_type": null, "num_comments": 31, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": "dark", "permalink": "/r/rust/comments/ijvxwz/whats_everyone_working_on_this_week_362020/", "parent_whitelist_status": "all_ads", "stickied": true, "url": "https://www.reddit.com/r/rust/comments/ijvxwz/whats_everyone_working_on_this_week_362020/", "subreddit_subscribers": 112417, "created_utc": 1598871846.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rust", "selftext": "", "author_fullname": "t2_g3g1z", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Flume 0.8, a fast &amp; lightweight MPMC, released: Performance improvements, async support, select API, eventual fairness, Send + Sync + Clone, multiple receivers, no unsafe, timeout/deadline support", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rust", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_il4nq5", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 0.99, "author_flair_background_color": null, "subreddit_type": "public", "ups": 59, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 59, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": false, "mod_note": null, "created": 1599073201.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "github.com", "allow_live_comments": false, "selftext_html": null, "likes": null, "suggested_sort": null, "banned_at_utc": null, "url_overridden_by_dest": "https://github.com/zesterer/flume", "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2s7lj", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "il4nq5", "is_robot_indexable": true, "report_reasons": null, "author": "zesterer", "discussion_type": null, "num_comments": 20, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rust/comments/il4nq5/flume_08_a_fast_lightweight_mpmc_released/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://github.com/zesterer/flume", "subreddit_subscribers": 112417, "created_utc": 1599044401.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rust", "selftext": "Recently there's been a lot of discussion about what `const fn` actually is. For example, see the [recent comments on the Rust 1.46 announcement](https://old.reddit.com/r/rust/comments/ihnnnz/announcing_rust_1460_rust_blog/). This post is my personal answer to the question but it's by no means authoritative so please provide corrections!\n\nSo why is `const fn` useful? One thing you cannot ordinarily do with a function is call it in a constant position. Let's see what I mean:\n\n```\n\n    // a normal function\n    fn foo(n: usize) -&gt; usize {\n        n + 1\n    }\n\n    fn main() {\n        const BAR: usize = foo(5);\n        let array = [0_u8; foo(7)];\n    }\n\n```\n\nBoth of the lines in `main` will cause an error that may look something like this:\n\n    error[E0015]: calls in constants are limited to constant functions, tuple structs and tuple variants\n     --&gt; src/main.rs:7:28\n      |\n    7 |         const BAR: usize = foo(5);\n      |                            ^^^^^^\n\nAs the error says, this problem can be solved by using a \"constant function\" aka `const fn`. In this case all we need to do is change the definition of `foo` to:\n\n```\n\n    // a constant function\n    const fn foo(n: usize) -&gt; usize {\n        n + 1\n    }\n\n```\n\nAnd now `main` will work! But there's a catch. `const fn` is currently much more limited than a normal function. This simple example works and you can also now use `loop` and `if` in constant functions but there's a lot that won't work. Perhaps most notably, iterators won't work at all. Which amongst other things means no `for` loop. Work is continuing to allow more features in `const fn` but there will always be some functions that cannot be `const fn` (e.g. ones that rely on platform APIs).\n\nIn summary, that's all `const fn` means. You can use it in more places than an ordinary function. It can be used as a `static` variable, a `const` variable, as a length for an array, etc.\n\nSo should you mark every function as `const fn` so long as it compiles? No! `const fn` is a contract between you and the people that call your function. You are declaring that you will never change the function in ways that are invalid for `const fn`. This contract may prevent some future optimizations so think carefully before using it.\n\n-----\n\nAt this point you might be wondering why I haven't mentioned the phrase \"compile time\". That's because it's not what `const fn` is really about. Just about all functions can be run either partially or fully at compile time (the optimizer permitting) and a `const fn` may be run at runtime. Of course sometimes you do want to make 100% sure a function is run at compile time which is a useful side-effect of doing `const BAR: usize = foo();`. Note though that if you just do `let bar = foo();` (where `foo` is a `const fn`) it's pretty much the same as using an ordinary function which may or may not be run at compile time.\n\nIn the future there might be [inline `const`](https://github.com/ecstatic-morse/rfcs/blob/inline-const/text/0000-inline-const.md) that explicitly declares that you want to run part of your program at compile time. For example:\n\n```\n\n    let bar = const {\n        // The compiler will run this whole block at compile time\n        // or else it will produce an error\n    };\n\n``` \n\nBut this is very far from being stabilized (it's not even implemented yet).", "author_fullname": "t2_mzahghw", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "PSA: What is `const fn`?", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rust", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_iksmgk", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 0.96, "author_flair_background_color": null, "subreddit_type": "public", "ups": 199, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 199, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1599022296.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rust", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;Recently there&amp;#39;s been a lot of discussion about what &lt;code&gt;const fn&lt;/code&gt; actually is. For example, see the &lt;a href=\"https://old.reddit.com/r/rust/comments/ihnnnz/announcing_rust_1460_rust_blog/\"&gt;recent comments on the Rust 1.46 announcement&lt;/a&gt;. This post is my personal answer to the question but it&amp;#39;s by no means authoritative so please provide corrections!&lt;/p&gt;\n\n&lt;p&gt;So why is &lt;code&gt;const fn&lt;/code&gt; useful? One thing you cannot ordinarily do with a function is call it in a constant position. Let&amp;#39;s see what I mean:&lt;/p&gt;\n\n&lt;p&gt;```&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;// a normal function\nfn foo(n: usize) -&amp;gt; usize {\n    n + 1\n}\n\nfn main() {\n    const BAR: usize = foo(5);\n    let array = [0_u8; foo(7)];\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;```&lt;/p&gt;\n\n&lt;p&gt;Both of the lines in &lt;code&gt;main&lt;/code&gt; will cause an error that may look something like this:&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;error[E0015]: calls in constants are limited to constant functions, tuple structs and tuple variants\n --&amp;gt; src/main.rs:7:28\n  |\n7 |         const BAR: usize = foo(5);\n  |                            ^^^^^^\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;As the error says, this problem can be solved by using a &amp;quot;constant function&amp;quot; aka &lt;code&gt;const fn&lt;/code&gt;. In this case all we need to do is change the definition of &lt;code&gt;foo&lt;/code&gt; to:&lt;/p&gt;\n\n&lt;p&gt;```&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;// a constant function\nconst fn foo(n: usize) -&amp;gt; usize {\n    n + 1\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;```&lt;/p&gt;\n\n&lt;p&gt;And now &lt;code&gt;main&lt;/code&gt; will work! But there&amp;#39;s a catch. &lt;code&gt;const fn&lt;/code&gt; is currently much more limited than a normal function. This simple example works and you can also now use &lt;code&gt;loop&lt;/code&gt; and &lt;code&gt;if&lt;/code&gt; in constant functions but there&amp;#39;s a lot that won&amp;#39;t work. Perhaps most notably, iterators won&amp;#39;t work at all. Which amongst other things means no &lt;code&gt;for&lt;/code&gt; loop. Work is continuing to allow more features in &lt;code&gt;const fn&lt;/code&gt; but there will always be some functions that cannot be &lt;code&gt;const fn&lt;/code&gt; (e.g. ones that rely on platform APIs).&lt;/p&gt;\n\n&lt;p&gt;In summary, that&amp;#39;s all &lt;code&gt;const fn&lt;/code&gt; means. You can use it in more places than an ordinary function. It can be used as a &lt;code&gt;static&lt;/code&gt; variable, a &lt;code&gt;const&lt;/code&gt; variable, as a length for an array, etc.&lt;/p&gt;\n\n&lt;p&gt;So should you mark every function as &lt;code&gt;const fn&lt;/code&gt; so long as it compiles? No! &lt;code&gt;const fn&lt;/code&gt; is a contract between you and the people that call your function. You are declaring that you will never change the function in ways that are invalid for &lt;code&gt;const fn&lt;/code&gt;. This contract may prevent some future optimizations so think carefully before using it.&lt;/p&gt;\n\n&lt;hr/&gt;\n\n&lt;p&gt;At this point you might be wondering why I haven&amp;#39;t mentioned the phrase &amp;quot;compile time&amp;quot;. That&amp;#39;s because it&amp;#39;s not what &lt;code&gt;const fn&lt;/code&gt; is really about. Just about all functions can be run either partially or fully at compile time (the optimizer permitting) and a &lt;code&gt;const fn&lt;/code&gt; may be run at runtime. Of course sometimes you do want to make 100% sure a function is run at compile time which is a useful side-effect of doing &lt;code&gt;const BAR: usize = foo();&lt;/code&gt;. Note though that if you just do &lt;code&gt;let bar = foo();&lt;/code&gt; (where &lt;code&gt;foo&lt;/code&gt; is a &lt;code&gt;const fn&lt;/code&gt;) it&amp;#39;s pretty much the same as using an ordinary function which may or may not be run at compile time.&lt;/p&gt;\n\n&lt;p&gt;In the future there might be &lt;a href=\"https://github.com/ecstatic-morse/rfcs/blob/inline-const/text/0000-inline-const.md\"&gt;inline &lt;code&gt;const&lt;/code&gt;&lt;/a&gt; that explicitly declares that you want to run part of your program at compile time. For example:&lt;/p&gt;\n\n&lt;p&gt;```&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;let bar = const {\n    // The compiler will run this whole block at compile time\n    // or else it will produce an error\n};\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;``` &lt;/p&gt;\n\n&lt;p&gt;But this is very far from being stabilized (it&amp;#39;s not even implemented yet).&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2s7lj", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "iksmgk", "is_robot_indexable": true, "report_reasons": null, "author": "_ChrisSD", "discussion_type": null, "num_comments": 24, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rust/comments/iksmgk/psa_what_is_const_fn/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rust/comments/iksmgk/psa_what_is_const_fn/", "subreddit_subscribers": 112417, "created_utc": 1598993496.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rust", "selftext": "I'm sure it's intuitive to most, but to spare anyone in the future from spending an hour trying to get VSCode to work with multiple project roots in your workspace and rust-analyzer with clippy and rustfmt on save, here are the little pieces from 10 different websites that I pieced together to make it work.\n\n# Multiple project roots in workspace:\n\nIf you're like me and want a `rust` folder as the root of your VSCode workspace to contain multiple crates for testing or generally messing around with code examples, you want to set up a **cargo workspace**.\n\n[Here's the documentation on how](https://doc.rust-lang.org/book/ch14-03-cargo-workspaces.html).\n\nIt boils down to manually creating a `Cargo.toml` file in the root of your VSCode workspace. It only needs one section, `[workspace]` containing a list of each crate you created with `cargo run &lt;crate name&gt;` and then running `cargo build` in the root directory. Here's an example:\n\n\n    [workspace]\n    \n    members = [\n        \"fun-project\",\n        \"other-project\",\n    ]\n\n# rust-analyzer:\n\n[Here's](https://marketplace.visualstudio.com/items?itemName=matklad.rust-analyzer) the Visual Studio Marketplace page with the latest (as of the time of this post) rust-analyzer plugin for VSCode. \n\nYou can hit `Ctrl + P` in VSCode and paste in `ext install matklad.rust-analyzer` to install it. After installation, you will be prompted to install the language server in VSCode. Install it by clicking `Download now`.\n\n# Clippy\n\nTo install clippy, run `rustup component add clippy`\n\n# Rustfmt\n\nTo install rustfmt, run `rustup component add rustfmt`\n\n# Putting it all together\n\nAdd these lines to your VSCode `settings.json` file and save it. You may be prompted to restart rust-analyzer after save:\n\n    \"rust-analyzer.checkOnSave.command\": \"clippy\", // Replaces the default `cargo check` command with `cargo clippy` on Rust file save\n    \"editor.formatOnSave\": true,                   // General VSCode setting to allow a formatter, in this case rustfmt, to format text on save\n    \"rust-analyzer.cargo.allFeatures\": true,       // For fun. Activates all features of rust-analyzer. You don't need this one.\n    \"rust-analyzer.updates.channel\": \"nightly\",    // For fun. Enables the nightly updates channel for rust-analyzer since they ask nicely in their documentation. You don't need this one. You will be prompted to download the nightly install after save.\n\n&amp;nbsp;\n\nThis should be everything you need to get coding!", "author_fullname": "t2_525p6ouj", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "VSCode, multiple project roots, rust-analyzer, clippy, and rustfmt", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rust", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_ikzbdj", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 0.96, "author_flair_background_color": null, "subreddit_type": "public", "ups": 47, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 47, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1599046238.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rust", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;I&amp;#39;m sure it&amp;#39;s intuitive to most, but to spare anyone in the future from spending an hour trying to get VSCode to work with multiple project roots in your workspace and rust-analyzer with clippy and rustfmt on save, here are the little pieces from 10 different websites that I pieced together to make it work.&lt;/p&gt;\n\n&lt;h1&gt;Multiple project roots in workspace:&lt;/h1&gt;\n\n&lt;p&gt;If you&amp;#39;re like me and want a &lt;code&gt;rust&lt;/code&gt; folder as the root of your VSCode workspace to contain multiple crates for testing or generally messing around with code examples, you want to set up a &lt;strong&gt;cargo workspace&lt;/strong&gt;.&lt;/p&gt;\n\n&lt;p&gt;&lt;a href=\"https://doc.rust-lang.org/book/ch14-03-cargo-workspaces.html\"&gt;Here&amp;#39;s the documentation on how&lt;/a&gt;.&lt;/p&gt;\n\n&lt;p&gt;It boils down to manually creating a &lt;code&gt;Cargo.toml&lt;/code&gt; file in the root of your VSCode workspace. It only needs one section, &lt;code&gt;[workspace]&lt;/code&gt; containing a list of each crate you created with &lt;code&gt;cargo run &amp;lt;crate name&amp;gt;&lt;/code&gt; and then running &lt;code&gt;cargo build&lt;/code&gt; in the root directory. Here&amp;#39;s an example:&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;[workspace]\n\nmembers = [\n    &amp;quot;fun-project&amp;quot;,\n    &amp;quot;other-project&amp;quot;,\n]\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;h1&gt;rust-analyzer:&lt;/h1&gt;\n\n&lt;p&gt;&lt;a href=\"https://marketplace.visualstudio.com/items?itemName=matklad.rust-analyzer\"&gt;Here&amp;#39;s&lt;/a&gt; the Visual Studio Marketplace page with the latest (as of the time of this post) rust-analyzer plugin for VSCode. &lt;/p&gt;\n\n&lt;p&gt;You can hit &lt;code&gt;Ctrl + P&lt;/code&gt; in VSCode and paste in &lt;code&gt;ext install matklad.rust-analyzer&lt;/code&gt; to install it. After installation, you will be prompted to install the language server in VSCode. Install it by clicking &lt;code&gt;Download now&lt;/code&gt;.&lt;/p&gt;\n\n&lt;h1&gt;Clippy&lt;/h1&gt;\n\n&lt;p&gt;To install clippy, run &lt;code&gt;rustup component add clippy&lt;/code&gt;&lt;/p&gt;\n\n&lt;h1&gt;Rustfmt&lt;/h1&gt;\n\n&lt;p&gt;To install rustfmt, run &lt;code&gt;rustup component add rustfmt&lt;/code&gt;&lt;/p&gt;\n\n&lt;h1&gt;Putting it all together&lt;/h1&gt;\n\n&lt;p&gt;Add these lines to your VSCode &lt;code&gt;settings.json&lt;/code&gt; file and save it. You may be prompted to restart rust-analyzer after save:&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;&amp;quot;rust-analyzer.checkOnSave.command&amp;quot;: &amp;quot;clippy&amp;quot;, // Replaces the default `cargo check` command with `cargo clippy` on Rust file save\n&amp;quot;editor.formatOnSave&amp;quot;: true,                   // General VSCode setting to allow a formatter, in this case rustfmt, to format text on save\n&amp;quot;rust-analyzer.cargo.allFeatures&amp;quot;: true,       // For fun. Activates all features of rust-analyzer. You don&amp;#39;t need this one.\n&amp;quot;rust-analyzer.updates.channel&amp;quot;: &amp;quot;nightly&amp;quot;,    // For fun. Enables the nightly updates channel for rust-analyzer since they ask nicely in their documentation. You don&amp;#39;t need this one. You will be prompted to download the nightly install after save.\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&amp;nbsp;&lt;/p&gt;\n\n&lt;p&gt;This should be everything you need to get coding!&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2s7lj", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "ikzbdj", "is_robot_indexable": true, "report_reasons": null, "author": "C44ll54Ag", "discussion_type": null, "num_comments": 4, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rust/comments/ikzbdj/vscode_multiple_project_roots_rustanalyzer_clippy/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rust/comments/ikzbdj/vscode_multiple_project_roots_rustanalyzer_clippy/", "subreddit_subscribers": 112417, "created_utc": 1599017438.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rust", "selftext": "", "author_fullname": "t2_2og8on4k", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Show r/rust: a `no_std` NonEmpty types inspired by Haskell", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rust", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_il3pdy", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 1.0, "author_flair_background_color": null, "subreddit_type": "public", "ups": 11, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 11, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": false, "mod_note": null, "created": 1599068127.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "crates.io", "allow_live_comments": false, "selftext_html": null, "likes": null, "suggested_sort": null, "banned_at_utc": null, "url_overridden_by_dest": "https://crates.io/crates/oom", "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2s7lj", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "il3pdy", "is_robot_indexable": true, "report_reasons": null, "author": "lzutao", "discussion_type": null, "num_comments": 7, "send_replies": false, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rust/comments/il3pdy/show_rrust_a_no_std_nonempty_types_inspired_by/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://crates.io/crates/oom", "subreddit_subscribers": 112417, "created_utc": 1599039327.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rust", "selftext": "", "author_fullname": "t2_bfflh", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Bottlerocket is a free and open-source Linux-based operating system meant for hosting containers", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rust", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_ikqqm8", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 0.95, "author_flair_background_color": "", "subreddit_type": "public", "ups": 112, "total_awards_received": 2, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 112, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": false, "mod_note": null, "created": 1599016417.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "github.com", "allow_live_comments": false, "selftext_html": null, "likes": null, "suggested_sort": null, "banned_at_utc": null, "url_overridden_by_dest": "https://github.com/bottlerocket-os/bottlerocket", "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [{"giver_coin_reward": 0, "subreddit_id": null, "is_new": false, "days_of_drip_extension": 0, "coin_price": 75, "resized_tier_icons": null, "id": "award_ce5f9ce6-49d9-4905-9228-22950e889206", "penny_donate": 0, "award_sub_type": "GLOBAL", "coin_reward": 0, "icon_url": "https://i.redd.it/award_images/t5_22cerq/5smbysczm1w41_Hugz.png", "days_of_premium": 0, "tiers_by_required_awardings": null, "resized_icons": [{"url": "https://preview.redd.it/award_images/t5_22cerq/5smbysczm1w41_Hugz.png?width=16&amp;height=16&amp;auto=webp&amp;s=7a3164ef705ae0a41198e29767e4a51fd86e2dcd", "width": 16, "height": 16}, {"url": "https://preview.redd.it/award_images/t5_22cerq/5smbysczm1w41_Hugz.png?width=32&amp;height=32&amp;auto=webp&amp;s=5c621179e63f7f6fbb6a0807367bd79467878784", "width": 32, "height": 32}, {"url": "https://preview.redd.it/award_images/t5_22cerq/5smbysczm1w41_Hugz.png?width=48&amp;height=48&amp;auto=webp&amp;s=ebf40f79a711e9c4206f5f841235e43697f7a3f5", "width": 48, "height": 48}, {"url": "https://preview.redd.it/award_images/t5_22cerq/5smbysczm1w41_Hugz.png?width=64&amp;height=64&amp;auto=webp&amp;s=18dad26bb669e202c42ff6b742d6c0f9d1e62ee9", "width": 64, "height": 64}, {"url": "https://preview.redd.it/award_images/t5_22cerq/5smbysczm1w41_Hugz.png?width=128&amp;height=128&amp;auto=webp&amp;s=61ccae2b32cfbf2f26bd53c9d1287d1235da4d68", "width": 128, "height": 128}], "icon_width": 2048, "static_icon_width": 2048, "start_date": null, "is_enabled": true, "awardings_required_to_grant_benefits": null, "description": "Everything's better with a good hug", "end_date": null, "subreddit_coin_reward": 0, "count": 1, "static_icon_height": 2048, "name": "Hugz", "resized_static_icons": [{"url": "https://preview.redd.it/award_images/t5_22cerq/5smbysczm1w41_Hugz.png?width=16&amp;height=16&amp;auto=webp&amp;s=7a3164ef705ae0a41198e29767e4a51fd86e2dcd", "width": 16, "height": 16}, {"url": "https://preview.redd.it/award_images/t5_22cerq/5smbysczm1w41_Hugz.png?width=32&amp;height=32&amp;auto=webp&amp;s=5c621179e63f7f6fbb6a0807367bd79467878784", "width": 32, "height": 32}, {"url": "https://preview.redd.it/award_images/t5_22cerq/5smbysczm1w41_Hugz.png?width=48&amp;height=48&amp;auto=webp&amp;s=ebf40f79a711e9c4206f5f841235e43697f7a3f5", "width": 48, "height": 48}, {"url": "https://preview.redd.it/award_images/t5_22cerq/5smbysczm1w41_Hugz.png?width=64&amp;height=64&amp;auto=webp&amp;s=18dad26bb669e202c42ff6b742d6c0f9d1e62ee9", "width": 64, "height": 64}, {"url": "https://preview.redd.it/award_images/t5_22cerq/5smbysczm1w41_Hugz.png?width=128&amp;height=128&amp;auto=webp&amp;s=61ccae2b32cfbf2f26bd53c9d1287d1235da4d68", "width": 128, "height": 128}], "icon_format": "PNG", "icon_height": 2048, "penny_price": 0, "award_type": "global", "static_icon_url": "https://i.redd.it/award_images/t5_22cerq/5smbysczm1w41_Hugz.png"}, {"giver_coin_reward": 0, "subreddit_id": null, "is_new": false, "days_of_drip_extension": 0, "coin_price": 70, "resized_tier_icons": null, "id": "award_7becef23-fb0b-4d62-b8a6-01d5759367cb", "penny_donate": 0, "award_sub_type": "GLOBAL", "coin_reward": 0, "icon_url": "https://i.redd.it/award_images/t5_22cerq/gva4vt20qc751_FaithInHumanityRestored.png", "days_of_premium": 0, "tiers_by_required_awardings": null, "resized_icons": [{"url": "https://preview.redd.it/award_images/t5_22cerq/gva4vt20qc751_FaithInHumanityRestored.png?width=16&amp;height=16&amp;auto=webp&amp;s=19c8ba1570a2447a04354e05a9463f3d2063f522", "width": 16, "height": 16}, {"url": "https://preview.redd.it/award_images/t5_22cerq/gva4vt20qc751_FaithInHumanityRestored.png?width=32&amp;height=32&amp;auto=webp&amp;s=6222517b5d76c737ce1ad1ab55c42e3ce53c11d7", "width": 32, "height": 32}, {"url": "https://preview.redd.it/award_images/t5_22cerq/gva4vt20qc751_FaithInHumanityRestored.png?width=48&amp;height=48&amp;auto=webp&amp;s=5f5d88a13a1a514298ec5c7edc6f2506750f3c4a", "width": 48, "height": 48}, {"url": "https://preview.redd.it/award_images/t5_22cerq/gva4vt20qc751_FaithInHumanityRestored.png?width=64&amp;height=64&amp;auto=webp&amp;s=3af85a35bcd871d432337f309f6ea333181b4092", "width": 64, "height": 64}, {"url": "https://preview.redd.it/award_images/t5_22cerq/gva4vt20qc751_FaithInHumanityRestored.png?width=128&amp;height=128&amp;auto=webp&amp;s=4631e5c3e2cda226cb2725e9eff118c7b419a95e", "width": 128, "height": 128}], "icon_width": 2048, "static_icon_width": 2048, "start_date": null, "is_enabled": true, "awardings_required_to_grant_benefits": null, "description": "When goodness lifts you", "end_date": null, "subreddit_coin_reward": 0, "count": 1, "static_icon_height": 2048, "name": "Faith In Humanity Restored", "resized_static_icons": [{"url": "https://preview.redd.it/award_images/t5_22cerq/gva4vt20qc751_FaithInHumanityRestored.png?width=16&amp;height=16&amp;auto=webp&amp;s=19c8ba1570a2447a04354e05a9463f3d2063f522", "width": 16, "height": 16}, {"url": "https://preview.redd.it/award_images/t5_22cerq/gva4vt20qc751_FaithInHumanityRestored.png?width=32&amp;height=32&amp;auto=webp&amp;s=6222517b5d76c737ce1ad1ab55c42e3ce53c11d7", "width": 32, "height": 32}, {"url": "https://preview.redd.it/award_images/t5_22cerq/gva4vt20qc751_FaithInHumanityRestored.png?width=48&amp;height=48&amp;auto=webp&amp;s=5f5d88a13a1a514298ec5c7edc6f2506750f3c4a", "width": 48, "height": 48}, {"url": "https://preview.redd.it/award_images/t5_22cerq/gva4vt20qc751_FaithInHumanityRestored.png?width=64&amp;height=64&amp;auto=webp&amp;s=3af85a35bcd871d432337f309f6ea333181b4092", "width": 64, "height": 64}, {"url": "https://preview.redd.it/award_images/t5_22cerq/gva4vt20qc751_FaithInHumanityRestored.png?width=128&amp;height=128&amp;auto=webp&amp;s=4631e5c3e2cda226cb2725e9eff118c7b419a95e", "width": 128, "height": 128}], "icon_format": "PNG", "icon_height": 2048, "penny_price": 0, "award_type": "global", "static_icon_url": "https://i.redd.it/award_images/t5_22cerq/gva4vt20qc751_FaithInHumanityRestored.png"}], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": "thrift", "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2s7lj", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "ikqqm8", "is_robot_indexable": true, "report_reasons": null, "author": "allengeorge", "discussion_type": null, "num_comments": 10, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": "dark", "permalink": "/r/rust/comments/ikqqm8/bottlerocket_is_a_free_and_opensource_linuxbased/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://github.com/bottlerocket-os/bottlerocket", "subreddit_subscribers": 112417, "created_utc": 1598987617.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rust", "selftext": "", "author_fullname": "t2_fhh74", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Refactoring Rust Transpiled from C", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rust", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_ikqzni", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 0.98, "author_flair_background_color": null, "subreddit_type": "public", "ups": 92, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": "4c3a495a-89df-11e3-a482-12313d27e9a3", "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 92, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": "contrib", "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": false, "mod_note": null, "created": 1599017211.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "immunant.com", "allow_live_comments": false, "selftext_html": null, "likes": null, "suggested_sort": null, "banned_at_utc": null, "url_overridden_by_dest": "https://immunant.com/blog/2020/09/transpiled_c_safety/", "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": "c2rust", "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2s7lj", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "ikqzni", "is_robot_indexable": true, "report_reasons": null, "author": "thedataking", "discussion_type": null, "num_comments": 0, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": "dark", "permalink": "/r/rust/comments/ikqzni/refactoring_rust_transpiled_from_c/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://immunant.com/blog/2020/09/transpiled_c_safety/", "subreddit_subscribers": 112417, "created_utc": 1598988411.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rust", "selftext": "I'm excited to share a recent project on implementing compiled Datalog in Rust, for areas like static analysis and database systems. [Crepe](https://github.com/ekzhang/crepe/) is a procedural macro that lets you easily write declarative Datalog-like code, and it interoperates fully with larger programs. As a simple example, you can compute reachability in a directed graph like so:\n\n    use crepe::crepe;\n    \n    crepe! {\n        @input\n        struct Edge(i32, i32);\n    \n        @output\n        struct Reachable(i32, i32);\n    \n        Reachable(x, y) &lt;- Edge(x, y);\n        Reachable(x, z) &lt;- Edge(x, y), Reachable(y, z);\n    }\n    \n    fn main() {\n        let mut runtime = Crepe::new();\n        runtime.extend(&amp;[Edge(1, 2), Edge(2, 3), Edge(3, 4), Edge(2, 5)]);\n    \n        let (reachable,) = runtime.run();\n        for Reachable(x, y) in reachable {\n            println!(\"node {} can reach node {}\", x, y);\n        }\n    }\n\nThe advantage of this approach over something like [Souffle](https://souffle-lang.github.io/) is that you get seamless integration and portability with pure Rust code (no need for C++ environment setup), and unlike the low-level [Datafrog](https://github.com/rust-lang/datafrog) engine, you can write ergonomic, high-level specifications.\n\nWe also support semi-naive evaluation and stratified negation (see [Chapter 3 of this book](http://blogs.evergreen.edu/sosw/files/2014/04/Green-Vol5-DBS-017.pdf) for more info). What I think is really fun is the ability to extend Datalog rules with **arbitrary Rust syntax**, by allowing any Rust expression to be inlined into the bodies and conditions of rules. For example, we can use arithmetic to compute all paths in a graph with length less than 20:\n\n    use crepe::crepe;\n    \n    const MAX_PATH_LEN: u32 = 20;\n    \n    crepe! {\n        @input\n        struct Edge(i32, i32, u32);\n    \n        @output\n        struct Walk(i32, i32, u32);\n    \n        @output\n        struct NoWalk(i32, i32);\n    \n        struct Node(i32);\n    \n        Node(x) &lt;- Edge(x, _, _);\n        Node(x) &lt;- Edge(_, x, _);\n    \n        Walk(x, x, 0) &lt;- Node(x);\n        Walk(x, z, len1 + len2) &lt;-\n            Edge(x, y, len1),\n            Walk(y, z, len2),\n            (len1 + len2 &lt;= MAX_PATH_LEN);\n    \n        NoWalk(x, y) &lt;- Node(x), Node(y), !Walk(x, y, _);\n    }\n\nIn particular, any part of a rule can have inline Rust expressions, so you could even add a clause like `PrimeWalk(x, y) &lt;- Walk(x, y, len), (primes::is_prime(len as u64));` to compute **all paths of prime length** in a weighted graph! (here relying on the [primes](https://docs.rs/primes/0.3.0/primes/) crate)\n\nAs mentioned before, this is not the first time Datalog and its extensions have been compiled for static analysis purposes (see [Souffle](https://souffle-lang.github.io/), [Formulog](https://github.com/HarvardPL/formulog)). However, I think implementing it as a procedural macro makes for a really ergonomic, intuitive way to play with Datalog code and integrate it into larger applications.\n\nThis is my first published crate, happy to receive any advice you have! Code: [https://github.com/ekzhang/crepe/](https://github.com/ekzhang/crepe/)", "author_fullname": "t2_h60a6", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Crepe: fast, compiled Datalog in Rust", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rust", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_ikszdg", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 0.93, "author_flair_background_color": null, "subreddit_type": "public", "ups": 56, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 56, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1599023373.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rust", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;I&amp;#39;m excited to share a recent project on implementing compiled Datalog in Rust, for areas like static analysis and database systems. &lt;a href=\"https://github.com/ekzhang/crepe/\"&gt;Crepe&lt;/a&gt; is a procedural macro that lets you easily write declarative Datalog-like code, and it interoperates fully with larger programs. As a simple example, you can compute reachability in a directed graph like so:&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;use crepe::crepe;\n\ncrepe! {\n    @input\n    struct Edge(i32, i32);\n\n    @output\n    struct Reachable(i32, i32);\n\n    Reachable(x, y) &amp;lt;- Edge(x, y);\n    Reachable(x, z) &amp;lt;- Edge(x, y), Reachable(y, z);\n}\n\nfn main() {\n    let mut runtime = Crepe::new();\n    runtime.extend(&amp;amp;[Edge(1, 2), Edge(2, 3), Edge(3, 4), Edge(2, 5)]);\n\n    let (reachable,) = runtime.run();\n    for Reachable(x, y) in reachable {\n        println!(&amp;quot;node {} can reach node {}&amp;quot;, x, y);\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;The advantage of this approach over something like &lt;a href=\"https://souffle-lang.github.io/\"&gt;Souffle&lt;/a&gt; is that you get seamless integration and portability with pure Rust code (no need for C++ environment setup), and unlike the low-level &lt;a href=\"https://github.com/rust-lang/datafrog\"&gt;Datafrog&lt;/a&gt; engine, you can write ergonomic, high-level specifications.&lt;/p&gt;\n\n&lt;p&gt;We also support semi-naive evaluation and stratified negation (see &lt;a href=\"http://blogs.evergreen.edu/sosw/files/2014/04/Green-Vol5-DBS-017.pdf\"&gt;Chapter 3 of this book&lt;/a&gt; for more info). What I think is really fun is the ability to extend Datalog rules with &lt;strong&gt;arbitrary Rust syntax&lt;/strong&gt;, by allowing any Rust expression to be inlined into the bodies and conditions of rules. For example, we can use arithmetic to compute all paths in a graph with length less than 20:&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;use crepe::crepe;\n\nconst MAX_PATH_LEN: u32 = 20;\n\ncrepe! {\n    @input\n    struct Edge(i32, i32, u32);\n\n    @output\n    struct Walk(i32, i32, u32);\n\n    @output\n    struct NoWalk(i32, i32);\n\n    struct Node(i32);\n\n    Node(x) &amp;lt;- Edge(x, _, _);\n    Node(x) &amp;lt;- Edge(_, x, _);\n\n    Walk(x, x, 0) &amp;lt;- Node(x);\n    Walk(x, z, len1 + len2) &amp;lt;-\n        Edge(x, y, len1),\n        Walk(y, z, len2),\n        (len1 + len2 &amp;lt;= MAX_PATH_LEN);\n\n    NoWalk(x, y) &amp;lt;- Node(x), Node(y), !Walk(x, y, _);\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;In particular, any part of a rule can have inline Rust expressions, so you could even add a clause like &lt;code&gt;PrimeWalk(x, y) &amp;lt;- Walk(x, y, len), (primes::is_prime(len as u64));&lt;/code&gt; to compute &lt;strong&gt;all paths of prime length&lt;/strong&gt; in a weighted graph! (here relying on the &lt;a href=\"https://docs.rs/primes/0.3.0/primes/\"&gt;primes&lt;/a&gt; crate)&lt;/p&gt;\n\n&lt;p&gt;As mentioned before, this is not the first time Datalog and its extensions have been compiled for static analysis purposes (see &lt;a href=\"https://souffle-lang.github.io/\"&gt;Souffle&lt;/a&gt;, &lt;a href=\"https://github.com/HarvardPL/formulog\"&gt;Formulog&lt;/a&gt;). However, I think implementing it as a procedural macro makes for a really ergonomic, intuitive way to play with Datalog code and integrate it into larger applications.&lt;/p&gt;\n\n&lt;p&gt;This is my first published crate, happy to receive any advice you have! Code: &lt;a href=\"https://github.com/ekzhang/crepe/\"&gt;https://github.com/ekzhang/crepe/&lt;/a&gt;&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2s7lj", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "ikszdg", "is_robot_indexable": true, "report_reasons": null, "author": "fz0718", "discussion_type": null, "num_comments": 5, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rust/comments/ikszdg/crepe_fast_compiled_datalog_in_rust/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rust/comments/ikszdg/crepe_fast_compiled_datalog_in_rust/", "subreddit_subscribers": 112417, "created_utc": 1598994573.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rust", "selftext": "Hi,\n\nWould anyone be interested in a tutorial series on creating an interpreted language using Rust? My plan is to start the tutorials as simple and easy to follow as possible, and gradually work upwards from there to improve the language. I\u2019ve only created one language (still WIP at the moment), so I\u2019m not very experienced in this area, but I have a strong grasp on the fundamentals as a result of rewriting my pet language from scratch many times. Creating the series will hopefully also be a learning experience for me :)\n\nAt first I thought that the tutorials should be in text form, but then I remembered how much more engaged and interested I am when watching tutorial content in video form. I believe that this may also be easier to make for me, as I find things easier to explain with speech rather than writing. However, I\u2019ve heard quite a few people say they dislike video content, as it doesn\u2019t allow them to skim and slows them down. Another reason that text might be better is because I\u2019m 16, so it would probably be strange watching a tutorial where the person teaching isn\u2019t an adult (I know I would find it strange).\n\nSo, would you be interested?\n\n[View Poll](https://www.reddit.com/poll/ikiag7)", "author_fullname": "t2_1nm2et82", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Are you interested in a tutorial series on making your own language using Rust?", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rust", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_ikiag7", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 0.95, "author_flair_background_color": null, "subreddit_type": "public", "ups": 333, "total_awards_received": 1, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 333, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1598987296.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rust", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;Hi,&lt;/p&gt;\n\n&lt;p&gt;Would anyone be interested in a tutorial series on creating an interpreted language using Rust? My plan is to start the tutorials as simple and easy to follow as possible, and gradually work upwards from there to improve the language. I\u2019ve only created one language (still WIP at the moment), so I\u2019m not very experienced in this area, but I have a strong grasp on the fundamentals as a result of rewriting my pet language from scratch many times. Creating the series will hopefully also be a learning experience for me :)&lt;/p&gt;\n\n&lt;p&gt;At first I thought that the tutorials should be in text form, but then I remembered how much more engaged and interested I am when watching tutorial content in video form. I believe that this may also be easier to make for me, as I find things easier to explain with speech rather than writing. However, I\u2019ve heard quite a few people say they dislike video content, as it doesn\u2019t allow them to skim and slows them down. Another reason that text might be better is because I\u2019m 16, so it would probably be strange watching a tutorial where the person teaching isn\u2019t an adult (I know I would find it strange).&lt;/p&gt;\n\n&lt;p&gt;So, would you be interested?&lt;/p&gt;\n\n&lt;p&gt;&lt;a href=\"https://www.reddit.com/poll/ikiag7\"&gt;View Poll&lt;/a&gt;&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [{"giver_coin_reward": null, "subreddit_id": null, "is_new": false, "days_of_drip_extension": 0, "coin_price": 200, "resized_tier_icons": null, "id": "award_1703f934-cf44-40cc-a96d-3729d0b48262", "penny_donate": null, "award_sub_type": "GLOBAL", "coin_reward": 0, "icon_url": "https://i.redd.it/award_images/t5_22cerq/8ad2jffnclf41_Thanks.png", "days_of_premium": 0, "tiers_by_required_awardings": null, "resized_icons": [{"url": "https://preview.redd.it/award_images/t5_22cerq/8ad2jffnclf41_Thanks.png?width=16&amp;height=16&amp;auto=webp&amp;s=e3adc32e42cf534e27afea719ff932b1ce797cfd", "width": 16, "height": 16}, {"url": "https://preview.redd.it/award_images/t5_22cerq/8ad2jffnclf41_Thanks.png?width=32&amp;height=32&amp;auto=webp&amp;s=08542909c94777e870c41a35413bce688ca2fd6c", "width": 32, "height": 32}, {"url": "https://preview.redd.it/award_images/t5_22cerq/8ad2jffnclf41_Thanks.png?width=48&amp;height=48&amp;auto=webp&amp;s=4d85746d584b5494087da3561944d6d241f57674", "width": 48, "height": 48}, {"url": "https://preview.redd.it/award_images/t5_22cerq/8ad2jffnclf41_Thanks.png?width=64&amp;height=64&amp;auto=webp&amp;s=fd7683c8de2839998a432e7e53e1e06d66c35ad3", "width": 64, "height": 64}, {"url": "https://preview.redd.it/award_images/t5_22cerq/8ad2jffnclf41_Thanks.png?width=128&amp;height=128&amp;auto=webp&amp;s=a750da7a573bb231bd863be9725abece0332b828", "width": 128, "height": 128}], "icon_width": 2048, "static_icon_width": 2048, "start_date": null, "is_enabled": true, "awardings_required_to_grant_benefits": null, "description": "My kindergarten teacher, my cat, my mom, and you.", "end_date": null, "subreddit_coin_reward": 0, "count": 1, "static_icon_height": 2048, "name": "I'd Like to Thank...", "resized_static_icons": [{"url": "https://preview.redd.it/award_images/t5_22cerq/8ad2jffnclf41_Thanks.png?width=16&amp;height=16&amp;auto=webp&amp;s=e3adc32e42cf534e27afea719ff932b1ce797cfd", "width": 16, "height": 16}, {"url": "https://preview.redd.it/award_images/t5_22cerq/8ad2jffnclf41_Thanks.png?width=32&amp;height=32&amp;auto=webp&amp;s=08542909c94777e870c41a35413bce688ca2fd6c", "width": 32, "height": 32}, {"url": "https://preview.redd.it/award_images/t5_22cerq/8ad2jffnclf41_Thanks.png?width=48&amp;height=48&amp;auto=webp&amp;s=4d85746d584b5494087da3561944d6d241f57674", "width": 48, "height": 48}, {"url": "https://preview.redd.it/award_images/t5_22cerq/8ad2jffnclf41_Thanks.png?width=64&amp;height=64&amp;auto=webp&amp;s=fd7683c8de2839998a432e7e53e1e06d66c35ad3", "width": 64, "height": 64}, {"url": "https://preview.redd.it/award_images/t5_22cerq/8ad2jffnclf41_Thanks.png?width=128&amp;height=128&amp;auto=webp&amp;s=a750da7a573bb231bd863be9725abece0332b828", "width": 128, "height": 128}], "icon_format": null, "icon_height": 2048, "penny_price": null, "award_type": "global", "static_icon_url": "https://i.redd.it/award_images/t5_22cerq/8ad2jffnclf41_Thanks.png"}], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2s7lj", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "ikiag7", "is_robot_indexable": true, "report_reasons": null, "author": "sheepshapesoap", "discussion_type": null, "num_comments": 89, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "poll_data": {"user_won_amount": null, "resolved_option_id": null, "total_vote_count": 2146, "user_selection": null, "is_prediction": false, "voting_end_timestamp": 1599390496330, "options": [{"text": "Yes, and I\u2019d prefer videos", "id": "2740083"}, {"text": "Yes, and I\u2019d prefer text", "id": "2740084"}, {"text": "No, I\u2019m not interested", "id": "2740085"}], "total_stake_amount": null}, "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rust/comments/ikiag7/are_you_interested_in_a_tutorial_series_on_making/", "parent_whitelist_status": "all_ads", "stickied": false, "mod_reports": [], "url": "https://www.reddit.com/r/rust/comments/ikiag7/are_you_interested_in_a_tutorial_series_on_making/", "subreddit_subscribers": 112417, "created_utc": 1598958496.0, "num_crossposts": 1, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rust", "selftext": "Hey there folks, i would like to present to you my current project [Curio](https://github.com/fatalcenturion/curio), a blazing fast HTTP Client, written entirely in Rust.\n\n&amp;#x200B;\n\nSome of the things it currently supports:\n\n* HTTPS automatic redirect\n* GET, POST, OPTIONS, DELETE, HEAD methods\n\n&amp;#x200B;\n\nYou can view benchmarks against other popular HTTP clients [here](https://github.com/fatalcenturion/curio#benchmarks). Independant benchmarkers to help verify these would be appreciated.\n\nYou can begin using Curio by checking out some of the examples on the repository [here](https://github.com/fatalcenturion/curio) or by reading the documentation on [docs.rs](https://docs.rs/curio/0.0.3/curio/).\n\nOverall, i would appreciate if you kind folks could check it out and provide me with some feedback. Please let me know what you think of my project, and how i could improve it!\n\nEdit: Benchmark utility can be found [here](https://github.com/fatalcenturion/curio-benchmarks)", "author_fullname": "t2_13owet", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Introducing Curio - A blazing fast HTTP client.", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rust", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_ikr16f", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 0.86, "author_flair_background_color": null, "subreddit_type": "public", "ups": 49, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 49, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": 1598994708.0, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1599017348.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rust", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;Hey there folks, i would like to present to you my current project &lt;a href=\"https://github.com/fatalcenturion/curio\"&gt;Curio&lt;/a&gt;, a blazing fast HTTP Client, written entirely in Rust.&lt;/p&gt;\n\n&lt;p&gt;&amp;#x200B;&lt;/p&gt;\n\n&lt;p&gt;Some of the things it currently supports:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;HTTPS automatic redirect&lt;/li&gt;\n&lt;li&gt;GET, POST, OPTIONS, DELETE, HEAD methods&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;&amp;#x200B;&lt;/p&gt;\n\n&lt;p&gt;You can view benchmarks against other popular HTTP clients &lt;a href=\"https://github.com/fatalcenturion/curio#benchmarks\"&gt;here&lt;/a&gt;. Independant benchmarkers to help verify these would be appreciated.&lt;/p&gt;\n\n&lt;p&gt;You can begin using Curio by checking out some of the examples on the repository &lt;a href=\"https://github.com/fatalcenturion/curio\"&gt;here&lt;/a&gt; or by reading the documentation on &lt;a href=\"https://docs.rs/curio/0.0.3/curio/\"&gt;docs.rs&lt;/a&gt;.&lt;/p&gt;\n\n&lt;p&gt;Overall, i would appreciate if you kind folks could check it out and provide me with some feedback. Please let me know what you think of my project, and how i could improve it!&lt;/p&gt;\n\n&lt;p&gt;Edit: Benchmark utility can be found &lt;a href=\"https://github.com/fatalcenturion/curio-benchmarks\"&gt;here&lt;/a&gt;&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2s7lj", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "ikr16f", "is_robot_indexable": true, "report_reasons": null, "author": "fatalcenturion", "discussion_type": null, "num_comments": 19, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rust/comments/ikr16f/introducing_curio_a_blazing_fast_http_client/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rust/comments/ikr16f/introducing_curio_a_blazing_fast_http_client/", "subreddit_subscribers": 112417, "created_utc": 1598988548.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rust", "selftext": "I'm attempting to implement a DSL using macros which would include a short-hand for struct definitions.  So for instance, I want to be able to have a block like this:\n\n    my_macro! {\n        Point2D -&gt; i32, i32\n        Point3D -&gt; i32, i32, i32\n    }\n\nWhich would create these types:\n\n    struct Point2D {\n        v0: i32,\n        v1: i32\n    }\n\n    struct Point3D {\n        v0: i32,\n        v1: i32,\n        v2: i32\n    }\n\n\nIs this possible using match rules?\n\nI was trying something like this:\n\n    macro_rules! context_free_grammar {\n        ($new_type:ident -&gt; $other_type:ty) =&gt; { ... }\n    }\n\nBut it seems like it wants the new_type identity to exist outside of the macro block.", "author_fullname": "t2_5imxo", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Is it possible to generate a type from within a pattern-matching macro?", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rust", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_il4d6n", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 1.0, "author_flair_background_color": null, "subreddit_type": "public", "ups": 3, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 3, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1599071703.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rust", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;I&amp;#39;m attempting to implement a DSL using macros which would include a short-hand for struct definitions.  So for instance, I want to be able to have a block like this:&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;my_macro! {\n    Point2D -&amp;gt; i32, i32\n    Point3D -&amp;gt; i32, i32, i32\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Which would create these types:&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;struct Point2D {\n    v0: i32,\n    v1: i32\n}\n\nstruct Point3D {\n    v0: i32,\n    v1: i32,\n    v2: i32\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Is this possible using match rules?&lt;/p&gt;\n\n&lt;p&gt;I was trying something like this:&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;macro_rules! context_free_grammar {\n    ($new_type:ident -&amp;gt; $other_type:ty) =&amp;gt; { ... }\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;But it seems like it wants the new_type identity to exist outside of the macro block.&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2s7lj", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "il4d6n", "is_robot_indexable": true, "report_reasons": null, "author": "pragmojo", "discussion_type": null, "num_comments": 5, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rust/comments/il4d6n/is_it_possible_to_generate_a_type_from_within_a/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rust/comments/il4d6n/is_it_possible_to_generate_a_type_from_within_a/", "subreddit_subscribers": 112417, "created_utc": 1599042903.0, "num_crossposts": 0, "media": null, "is_video": false}}], "after": "t3_il4d6n", "before": null}}