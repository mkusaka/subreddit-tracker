{"kind": "Listing", "data": {"modhash": "", "dist": 11, "children": [{"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "In this thread you can showcase your personal pet project to other redditors.\n\nNeed help with a specific problem or just wanna have some extra eyeballs on your code? Ask away!\n\nA suggested format to get you started:\n\n1. **Name of your project**\n2. **A short description**\n3. **Application stack**\n4. **Link to Live app**\n5. **Link to GitHub**\n6. **You experience level**\n7. **Other information or areas that you would like advice on**\n\n\u00a0\n\n^(Many thanks to Kritnc for getting the ball rolling.)", "author_fullname": "t2_6l4z3", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Personal Projects - Show off your own project and/or ask for advice", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_igyvm1", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 1.0, "author_flair_background_color": null, "subreddit_type": "public", "ups": 3, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 3, "approved_by": null, "author_premium": true, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1598477561.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;In this thread you can showcase your personal pet project to other redditors.&lt;/p&gt;\n\n&lt;p&gt;Need help with a specific problem or just wanna have some extra eyeballs on your code? Ask away!&lt;/p&gt;\n\n&lt;p&gt;A suggested format to get you started:&lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;&lt;strong&gt;Name of your project&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;A short description&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Application stack&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Link to Live app&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Link to GitHub&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;You experience level&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Other information or areas that you would like advice on&lt;/strong&gt;&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;p&gt;\u00a0&lt;/p&gt;\n\n&lt;p&gt;&lt;sup&gt;Many thanks to Kritnc for getting the ball rolling.&lt;/sup&gt;&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": true, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": "moderator", "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "igyvm1", "is_robot_indexable": true, "report_reasons": null, "author": "AutoModerator", "discussion_type": null, "num_comments": 10, "send_replies": false, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/igyvm1/personal_projects_show_off_your_own_project_andor/", "parent_whitelist_status": "all_ads", "stickied": true, "url": "https://www.reddit.com/r/rails/comments/igyvm1/personal_projects_show_off_your_own_project_andor/", "subreddit_subscribers": 45780, "created_utc": 1598448761.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "I am reading Ruby on Rails Tutorial book by Michael Hartl (2017) now. I am feeling some troubles with Ruby version and Gems version. \n\nSo, is it a good idea or I need to find some newer resource? What resource you can recommend?\n\nP.S. I went from Python &amp; Django. I got new project and part of it wrote on Ruby. Stack: Django, Rails, React - looks like Frankenstein. :)", "author_fullname": "t2_7ja6u2d0", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Is it a good idea learning Rails by the book of 2017 year?", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_ikph1s", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 0.96, "author_flair_background_color": null, "subreddit_type": "public", "ups": 19, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 19, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1599012518.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;I am reading Ruby on Rails Tutorial book by Michael Hartl (2017) now. I am feeling some troubles with Ruby version and Gems version. &lt;/p&gt;\n\n&lt;p&gt;So, is it a good idea or I need to find some newer resource? What resource you can recommend?&lt;/p&gt;\n\n&lt;p&gt;P.S. I went from Python &amp;amp; Django. I got new project and part of it wrote on Ruby. Stack: Django, Rails, React - looks like Frankenstein. :)&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "ikph1s", "is_robot_indexable": true, "report_reasons": null, "author": "sploit-face", "discussion_type": null, "num_comments": 20, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/ikph1s/is_it_a_good_idea_learning_rails_by_the_book_of/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/ikph1s/is_it_a_good_idea_learning_rails_by_the_book_of/", "subreddit_subscribers": 45780, "created_utc": 1598983718.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "Hello. I'm adding a contact form in my web development portfolio. I would like people to be able to send me a message to my email directly from this form. I'm trying to find a way to do this with Rails 6 and I'm not finding anything new. While Googlilng, I notice that the JS has changed slightly in Rails. It's moved from assets to it's own folder because of webpacker. I'm such a newbie so I don't know much about why that's important. I'm pretty sure I have to add the \"mail\\_form\", \"simple\\_form\", \"jquery-rails\", and I guess \"bootstrap\\_sass\" gems. Now I'm just wondering what to do next.\n\nOlder ways I see are basically adding a controller for the contact form. However, I my form will just be at the bottom of my homepage. Most of my portfolio will just be on this page, so when people are done looking at it, I want them to be able to just scroll to the bottom and see the form there, then message me if that's how they want to contact me quickly.  If someone could point me in the right direction of doing this for Rails 6, I'd appreciate it!", "author_fullname": "t2_l7j19", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Email from contact form in Rails 6", "link_flair_richtext": [{"e": "text", "t": "Help"}], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": "help", "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_iky3nn", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 0.75, "author_flair_background_color": null, "subreddit_type": "public", "ups": 4, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": "Help", "can_mod_post": false, "score": 4, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1599041447.0, "link_flair_type": "richtext", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;Hello. I&amp;#39;m adding a contact form in my web development portfolio. I would like people to be able to send me a message to my email directly from this form. I&amp;#39;m trying to find a way to do this with Rails 6 and I&amp;#39;m not finding anything new. While Googlilng, I notice that the JS has changed slightly in Rails. It&amp;#39;s moved from assets to it&amp;#39;s own folder because of webpacker. I&amp;#39;m such a newbie so I don&amp;#39;t know much about why that&amp;#39;s important. I&amp;#39;m pretty sure I have to add the &amp;quot;mail_form&amp;quot;, &amp;quot;simple_form&amp;quot;, &amp;quot;jquery-rails&amp;quot;, and I guess &amp;quot;bootstrap_sass&amp;quot; gems. Now I&amp;#39;m just wondering what to do next.&lt;/p&gt;\n\n&lt;p&gt;Older ways I see are basically adding a controller for the contact form. However, I my form will just be at the bottom of my homepage. Most of my portfolio will just be on this page, so when people are done looking at it, I want them to be able to just scroll to the bottom and see the form there, then message me if that&amp;#39;s how they want to contact me quickly.  If someone could point me in the right direction of doing this for Rails 6, I&amp;#39;d appreciate it!&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "link_flair_template_id": "eef0b990-adfb-11e4-8e15-22000b3889f5", "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "iky3nn", "is_robot_indexable": true, "report_reasons": null, "author": "kylespartan626", "discussion_type": null, "num_comments": 3, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/iky3nn/email_from_contact_form_in_rails_6/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/iky3nn/email_from_contact_form_in_rails_6/", "subreddit_subscribers": 45780, "created_utc": 1599012647.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "Hello everybody\n\nAny good resources for building APIs with Rails and MongoDB? \n\nPS: I have tried a course on Coursera but it was outdated.", "author_fullname": "t2_1sraw2f1", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "building REST APIs with Rails and MongoDB", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_ikw6q5", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 0.75, "author_flair_background_color": null, "subreddit_type": "public", "ups": 2, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 2, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1599034163.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;Hello everybody&lt;/p&gt;\n\n&lt;p&gt;Any good resources for building APIs with Rails and MongoDB? &lt;/p&gt;\n\n&lt;p&gt;PS: I have tried a course on Coursera but it was outdated.&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": true, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "ikw6q5", "is_robot_indexable": true, "report_reasons": null, "author": "kerolloz", "discussion_type": null, "num_comments": 1, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/ikw6q5/building_rest_apis_with_rails_and_mongodb/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/ikw6q5/building_rest_apis_with_rails_and_mongodb/", "subreddit_subscribers": 45780, "created_utc": 1599005363.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "For Concern does this make more sense in rails 4.2.1\n\n    included do\n      after_commit :update_actions, on: :update\n      after_commit :create_action, on: :create\n    end\n    \n    def update_actions\n    end\n    \n    def create_action\n    end\n\nOr does this make more sense?\n\n    included do\n      after_commit :after_commit_actions, on: [:create, :update]\n    end\n    \n    def after_commit_actions\n     if(send(:transaction_include_any_action?, [:create]))\n       //do create thigs\n     elsif (send(:transaction_include_any_action?, [:update])\n       do update things\n     end\n\nI'm more favored towards the first approach because\n\n1. it doesn't look like we are checking the same thing two times.\n2. \\`transaction\\_include\\_any\\_action\\` protected and in rails 5.1.7 it is being converted to a private method. I don't feel good about calling protected and private methods like this.\n\nWhat do you think about both approaches? Which is better and why?", "author_fullname": "t2_7m8mv9r7", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "transaction_include_any_action or use :create or :update in model concern", "link_flair_richtext": [{"e": "text", "t": "Question"}], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": "question", "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_ikmq5u", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 1.0, "author_flair_background_color": null, "subreddit_type": "public", "ups": 8, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": "Question", "can_mod_post": false, "score": 8, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": 1598975847.0, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1599004093.0, "link_flair_type": "richtext", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": true, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;For Concern does this make more sense in rails 4.2.1&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;included do\n  after_commit :update_actions, on: :update\n  after_commit :create_action, on: :create\nend\n\ndef update_actions\nend\n\ndef create_action\nend\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Or does this make more sense?&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;included do\n  after_commit :after_commit_actions, on: [:create, :update]\nend\n\ndef after_commit_actions\n if(send(:transaction_include_any_action?, [:create]))\n   //do create thigs\n elsif (send(:transaction_include_any_action?, [:update])\n   do update things\n end\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;I&amp;#39;m more favored towards the first approach because&lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;it doesn&amp;#39;t look like we are checking the same thing two times.&lt;/li&gt;\n&lt;li&gt;`transaction_include_any_action` protected and in rails 5.1.7 it is being converted to a private method. I don&amp;#39;t feel good about calling protected and private methods like this.&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;p&gt;What do you think about both approaches? Which is better and why?&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "link_flair_template_id": "fdfc6806-aea7-11e4-bf37-22000b3889f5", "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "ikmq5u", "is_robot_indexable": true, "report_reasons": null, "author": "prosperousdoggo", "discussion_type": null, "num_comments": 2, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/ikmq5u/transaction_include_any_action_or_use_create_or/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/ikmq5u/transaction_include_any_action_or_use_create_or/", "subreddit_subscribers": 45780, "created_utc": 1598975293.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "Hi! Just came across this weird problem:\n\n`will_paginate` will always return `nil`, no matter what.\n\nMy controller action looks like this:\n\n```ruby\n        page = params[:page].to_i\n        if page &lt; 1\n            page = 1\n        end\n\n        @posts = Post.paginate page: page, per_page: 10\n```\n\nAnd the corresponding view like this:\n\n```erb\n&lt;%= will_paginate @posts %&gt;\n```\n\nHowever, the pagination is not rendered. Trying to inspect it through the CLI gives me `\"nil\"`. Why is that? How can I fix it? Thank you!\n\nEdit: I know, will paginate is not part of Rails, but it's commonly used with it, so I thought I might give it a try here. Sorry if it doesn't really fit", "author_fullname": "t2_1vwkt1vm", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "will_paginate returns nil", "link_flair_richtext": [{"e": "text", "t": "Help"}], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": "help", "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_iklzzl", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 1.0, "author_flair_background_color": null, "subreddit_type": "public", "ups": 4, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": "Help", "can_mod_post": false, "score": 4, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1599001749.0, "link_flair_type": "richtext", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;Hi! Just came across this weird problem:&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;will_paginate&lt;/code&gt; will always return &lt;code&gt;nil&lt;/code&gt;, no matter what.&lt;/p&gt;\n\n&lt;p&gt;My controller action looks like this:&lt;/p&gt;\n\n&lt;p&gt;```ruby\n        page = params[:page].to_i\n        if page &amp;lt; 1\n            page = 1\n        end&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;    @posts = Post.paginate page: page, per_page: 10\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;```&lt;/p&gt;\n\n&lt;p&gt;And the corresponding view like this:&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;erb\n&amp;lt;%= will_paginate @posts %&amp;gt;\n&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;However, the pagination is not rendered. Trying to inspect it through the CLI gives me &lt;code&gt;&amp;quot;nil&amp;quot;&lt;/code&gt;. Why is that? How can I fix it? Thank you!&lt;/p&gt;\n\n&lt;p&gt;Edit: I know, will paginate is not part of Rails, but it&amp;#39;s commonly used with it, so I thought I might give it a try here. Sorry if it doesn&amp;#39;t really fit&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "link_flair_template_id": "eef0b990-adfb-11e4-8e15-22000b3889f5", "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "iklzzl", "is_robot_indexable": true, "report_reasons": null, "author": "ImMaaxYT", "discussion_type": null, "num_comments": 7, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/iklzzl/will_paginate_returns_nil/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/iklzzl/will_paginate_returns_nil/", "subreddit_subscribers": 45780, "created_utc": 1598972949.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "I have a text file with 150 million unique records.\n\nEach record has two columns: (1) a string and (2) an integer. The string has a unique label, and the integer is that label's value.\n\nThere's only a single query available: return the integer value for any given label.\n\nThis text file is regenerated every 72 hours. ~90% of the data remains the same across regeneration, but this regeneration is controlled by a 3rd party. I simply get a new text file every 72 hours.\n\nI'm exploring multiple architectures for exposing this text file as an API. I want to use Ruby/Rails.\n\nIdeally, a query shouldn't take more than 100 - 500ms (per read).\n\n## Architecture 1\n\n* Store the text file on disk. Query the text file. Cache queries in memory.\n* Pros: Simple implementation. Easy to update data.\n* Cons: Uncached read queries are slow.\n\n## Architecture 2\n\n* Parse the text file into a traditional/NoSQL database, with each line treated as a database record/document. Run queries against the database.\n* Pros: Seems like the common architecture.\n* Cons: Updating 150m database records is slow and seems wasteful, especially since ~90% of records remain the same.\n\n## Architecture 3\n\n* Use Redis or in-memory database to store the 5GB text file. Run queries against the in-memory database.\n* Pros: Fast queries. Easy to update data.\n* Cons: Expensive.\n\n## Architecture 4\n\n* Use ElasticSearch to query records.\n* Pros: ElasticSearch is designed for search.\n* Cons: ElasticSearch may be overkill for such simple queries.\n\nQuestions:\n\n* Can you suggest any other approaches (if any)?\n\n* Are there additional pros/cons I overlooked?\n\n* What is the most \"common\" architecture for balancing cost/performance when trying to produce fast reads against a data store (of 150m) records that change?", "author_fullname": "t2_5bq6gv45", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "API architecture design for fast reads with 150 million records", "link_flair_richtext": [{"e": "text", "t": "Architecture"}], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": "architecture", "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_ik0sbe", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 0.92, "author_flair_background_color": null, "subreddit_type": "public", "ups": 20, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": "Architecture", "can_mod_post": false, "score": 20, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1598918777.0, "link_flair_type": "richtext", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;I have a text file with 150 million unique records.&lt;/p&gt;\n\n&lt;p&gt;Each record has two columns: (1) a string and (2) an integer. The string has a unique label, and the integer is that label&amp;#39;s value.&lt;/p&gt;\n\n&lt;p&gt;There&amp;#39;s only a single query available: return the integer value for any given label.&lt;/p&gt;\n\n&lt;p&gt;This text file is regenerated every 72 hours. ~90% of the data remains the same across regeneration, but this regeneration is controlled by a 3rd party. I simply get a new text file every 72 hours.&lt;/p&gt;\n\n&lt;p&gt;I&amp;#39;m exploring multiple architectures for exposing this text file as an API. I want to use Ruby/Rails.&lt;/p&gt;\n\n&lt;p&gt;Ideally, a query shouldn&amp;#39;t take more than 100 - 500ms (per read).&lt;/p&gt;\n\n&lt;h2&gt;Architecture 1&lt;/h2&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Store the text file on disk. Query the text file. Cache queries in memory.&lt;/li&gt;\n&lt;li&gt;Pros: Simple implementation. Easy to update data.&lt;/li&gt;\n&lt;li&gt;Cons: Uncached read queries are slow.&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;h2&gt;Architecture 2&lt;/h2&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Parse the text file into a traditional/NoSQL database, with each line treated as a database record/document. Run queries against the database.&lt;/li&gt;\n&lt;li&gt;Pros: Seems like the common architecture.&lt;/li&gt;\n&lt;li&gt;Cons: Updating 150m database records is slow and seems wasteful, especially since ~90% of records remain the same.&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;h2&gt;Architecture 3&lt;/h2&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Use Redis or in-memory database to store the 5GB text file. Run queries against the in-memory database.&lt;/li&gt;\n&lt;li&gt;Pros: Fast queries. Easy to update data.&lt;/li&gt;\n&lt;li&gt;Cons: Expensive.&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;h2&gt;Architecture 4&lt;/h2&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Use ElasticSearch to query records.&lt;/li&gt;\n&lt;li&gt;Pros: ElasticSearch is designed for search.&lt;/li&gt;\n&lt;li&gt;Cons: ElasticSearch may be overkill for such simple queries.&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;Questions:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;&lt;p&gt;Can you suggest any other approaches (if any)?&lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;Are there additional pros/cons I overlooked?&lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;What is the most &amp;quot;common&amp;quot; architecture for balancing cost/performance when trying to produce fast reads against a data store (of 150m) records that change?&lt;/p&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "link_flair_template_id": "3deb1b86-b085-11e4-ac4b-22000b3c80d5", "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "ik0sbe", "is_robot_indexable": true, "report_reasons": null, "author": "_jmstfv", "discussion_type": null, "num_comments": 30, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/ik0sbe/api_architecture_design_for_fast_reads_with_150/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/ik0sbe/api_architecture_design_for_fast_reads_with_150/", "subreddit_subscribers": 45780, "created_utc": 1598889977.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "Some quick context. Long time, small, Rails development team. We've done the same thing the same way for many years. Usually admin based monolith with public facing API. Most of our work is pure business management.\n\nNow we have a project that would have several hundred \"public\" uses but really the main crux of the project is still the backend business side for the \"staff\" users. Sort of a CRM+CMS + Event management. (Nothing we haven't done before in parts.) Public would access their personal history and sign-up for events. But the admin side has lots of additional business functions that would not be exposed to other users.\n\nMy team is small and our views seem narrow on this, so I'm reaching out for ideas.\n\nI see a couple of options:\n\n**All-In**: There is no real admin side, just expose more options for logged in users who have permissions.\n\n**Admin First**: Since this project is mostly about the business domain start here and add client access (public side) on top of it. Scoping /admin\n\n**The Core**: Build the core functionality into a gem that is shared by a Public Engine, and an Admin Engine. (sort of the Spree concept)\n\nWe've done each of these with success, granted the Engine route has the most friction for our team. We are used to a \"dashboard\" concept for admin, so the All-In approach is uncomfortable but also exciting to explore. Our fallback has always been Admin First.\n\n&amp;#x200B;\n\nWhat other approaches am I missing?", "author_fullname": "t2_hbskq", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Starting a new app... public and admin best approach for today?", "link_flair_richtext": [{"e": "text", "t": "Question"}], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": "question", "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_ik0ikq", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 1.0, "author_flair_background_color": null, "subreddit_type": "public", "ups": 11, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": "Question", "can_mod_post": false, "score": 11, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1598917949.0, "link_flair_type": "richtext", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;Some quick context. Long time, small, Rails development team. We&amp;#39;ve done the same thing the same way for many years. Usually admin based monolith with public facing API. Most of our work is pure business management.&lt;/p&gt;\n\n&lt;p&gt;Now we have a project that would have several hundred &amp;quot;public&amp;quot; uses but really the main crux of the project is still the backend business side for the &amp;quot;staff&amp;quot; users. Sort of a CRM+CMS + Event management. (Nothing we haven&amp;#39;t done before in parts.) Public would access their personal history and sign-up for events. But the admin side has lots of additional business functions that would not be exposed to other users.&lt;/p&gt;\n\n&lt;p&gt;My team is small and our views seem narrow on this, so I&amp;#39;m reaching out for ideas.&lt;/p&gt;\n\n&lt;p&gt;I see a couple of options:&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;All-In&lt;/strong&gt;: There is no real admin side, just expose more options for logged in users who have permissions.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;Admin First&lt;/strong&gt;: Since this project is mostly about the business domain start here and add client access (public side) on top of it. Scoping /admin&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;The Core&lt;/strong&gt;: Build the core functionality into a gem that is shared by a Public Engine, and an Admin Engine. (sort of the Spree concept)&lt;/p&gt;\n\n&lt;p&gt;We&amp;#39;ve done each of these with success, granted the Engine route has the most friction for our team. We are used to a &amp;quot;dashboard&amp;quot; concept for admin, so the All-In approach is uncomfortable but also exciting to explore. Our fallback has always been Admin First.&lt;/p&gt;\n\n&lt;p&gt;&amp;#x200B;&lt;/p&gt;\n\n&lt;p&gt;What other approaches am I missing?&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "link_flair_template_id": "fdfc6806-aea7-11e4-bf37-22000b3889f5", "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "ik0ikq", "is_robot_indexable": true, "report_reasons": null, "author": "PeltedVenom", "discussion_type": null, "num_comments": 9, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/ik0ikq/starting_a_new_app_public_and_admin_best_approach/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/ik0ikq/starting_a_new_app_public_and_admin_best_approach/", "subreddit_subscribers": 45780, "created_utc": 1598889149.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "Hello,\n\nI am building a small personal finance app.  I have models Accounts and Transactions.\n\nI want to build a feature to transfer money between 2 accounts, by way of creating the appropriate transactions.\n\nI have created a \"transfer\" controller action in my AccountController, and added some attr\\_accessors to my Account model:\n\n```ruby\n  attr_accessor :transfer_to_account\n  attr_accessor :transfer_amount\n```\n\nI'm getting stuck on how to build the form for this, because I want the fields to be:\n\n* transfer_to_account (which should auto populate a dropdown based on all of the user's accounts)\n* transfer_amount\n\nThe \"Source_account\" will be pre-determined based on which account the user is in. Then the controller action should create a debit transaction in the source account (fk), and a credit transaction in the target account (fk).\n\nThe part I'm stuck on is how to \na. specify the form_for code and fields\nb. populate a dropdown with all current accounts (to use in the \"transfer_to_account\" field\n\nThanks!", "author_fullname": "t2_7hcmo", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "How to create a form that saves 2 records for the same model?", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_ijva9y", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 1.0, "author_flair_background_color": null, "subreddit_type": "public", "ups": 8, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 8, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1598897152.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;Hello,&lt;/p&gt;\n\n&lt;p&gt;I am building a small personal finance app.  I have models Accounts and Transactions.&lt;/p&gt;\n\n&lt;p&gt;I want to build a feature to transfer money between 2 accounts, by way of creating the appropriate transactions.&lt;/p&gt;\n\n&lt;p&gt;I have created a &amp;quot;transfer&amp;quot; controller action in my AccountController, and added some attr_accessors to my Account model:&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;ruby\n  attr_accessor :transfer_to_account\n  attr_accessor :transfer_amount\n&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;I&amp;#39;m getting stuck on how to build the form for this, because I want the fields to be:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;transfer_to_account (which should auto populate a dropdown based on all of the user&amp;#39;s accounts)&lt;/li&gt;\n&lt;li&gt;transfer_amount&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;The &amp;quot;Source_account&amp;quot; will be pre-determined based on which account the user is in. Then the controller action should create a debit transaction in the source account (fk), and a credit transaction in the target account (fk).&lt;/p&gt;\n\n&lt;p&gt;The part I&amp;#39;m stuck on is how to \na. specify the form_for code and fields\nb. populate a dropdown with all current accounts (to use in the &amp;quot;transfer_to_account&amp;quot; field&lt;/p&gt;\n\n&lt;p&gt;Thanks!&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "ijva9y", "is_robot_indexable": true, "report_reasons": null, "author": "odinsride", "discussion_type": null, "num_comments": 7, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/ijva9y/how_to_create_a_form_that_saves_2_records_for_the/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/ijva9y/how_to_create_a_form_that_saves_2_records_for_the/", "subreddit_subscribers": 45780, "created_utc": 1598868352.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "Hi, guys. I have some question about how  Devise authentication works. The question are in the sequence:\n\n- I have notice that the session cookie changes for every new request. From what I have read, Devise doesn't hold session on server, only on client. If so, why the session cookie is changing constantly? If no value is saved on server, Devise has no way to invalidate a session key - only changing the password would invalidate the session key. Or there a session saved on server for every login user? \n\n- Based on the question above, and if there are no session saved on server, how is it considerate different than the main approach (using only a access token passed on header bearer token) of OAuth protocol? Or it isn't?", "author_fullname": "t2_teraqqc", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "How does Devise authentication works?", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_ijke0i", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 0.89, "author_flair_background_color": null, "subreddit_type": "public", "ups": 19, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 19, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1598849913.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;Hi, guys. I have some question about how  Devise authentication works. The question are in the sequence:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;&lt;p&gt;I have notice that the session cookie changes for every new request. From what I have read, Devise doesn&amp;#39;t hold session on server, only on client. If so, why the session cookie is changing constantly? If no value is saved on server, Devise has no way to invalidate a session key - only changing the password would invalidate the session key. Or there a session saved on server for every login user? &lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;Based on the question above, and if there are no session saved on server, how is it considerate different than the main approach (using only a access token passed on header bearer token) of OAuth protocol? Or it isn&amp;#39;t?&lt;/p&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "ijke0i", "is_robot_indexable": true, "report_reasons": null, "author": "weedisallIlike", "discussion_type": null, "num_comments": 22, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/ijke0i/how_does_devise_authentication_works/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/ijke0i/how_does_devise_authentication_works/", "subreddit_subscribers": 45780, "created_utc": 1598821113.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "I just merged a PR that changed a few things:\n\n  - An application feature (setting up attachments on a model via ActiveStorage)\n  - Upgrading to `Rails 6` from `Rails 5.2`\n  - Update circle ci config to use newer version of bundler\n\nI suspect it was upgrading to Rails 6. Heroku says the app has been deployed successfully but I get a 503.\n\nWhen I try loading the app, I get the 503 and I see my logs have:\n\n\n    2020-08-30T20:00:42.831439+00:00 heroku[web.1]: Starting process with command `bundle exec puma -C config/puma.rb`\n    2020-08-30T20:00:46.014937+00:00 app[web.1]: [heroku-exec] Starting\n    2020-08-30T20:00:46.991311+00:00 app[web.1]: [4] Puma starting in cluster mode...\n    2020-08-30T20:00:46.992288+00:00 app[web.1]: [4] * Version 3.12.6 (ruby 2.5.1-p57), codename: Llamas in Pajamas\n    2020-08-30T20:00:46.992345+00:00 app[web.1]: [4] * Min threads: 5, max threads: 5\n    2020-08-30T20:00:46.992391+00:00 app[web.1]: [4] * Environment: production\n    2020-08-30T20:00:46.992475+00:00 app[web.1]: [4] * Process workers: 2\n    2020-08-30T20:00:46.992519+00:00 app[web.1]: [4] * Preloading application\n    2020-08-30T20:00:54.223474+00:00 app[web.1]: [4] * Listening on tcp://0.0.0.0:16562\n    2020-08-30T20:00:54.223966+00:00 app[web.1]: [4] ! WARNING: Detected 1 Thread(s) started in app boot:\n    2020-08-30T20:00:54.224082+00:00 app[web.1]: [4] ! #&lt;Thread:0x000055b93cbae460@/app/vendor/bundle/ruby/2.5.0/bundler/gems/rails-7101489293ec/activerecord/lib/active_record/connection_adapters/abstract/connection_pool.rb:332 sleep&gt; - /app/vendor/bundle/ruby/2.5.0/bundler/gems/rails-7101489293ec/activerecord/lib/active_record/connection_adapters/abstract/connection_pool.rb:335:in `sleep'\n    2020-08-30T20:00:54.224251+00:00 app[web.1]: [4] Use Ctrl-C to stop\n    2020-08-30T20:00:54.288824+00:00 app[web.1]: /app/vendor/bundle/ruby/2.5.0/bundler/gems/rails-7101489293ec/activesupport/lib/active_support/fork_tracker.rb:8:in `fork': super: no superclass method `fork' for #&lt;Puma::Cluster:0x000055b93a8947b8&gt; (NoMethodError)\n    2020-08-30T20:00:54.288894+00:00 app[web.1]: from /app/vendor/bundle/ruby/2.5.0/gems/puma-3.12.6/lib/puma/cluster.rb:139:in `block in spawn_workers'\n    2020-08-30T20:00:54.288964+00:00 app[web.1]: from /app/vendor/bundle/ruby/2.5.0/gems/puma-3.12.6/lib/puma/cluster.rb:135:in `times'\n    2020-08-30T20:00:54.288987+00:00 app[web.1]: from /app/vendor/bundle/ruby/2.5.0/gems/puma-3.12.6/lib/puma/cluster.rb:135:in `spawn_workers'\n    2020-08-30T20:00:54.289009+00:00 app[web.1]: from /app/vendor/bundle/ruby/2.5.0/gems/puma-3.12.6/lib/puma/cluster.rb:468:in `run'\n    2020-08-30T20:00:54.289028+00:00 app[web.1]: from /app/vendor/bundle/ruby/2.5.0/gems/puma-3.12.6/lib/puma/launcher.rb:186:in `run'\n    2020-08-30T20:00:54.289047+00:00 app[web.1]: from /app/vendor/bundle/ruby/2.5.0/gems/puma-3.12.6/lib/puma/cli.rb:80:in `run'\n    2020-08-30T20:00:54.289066+00:00 app[web.1]: from /app/vendor/bundle/ruby/2.5.0/gems/puma-3.12.6/bin/puma:10:in `&lt;top (required)&gt;'\n    2020-08-30T20:00:54.289084+00:00 app[web.1]: from /app/vendor/bundle/ruby/2.5.0/bin/puma:23:in `load'\n    2020-08-30T20:00:54.289103+00:00 app[web.1]: from /app/vendor/bundle/ruby/2.5.0/bin/puma:23:in `&lt;main&gt;'\n    \n\nI had also seen this similar error message earlier:\n    \n    2020-08-30T19:07:18.337125+00:00 app[web.1]: [4] * Listening on tcp://0.0.0.0:47116\n    2020-08-30T19:07:18.337144+00:00 app[web.1]: [4] ! WARNING: Detected 1 Thread(s) started in app boot:\n    2020-08-30T19:07:18.337184+00:00 app[web.1]: [4] ! #&lt;Thread:0x0000562860d548a8@/app/vendor/bundle/ruby/2.5.0/bundler/gems/rails-7101489293ec/activerecord/lib/active_record/connection_adapters/abstract/connection_pool.rb:332 sleep&gt; - /app/vendor/bundle/ruby/2.5.0/bundler/gems/rails-7101489293ec/activerecord/lib/active_record/connection_adapters/abstract/connection_pool.rb:335:in `sleep'\n    2020-08-30T19:07:18.337270+00:00 app[web.1]: [4] Use Ctrl-C to stop\n    2020-08-30T19:07:18.337560+00:00 app[web.1]: bundler: failed to load command: puma (/app/vendor/bundle/ruby/2.5.0/bin/puma)\n    2020-08-30T19:07:18.388901+00:00 app[web.1]: NoMethodError: super: no superclass method `fork' for #&lt;Puma::Cluster:0x000056285cc5b928&gt;\n    2020-08-30T19:07:18.388903+00:00 app[web.1]: /app/vendor/bundle/ruby/2.5.0/bundler/gems/rails-7101489293ec/activesupport/lib/active_support/fork_tracker.rb:8:in `fork'\n    2020-08-30T19:07:18.388904+00:00 app[web.1]: /app/vendor/bundle/ruby/2.5.0/gems/puma-3.12.6/lib/puma/cluster.rb:139:in `block in spawn_workers'\n    2020-08-30T19:07:18.388904+00:00 app[web.1]: /app/vendor/bundle/ruby/2.5.0/gems/puma-3.12.6/lib/puma/cluster.rb:135:in `times'\n    2020-08-30T19:07:18.388904+00:00 app[web.1]: /app/vendor/bundle/ruby/2.5.0/gems/puma-3.12.6/lib/puma/cluster.rb:135:in `spawn_workers'\n    2020-08-30T19:07:18.388905+00:00 app[web.1]: /app/vendor/bundle/ruby/2.5.0/gems/puma-3.12.6/lib/puma/cluster.rb:468:in `run'\n    2020-08-30T19:07:18.388905+00:00 app[web.1]: /app/vendor/bundle/ruby/2.5.0/gems/puma-3.12.6/lib/puma/launcher.rb:186:in `run'\n    2020-08-30T19:07:18.388906+00:00 app[web.1]: /app/vendor/bundle/ruby/2.5.0/gems/puma-3.12.6/lib/puma/cli.rb:80:in `run'\n    2020-08-30T19:07:18.388906+00:00 app[web.1]: /app/vendor/bundle/ruby/2.5.0/gems/puma-3.12.6/bin/puma:10:in `&lt;top (required)&gt;'\n    2020-08-30T19:07:18.388907+00:00 app[web.1]: /app/vendor/bundle/ruby/2.5.0/bin/puma:23:in `load'\n    2020-08-30T19:07:18.388907+00:00 app[web.1]: /app/vendor/bundle/ruby/2.5.0/bin/puma:23:in `&lt;top (required)&gt;'\n    2020-08-30T19:07:18.492258+00:00 heroku[web.1]: Process exited with status 1\n    2020-08-30T19:07:18.547903+00:00 heroku[web.1]: State changed from starting to crashed\n    \n\nWhich changed to the first block pasted above when I [set an env var like mentioned in this post](https://github.com/puma/puma/issues/1572#issuecomment-411288015).\n\nWhen I load up a rails console, I see the ActiveStorage migration that was a part of this PR went out successfully because I see `service_name` available on `ActiveStorage::Blob` :\n\n    [3] pry(main)&gt; ActiveStorage::Blob\n    =&gt; ActiveStorage::Blob(id: integer, key: string, filename: string, content_type: string, metadata: text, byte_size: integer, checksum: string, created_at: datetime, service_name: string)", "author_fullname": "t2_4ekhk", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Heroku - Deploy Broken", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_ijjqgk", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 0.81, "author_flair_background_color": null, "subreddit_type": "public", "ups": 3, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 3, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1598847720.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;I just merged a PR that changed a few things:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;An application feature (setting up attachments on a model via ActiveStorage)&lt;/li&gt;\n&lt;li&gt;Upgrading to &lt;code&gt;Rails 6&lt;/code&gt; from &lt;code&gt;Rails 5.2&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;Update circle ci config to use newer version of bundler&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;I suspect it was upgrading to Rails 6. Heroku says the app has been deployed successfully but I get a 503.&lt;/p&gt;\n\n&lt;p&gt;When I try loading the app, I get the 503 and I see my logs have:&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;2020-08-30T20:00:42.831439+00:00 heroku[web.1]: Starting process with command `bundle exec puma -C config/puma.rb`\n2020-08-30T20:00:46.014937+00:00 app[web.1]: [heroku-exec] Starting\n2020-08-30T20:00:46.991311+00:00 app[web.1]: [4] Puma starting in cluster mode...\n2020-08-30T20:00:46.992288+00:00 app[web.1]: [4] * Version 3.12.6 (ruby 2.5.1-p57), codename: Llamas in Pajamas\n2020-08-30T20:00:46.992345+00:00 app[web.1]: [4] * Min threads: 5, max threads: 5\n2020-08-30T20:00:46.992391+00:00 app[web.1]: [4] * Environment: production\n2020-08-30T20:00:46.992475+00:00 app[web.1]: [4] * Process workers: 2\n2020-08-30T20:00:46.992519+00:00 app[web.1]: [4] * Preloading application\n2020-08-30T20:00:54.223474+00:00 app[web.1]: [4] * Listening on tcp://0.0.0.0:16562\n2020-08-30T20:00:54.223966+00:00 app[web.1]: [4] ! WARNING: Detected 1 Thread(s) started in app boot:\n2020-08-30T20:00:54.224082+00:00 app[web.1]: [4] ! #&amp;lt;Thread:0x000055b93cbae460@/app/vendor/bundle/ruby/2.5.0/bundler/gems/rails-7101489293ec/activerecord/lib/active_record/connection_adapters/abstract/connection_pool.rb:332 sleep&amp;gt; - /app/vendor/bundle/ruby/2.5.0/bundler/gems/rails-7101489293ec/activerecord/lib/active_record/connection_adapters/abstract/connection_pool.rb:335:in `sleep&amp;#39;\n2020-08-30T20:00:54.224251+00:00 app[web.1]: [4] Use Ctrl-C to stop\n2020-08-30T20:00:54.288824+00:00 app[web.1]: /app/vendor/bundle/ruby/2.5.0/bundler/gems/rails-7101489293ec/activesupport/lib/active_support/fork_tracker.rb:8:in `fork&amp;#39;: super: no superclass method `fork&amp;#39; for #&amp;lt;Puma::Cluster:0x000055b93a8947b8&amp;gt; (NoMethodError)\n2020-08-30T20:00:54.288894+00:00 app[web.1]: from /app/vendor/bundle/ruby/2.5.0/gems/puma-3.12.6/lib/puma/cluster.rb:139:in `block in spawn_workers&amp;#39;\n2020-08-30T20:00:54.288964+00:00 app[web.1]: from /app/vendor/bundle/ruby/2.5.0/gems/puma-3.12.6/lib/puma/cluster.rb:135:in `times&amp;#39;\n2020-08-30T20:00:54.288987+00:00 app[web.1]: from /app/vendor/bundle/ruby/2.5.0/gems/puma-3.12.6/lib/puma/cluster.rb:135:in `spawn_workers&amp;#39;\n2020-08-30T20:00:54.289009+00:00 app[web.1]: from /app/vendor/bundle/ruby/2.5.0/gems/puma-3.12.6/lib/puma/cluster.rb:468:in `run&amp;#39;\n2020-08-30T20:00:54.289028+00:00 app[web.1]: from /app/vendor/bundle/ruby/2.5.0/gems/puma-3.12.6/lib/puma/launcher.rb:186:in `run&amp;#39;\n2020-08-30T20:00:54.289047+00:00 app[web.1]: from /app/vendor/bundle/ruby/2.5.0/gems/puma-3.12.6/lib/puma/cli.rb:80:in `run&amp;#39;\n2020-08-30T20:00:54.289066+00:00 app[web.1]: from /app/vendor/bundle/ruby/2.5.0/gems/puma-3.12.6/bin/puma:10:in `&amp;lt;top (required)&amp;gt;&amp;#39;\n2020-08-30T20:00:54.289084+00:00 app[web.1]: from /app/vendor/bundle/ruby/2.5.0/bin/puma:23:in `load&amp;#39;\n2020-08-30T20:00:54.289103+00:00 app[web.1]: from /app/vendor/bundle/ruby/2.5.0/bin/puma:23:in `&amp;lt;main&amp;gt;&amp;#39;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;I had also seen this similar error message earlier:&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;2020-08-30T19:07:18.337125+00:00 app[web.1]: [4] * Listening on tcp://0.0.0.0:47116\n2020-08-30T19:07:18.337144+00:00 app[web.1]: [4] ! WARNING: Detected 1 Thread(s) started in app boot:\n2020-08-30T19:07:18.337184+00:00 app[web.1]: [4] ! #&amp;lt;Thread:0x0000562860d548a8@/app/vendor/bundle/ruby/2.5.0/bundler/gems/rails-7101489293ec/activerecord/lib/active_record/connection_adapters/abstract/connection_pool.rb:332 sleep&amp;gt; - /app/vendor/bundle/ruby/2.5.0/bundler/gems/rails-7101489293ec/activerecord/lib/active_record/connection_adapters/abstract/connection_pool.rb:335:in `sleep&amp;#39;\n2020-08-30T19:07:18.337270+00:00 app[web.1]: [4] Use Ctrl-C to stop\n2020-08-30T19:07:18.337560+00:00 app[web.1]: bundler: failed to load command: puma (/app/vendor/bundle/ruby/2.5.0/bin/puma)\n2020-08-30T19:07:18.388901+00:00 app[web.1]: NoMethodError: super: no superclass method `fork&amp;#39; for #&amp;lt;Puma::Cluster:0x000056285cc5b928&amp;gt;\n2020-08-30T19:07:18.388903+00:00 app[web.1]: /app/vendor/bundle/ruby/2.5.0/bundler/gems/rails-7101489293ec/activesupport/lib/active_support/fork_tracker.rb:8:in `fork&amp;#39;\n2020-08-30T19:07:18.388904+00:00 app[web.1]: /app/vendor/bundle/ruby/2.5.0/gems/puma-3.12.6/lib/puma/cluster.rb:139:in `block in spawn_workers&amp;#39;\n2020-08-30T19:07:18.388904+00:00 app[web.1]: /app/vendor/bundle/ruby/2.5.0/gems/puma-3.12.6/lib/puma/cluster.rb:135:in `times&amp;#39;\n2020-08-30T19:07:18.388904+00:00 app[web.1]: /app/vendor/bundle/ruby/2.5.0/gems/puma-3.12.6/lib/puma/cluster.rb:135:in `spawn_workers&amp;#39;\n2020-08-30T19:07:18.388905+00:00 app[web.1]: /app/vendor/bundle/ruby/2.5.0/gems/puma-3.12.6/lib/puma/cluster.rb:468:in `run&amp;#39;\n2020-08-30T19:07:18.388905+00:00 app[web.1]: /app/vendor/bundle/ruby/2.5.0/gems/puma-3.12.6/lib/puma/launcher.rb:186:in `run&amp;#39;\n2020-08-30T19:07:18.388906+00:00 app[web.1]: /app/vendor/bundle/ruby/2.5.0/gems/puma-3.12.6/lib/puma/cli.rb:80:in `run&amp;#39;\n2020-08-30T19:07:18.388906+00:00 app[web.1]: /app/vendor/bundle/ruby/2.5.0/gems/puma-3.12.6/bin/puma:10:in `&amp;lt;top (required)&amp;gt;&amp;#39;\n2020-08-30T19:07:18.388907+00:00 app[web.1]: /app/vendor/bundle/ruby/2.5.0/bin/puma:23:in `load&amp;#39;\n2020-08-30T19:07:18.388907+00:00 app[web.1]: /app/vendor/bundle/ruby/2.5.0/bin/puma:23:in `&amp;lt;top (required)&amp;gt;&amp;#39;\n2020-08-30T19:07:18.492258+00:00 heroku[web.1]: Process exited with status 1\n2020-08-30T19:07:18.547903+00:00 heroku[web.1]: State changed from starting to crashed\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Which changed to the first block pasted above when I &lt;a href=\"https://github.com/puma/puma/issues/1572#issuecomment-411288015\"&gt;set an env var like mentioned in this post&lt;/a&gt;.&lt;/p&gt;\n\n&lt;p&gt;When I load up a rails console, I see the ActiveStorage migration that was a part of this PR went out successfully because I see &lt;code&gt;service_name&lt;/code&gt; available on &lt;code&gt;ActiveStorage::Blob&lt;/code&gt; :&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;[3] pry(main)&amp;gt; ActiveStorage::Blob\n=&amp;gt; ActiveStorage::Blob(id: integer, key: string, filename: string, content_type: string, metadata: text, byte_size: integer, checksum: string, created_at: datetime, service_name: string)\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "ijjqgk", "is_robot_indexable": true, "report_reasons": null, "author": "VashyTheNexian", "discussion_type": null, "num_comments": 16, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/ijjqgk/heroku_deploy_broken/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/ijjqgk/heroku_deploy_broken/", "subreddit_subscribers": 45780, "created_utc": 1598818920.0, "num_crossposts": 0, "media": null, "is_video": false}}], "after": "t3_ijjqgk", "before": null}}