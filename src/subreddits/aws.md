# aws
## [1][PSA: Don't take remote exams offered by Pearson Vue (OnVue) for AWS Certifications!](https://www.reddit.com/r/aws/comments/fscq7v/psa_dont_take_remote_exams_offered_by_pearson_vue/)
- url: https://www.reddit.com/r/aws/comments/fscq7v/psa_dont_take_remote_exams_offered_by_pearson_vue/
---
I can't describe how horrible this experience was.  I am not looking forward to how much work I am going to have to do to get my money back.  This is not my first AWS certification (I have SA Pro and DevOps Pro), but is my first online exam.  The short version is: Don't take AWS exams via the Pearson Vue at home option, even if it is offered.  AWS should not be offering this option as I can attest it is a waste of time.  Ironically, AWS would have us use their services because of their high availability and scaling but apparently they don't ask their test partners to do the same!

It started off easy enough: I passed the initial 'checks' as it confirmed my internet speed, camera access, and microphone access.  I started the process 15+ minutes before my scheduled exam time.  I was able to open the app, it again verified the technical requirements passed, and I went to the next screen.  It asked for my cell phone number and texted me a link which opened a web page which requested to take my photo.  Easy enough.  I did that and then the web page went to 'Uploading and verifying photo'.  A spinning circle started spinning.  This is where my test experience ended, but not where the poor experience ends.  I tried again, and then a third time.  Same experience.  As I write this, I left it on that page and the spinning is continuing.  This screen has been spinning for no less than 45 minutes.  At 8 minutes before my scheduled exam, I tried finding the help link.  A chat window opened, and I waited, and waited, and waited.  Still waiting as I write this.  My chat window has been open for 52 minutes and still no one to help.  Every two minutes I get ' All agents are currently assisting others. Thank you for your patience.' written in the window.  OK - what next?  They make it harder to find, but I got a phone number I can call.  I tried calling that.  Busy signal.  For the next 20 minutes I called back and back, busy signal.  Finally, I got it to actually pick up, but of course no human yet.  No estimate of time to when I can be helped.  They don't even have nice elevator music to listen to.  Who knows when I will be able to talk to someone.  This has been an exceedingly poor experience.

If you value your time, please do yourself a favor and don't even attempt a online exam with Pearson.  I worked hard to prepare for this exam and rescheduled things to fit around it.  Now, I will have to do that all again.

u/jeffbarr Is this the experience AWS is hoping to get with their testing partners?  This was a waste of my time and money.  Amazon should seriously reevaluate the quality of their test partners.  I understand everyone is trying to deal with all the issues.  However, if you can't offer quality testing, then please don't offer the option at all.  It isn't respectful to people's time.  Pearson is well aware of their capacity and if it isn't up to requirements, they shouldn't be scheduling test slots.

&amp;#x200B;

*EDIT*: A few background items I didn't initially share that may be relevant for others.  For the computer, I used a fully up to date Windows 10 laptop.  The laptop itself is only about a month old and is in near pristine condition.  Other than a few applications like Office, there is barely anything installed on there yet.  I used a hard wired connection, like recommended by Pearson through the use of a usb-to-ethernet adapter.  I have Verizon FIOS (980Mbps/840Mbps) and did do a speed test way after it was apparent this would not work.  I forget the exact numbers, but I was still pulling in hundreds of Mbps in both directions, despite everyone being at home and using the USB ethernet adapater which does put a cap on my speed, but I can't see hundreds of Mbps not being sufficent by orders of magnatude.  My phone is a fully up to date pixel 3.  I tried using my wifi in my house first (connected through FIOS), and then using the phone 4G LTE connection.  I can't imagine this was caused by my end.  It seemed like Pearson's servers were jammed at that point in time.

&amp;#x200B;

*Update*: After a LONG time, I did eventually get someone to answer from Pearson.  They were nice enough and were fairly easy to understand, although there was an delay echo introduced where whatever I said was echoed a quarter to half second later which was annoying, but bearable.  I was just happy she was able to hear me.  She said she could open a trouble ticket for me, but as it was well over an hour trying to get through to any human and doubtful it was on my side, I just told her to schedule me for the next available in person appointment.  She had to cancel my appointment and then rebook it as their sub-standard system wouldn't let her reschedule an at home appointment to at a location.  Surprisingly, she said they would refund my money and rebook me.  It was painless enough, but when I asked for a reference number on the refund, all she could do is say I 'should' get an email.  Perhaps unsurprisingly, this morning I see a fully posted charge for the rescheduled exam, but no sign of a refund.  Sigh.  I will give it a few days and then start this process over.

For what its worth, people should IGNORE the advice that the web chat is the fastest way of getting help.  Find the phone number and dial and re-dial it as fast as you can when you get a busy signal.  Despite the fact that it took 20+ minutes to get the number to pickup (and was 'waiting' 20 minutes less from the phones point of view) I got a faster response from someone on the phone.  Web based chat never picked up, even though I left it running during my entire phone conversation.

*Update #2*: It took two more days than the charge, but the refund did show up in the correct amount on my credit card.  I am actually quite surprised.
## [2][Build quickly a system that filter CloudWatch logs and post to Slack, via CDK.](https://www.reddit.com/r/aws/comments/hkx584/build_quickly_a_system_that_filter_cloudwatch/)
- url: https://github.com/TheDesignium/cdk-log-notifier
---

## [3][EC2 Spot Instances](https://www.reddit.com/r/aws/comments/hkwnf7/ec2_spot_instances/)
- url: https://www.reddit.com/r/aws/comments/hkwnf7/ec2_spot_instances/
---
Completely new to AWS so sorry if this question sounds elementary. I was just reading up about spot instances and from what I understand the prices fluctuates based on supply and demand and depending if your max price doesn't fall below the spot price you'll be continuing to get service. With this drawback I understand that it's a much cheaper option than on-demand however, can a spot price ever exceed the on demand price?

Let's say on demand price is .10/hour, wouldn't it make sense to set MAX price to exactly .10 for your spot so that youll be guaranteed service all the time? Everyone else's objective is to spend less than on demand

Hope the question made sense.
## [4][AWS purchasing with credit](https://www.reddit.com/r/aws/comments/hl2u79/aws_purchasing_with_credit/)
- url: https://www.reddit.com/r/aws/comments/hl2u79/aws_purchasing_with_credit/
---
Hello all,

Is it available to buy a reserved or saving plan EC2 instance with full upfront with my credit ?
## [5][I want to point my godaddy domain to lightsail instance. Three red marked ones are currently pointing to GoDaddy address. Do I have to change all the three ones or just the one with @ in the A record as suggested in tutorials??](https://www.reddit.com/r/aws/comments/hkz1qo/i_want_to_point_my_godaddy_domain_to_lightsail/)
- url: https://i.redd.it/xe56hloofs851.png
---

## [6][SNS &gt; AWS Lambda asyncronous invocation queue vs. SNS &gt; SQS &gt; Lambda](https://www.reddit.com/r/aws/comments/hkpwj9/sns_aws_lambda_asyncronous_invocation_queue_vs/)
- url: https://www.reddit.com/r/aws/comments/hkpwj9/sns_aws_lambda_asyncronous_invocation_queue_vs/
---
Looking for some help regarding Lambda, asyncronous invocations and whether I need to bother with SQS.

# Background

This archhitecture relies solely on Lambda's asyncronous invocation mechanism as described here:

[https://docs.aws.amazon.com/lambda/latest/dg/invocation-async.html](https://docs.aws.amazon.com/lambda/latest/dg/invocation-async.html)

I have a collector function that is invoked once a minute and fetches a batch of data that can vary drastically in size (tens of of KB to potentially 1-3MB). The data contains a JSON array containing one-to-many records. The collector function segregates these records and publishes them individually to an SNS topic.

A parser function is subribed the SNS topic and has a concurrency limit of 3. SNS asynchronously invokes the parser function per record, meaning that the built-in AWS managed Lambda asyncronous queue begins to fill up as the instances of the parser maxes out at 3. The Lambda queueing mechanism initiates retries at incremental backups when throttling occurs, until the invocation request can be processed by the parser function.

It is imperitive that a record does not get lost during this process as they can not be resurrected. I will be using dead letter queues where needed to ensure they ultimately  end up somewhere in case of error.

Testing this method out resulted in no lost invocation. Everything worked as expected. Lambda reported hundreds of throttle responses but I'm relying on this to initiate the Lambda retry behaviour for async invocations. My understanding is that this behaivour is effectively the same as that which I'd have to develop and initiate myself if I wanted to retry consuming a message coming from SQS.

# Questions

**1. Is the built-in AWS managed Lambda asyncronous queue reliable?**

The parser could be subject to a consistent load of 200+ invocations per minute for prelonged periods so I want to understand whether the Lambda queue can handle this as sensibly as an SQS service. The main part that concerns me is this statement:

&gt;Even if your function doesn't return an error, it's possible for it to receive the same event from Lambda multiple times because the queue itself is eventually consistent. If the function can't keep up with incoming events, events might also be deleted from the queue without being sent to the function. Ensure that your function code gracefully handles duplicate events, and that you have enough concurrency available to handle all invocations.

This implies that an incoming invocation may just be *deleted* out of thin air. Also in my implementation I'm relying on the retry behaviour when a function throttles.

**2. When a message is in the queue, what happens when the message timeout is exceeded?**

I can't find a difinitive answer but I'm hoping the message would end up in the configured dead letter queue.

**3. Why would I use SQS over the Lambda queue when SQS presents other problems?**

See the articles below for arguments against SQS. Overpulling (described in the second link) is of particular concern:

[https://lumigo.io/blog/sqs-and-lambda-the-missing-guide-on-failure-modes/](https://lumigo.io/blog/sqs-and-lambda-the-missing-guide-on-failure-modes/)

[https://medium.com/@zaccharles/lambda-concurrency-limits-and-sqs-triggers-dont-mix-well-sometimes-eb23d90122e0](https://medium.com/@zaccharles/lambda-concurrency-limits-and-sqs-triggers-dont-mix-well-sometimes-eb23d90122e0)

I can't find any articles or discussions of how the Lambda queue performs.

**Thanks for reading!**
## [7][How to Enforce Tagging?](https://www.reddit.com/r/aws/comments/hkrdnr/how_to_enforce_tagging/)
- url: https://www.reddit.com/r/aws/comments/hkrdnr/how_to_enforce_tagging/
---
This is something that seems so simple, yet I haven't found any way to do it despite some searching.

I want to prevent any user in my Organization from creating any taggable resource unless it has certain tags. (Currently, I want AppName and Environment.) 

I thought tagging policy would be a way to do it, but I created a tagging policy requiring an AppName tag for all available resource types, yet AWS allowed me to instantiate an EC2 instance without the AppName tag.

Is there really no easy way to tell AWS, "don't let users create instances unless the instance have this tag?"
## [8][CI/CD with CDK](https://www.reddit.com/r/aws/comments/hkwwsm/cicd_with_cdk/)
- url: https://www.reddit.com/r/aws/comments/hkwwsm/cicd_with_cdk/
---
Howdy folks,

We are currently looking at CDK and we are thinking about different ways to integrate it with CI/CD (CodeCommit / Build / Pipeline/ Deploy).    The focus is on our "server less" applications (CloudFront, s3, API Gateway, Lambda, etc....) ... One scenario that we are looking at is to run cdk synth in Codebuild and then apply the resulting template.  It would look something like

&amp;#x200B;

* A CDK Stack that define the pipeline itself.  It would be deployed using "cdk deploy" and would probably don't change much. It  would include the following stages:

1. CodeCommit as source repo
2. CodeBuild for Lambda's -&gt; Artifacts to S3
3. CodeBuild for FrontEnd -&gt; Artifacts to S3
4. CodeBuild that run "cdk synth" for the AppStack (see below) -&gt; Artifact (cf template) to S3
5. CodePipeline Action (CloudFormationCreateReplaceChangeSetAction) (the cf template created at step 4)
6. CodePipeline Approval
7. CodePipeline Action (CloudFormationExecuteChangeSetAction)
8. CodePipeline Action (S3DeployAction) (to deploy the Frontend Artifact to S3)

&amp;#x200B;

* A "AppStack" CDK stack that actually defines all the ressources:  

1. That stack would be "synthesize" by the Pipeline each time there's a code change (either to the AppStack CDK code itself or the Frontend / Lambda code) 

&amp;#x200B;

The idea is similar to this example: [https://docs.aws.amazon.com/cdk/latest/guide/codepipeline\_example.html](https://docs.aws.amazon.com/cdk/latest/guide/codepipeline_example.html)

One of the limitation is that we can't use (as far as I know) "asset" so we have to use the special "lambda.Code.fromCfnParameters()" as explained in the doc above.  Deploying the FrontEnd to a S3 bucket from the CodePipeline Artifact would also required an additional step (step 8 in the example above).

Does anyone is using a similar solution?  Any gotcha that we should be aware of?

I would also love to hear how you implemented CI/CD using CDK.  Any ideas are welcome!

PS: We looked into the App Delivery construct but as of now, it's cannot do cross-account and that's a requirements for us.  I skipped that details in the step above to keep it simple.

Thanks!
## [9][AWS Lambda for Monitoring and Alerting](https://www.reddit.com/r/aws/comments/hkz9kr/aws_lambda_for_monitoring_and_alerting/)
- url: https://www.reddit.com/r/aws/comments/hkz9kr/aws_lambda_for_monitoring_and_alerting/
---
I am a Site Reliability Engineer at my company, and I have been asked to setup and create alerts on a variety of things

I need to create alerts related to events in AWS, such as: AWS Batch failures, unhealthy target groups, checking whether a file exists in S3 at a specific time of the day, whether certain EC2 instances are healthy, etc

&amp;#x200B;

I also need to create several alerts that would execute a query on our production databases (MSSQL and MongoDB), and trigger if certain conditions are met based on the results of the query. Some of these  alerts would run at specific times of the day, but others might run somewhat constantly, like every 5-10 minutes.

&amp;#x200B;

I believe I am able to create all of these alerts as Python scripts. (Side note: these alerts will call on the PagerDuty API to send alerts to whoever is on call)

&amp;#x200B;

I also have to create automated emails that send at specific times of day

&amp;#x200B;

My question is, should I use AWS Lambda to run and execute these scripts? I am not completely sure if these Python scripts I'm planning to make are a good use case for AWS Lambda. If not, could I ask what might be a better alternative? Is it better I set up the scripts on some server and have them run there?
## [10][aws lake formation - ingesting from msk (kafka)](https://www.reddit.com/r/aws/comments/hkvqi0/aws_lake_formation_ingesting_from_msk_kafka/)
- url: https://www.reddit.com/r/aws/comments/hkvqi0/aws_lake_formation_ingesting_from_msk_kafka/
---
I came across this aws blog post where it mentions that msk can be used for data ingestion but I can't find any documentation on this. When I try to add a data source for ingestion it doesn't five me the MSK option. anyone has experience working with lake formation and msk?

https://aws.amazon.com/blogs/big-data/building-securing-and-managing-data-lakes-with-aws-lake-formation/
## [11][AWS setup for multiple accounts (engineering firm)](https://www.reddit.com/r/aws/comments/hkobe8/aws_setup_for_multiple_accounts_engineering_firm/)
- url: https://www.reddit.com/r/aws/comments/hkobe8/aws_setup_for_multiple_accounts_engineering_firm/
---
Hi everyone,

&amp;#x200B;

My engineering firm is looking to consolidate our cloud workflows into one platform with AWS. We have several clients and would like to bill them directly for the resources used on their projects rather than paying for the resources ourselves upfront and billing them later.

&amp;#x200B;

I know that AWS has the 'organisations' feature - is this the correct way to do this? Is there a better way to organize resources by clients? Any other tips you might have for this kind of set up? We are growing rapidly so would like to get a hold of this before it becomes a bigger problem.

&amp;#x200B;

Thanks!
