{"kind": "Listing", "data": {"modhash": "", "dist": 11, "children": [{"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "In this thread you can showcase your personal pet project to other redditors.\n\nNeed help with a specific problem or just wanna have some extra eyeballs on your code? Ask away!\n\nA suggested format to get you started:\n\n1. **Name of your project**\n2. **A short description**\n3. **Application stack**\n4. **Link to Live app**\n5. **Link to GitHub**\n6. **You experience level**\n7. **Other information or areas that you would like advice on**\n\n\u00a0\n\n^(Many thanks to Kritnc for getting the ball rolling.)", "author_fullname": "t2_6l4z3", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Personal Projects - Show off your own project and/or ask for advice", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_igyvm1", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 1.0, "author_flair_background_color": null, "subreddit_type": "public", "ups": 3, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 3, "approved_by": null, "author_premium": true, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1598477561.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;In this thread you can showcase your personal pet project to other redditors.&lt;/p&gt;\n\n&lt;p&gt;Need help with a specific problem or just wanna have some extra eyeballs on your code? Ask away!&lt;/p&gt;\n\n&lt;p&gt;A suggested format to get you started:&lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;&lt;strong&gt;Name of your project&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;A short description&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Application stack&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Link to Live app&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Link to GitHub&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;You experience level&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Other information or areas that you would like advice on&lt;/strong&gt;&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;p&gt;\u00a0&lt;/p&gt;\n\n&lt;p&gt;&lt;sup&gt;Many thanks to Kritnc for getting the ball rolling.&lt;/sup&gt;&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": true, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": "moderator", "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "igyvm1", "is_robot_indexable": true, "report_reasons": null, "author": "AutoModerator", "discussion_type": null, "num_comments": 5, "send_replies": false, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/igyvm1/personal_projects_show_off_your_own_project_andor/", "parent_whitelist_status": "all_ads", "stickied": true, "url": "https://www.reddit.com/r/rails/comments/igyvm1/personal_projects_show_off_your_own_project_andor/", "subreddit_subscribers": 45759, "created_utc": 1598448761.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "I have a text file with 150 million unique records.\n\nEach record has two columns: (1) a string and (2) an integer. The string has a unique label, and the integer is that label's value.\n\nThere's only a single query available: return the integer value for any given label.\n\nThis text file is regenerated every 72 hours. ~90% of the data remains the same across regeneration, but this regeneration is controlled by a 3rd party. I simply get a new text file every 72 hours.\n\nI'm exploring multiple architectures for exposing this text file as an API. I want to use Ruby/Rails.\n\nIdeally, a query shouldn't take more than 100 - 500ms (per read).\n\n## Architecture 1\n\n* Store the text file on disk. Query the text file. Cache queries in memory.\n* Pros: Simple implementation. Easy to update data.\n* Cons: Uncached read queries are slow.\n\n## Architecture 2\n\n* Parse the text file into a traditional/NoSQL database, with each line treated as a database record/document. Run queries against the database.\n* Pros: Seems like the common architecture.\n* Cons: Updating 150m database records is slow and seems wasteful, especially since ~90% of records remain the same.\n\n## Architecture 3\n\n* Use Redis or in-memory database to store the 5GB text file. Run queries against the in-memory database.\n* Pros: Fast queries. Easy to update data.\n* Cons: Expensive.\n\n## Architecture 4\n\n* Use ElasticSearch to query records.\n* Pros: ElasticSearch is designed for search.\n* Cons: ElasticSearch may be overkill for such simple queries.\n\nQuestions:\n\n* Can you suggest any other approaches (if any)?\n\n* Are there additional pros/cons I overlooked?\n\n* What is the most \"common\" architecture for balancing cost/performance when trying to produce fast reads against a data store (of 150m) records that change?", "author_fullname": "t2_5bq6gv45", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "API architecture design for fast reads with 150 million records", "link_flair_richtext": [{"e": "text", "t": "Architecture"}], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": "architecture", "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_ik0sbe", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 0.97, "author_flair_background_color": null, "subreddit_type": "public", "ups": 21, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": "Architecture", "can_mod_post": false, "score": 21, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1598918777.0, "link_flair_type": "richtext", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;I have a text file with 150 million unique records.&lt;/p&gt;\n\n&lt;p&gt;Each record has two columns: (1) a string and (2) an integer. The string has a unique label, and the integer is that label&amp;#39;s value.&lt;/p&gt;\n\n&lt;p&gt;There&amp;#39;s only a single query available: return the integer value for any given label.&lt;/p&gt;\n\n&lt;p&gt;This text file is regenerated every 72 hours. ~90% of the data remains the same across regeneration, but this regeneration is controlled by a 3rd party. I simply get a new text file every 72 hours.&lt;/p&gt;\n\n&lt;p&gt;I&amp;#39;m exploring multiple architectures for exposing this text file as an API. I want to use Ruby/Rails.&lt;/p&gt;\n\n&lt;p&gt;Ideally, a query shouldn&amp;#39;t take more than 100 - 500ms (per read).&lt;/p&gt;\n\n&lt;h2&gt;Architecture 1&lt;/h2&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Store the text file on disk. Query the text file. Cache queries in memory.&lt;/li&gt;\n&lt;li&gt;Pros: Simple implementation. Easy to update data.&lt;/li&gt;\n&lt;li&gt;Cons: Uncached read queries are slow.&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;h2&gt;Architecture 2&lt;/h2&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Parse the text file into a traditional/NoSQL database, with each line treated as a database record/document. Run queries against the database.&lt;/li&gt;\n&lt;li&gt;Pros: Seems like the common architecture.&lt;/li&gt;\n&lt;li&gt;Cons: Updating 150m database records is slow and seems wasteful, especially since ~90% of records remain the same.&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;h2&gt;Architecture 3&lt;/h2&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Use Redis or in-memory database to store the 5GB text file. Run queries against the in-memory database.&lt;/li&gt;\n&lt;li&gt;Pros: Fast queries. Easy to update data.&lt;/li&gt;\n&lt;li&gt;Cons: Expensive.&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;h2&gt;Architecture 4&lt;/h2&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Use ElasticSearch to query records.&lt;/li&gt;\n&lt;li&gt;Pros: ElasticSearch is designed for search.&lt;/li&gt;\n&lt;li&gt;Cons: ElasticSearch may be overkill for such simple queries.&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;Questions:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;&lt;p&gt;Can you suggest any other approaches (if any)?&lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;Are there additional pros/cons I overlooked?&lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;What is the most &amp;quot;common&amp;quot; architecture for balancing cost/performance when trying to produce fast reads against a data store (of 150m) records that change?&lt;/p&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "link_flair_template_id": "3deb1b86-b085-11e4-ac4b-22000b3c80d5", "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "ik0sbe", "is_robot_indexable": true, "report_reasons": null, "author": "_jmstfv", "discussion_type": null, "num_comments": 27, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/ik0sbe/api_architecture_design_for_fast_reads_with_150/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/ik0sbe/api_architecture_design_for_fast_reads_with_150/", "subreddit_subscribers": 45759, "created_utc": 1598889977.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "Some quick context. Long time, small, Rails development team. We've done the same thing the same way for many years. Usually admin based monolith with public facing API. Most of our work is pure business management.\n\nNow we have a project that would have several hundred \"public\" uses but really the main crux of the project is still the backend business side for the \"staff\" users. Sort of a CRM+CMS + Event management. (Nothing we haven't done before in parts.) Public would access their personal history and sign-up for events. But the admin side has lots of additional business functions that would not be exposed to other users.\n\nMy team is small and our views seem narrow on this, so I'm reaching out for ideas.\n\nI see a couple of options:\n\n**All-In**: There is no real admin side, just expose more options for logged in users who have permissions.\n\n**Admin First**: Since this project is mostly about the business domain start here and add client access (public side) on top of it. Scoping /admin\n\n**The Core**: Build the core functionality into a gem that is shared by a Public Engine, and an Admin Engine. (sort of the Spree concept)\n\nWe've done each of these with success, granted the Engine route has the most friction for our team. We are used to a \"dashboard\" concept for admin, so the All-In approach is uncomfortable but also exciting to explore. Our fallback has always been Admin First.\n\n&amp;#x200B;\n\nWhat other approaches am I missing?", "author_fullname": "t2_hbskq", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Starting a new app... public and admin best approach for today?", "link_flair_richtext": [{"e": "text", "t": "Question"}], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": "question", "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_ik0ikq", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 1.0, "author_flair_background_color": null, "subreddit_type": "public", "ups": 11, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": "Question", "can_mod_post": false, "score": 11, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1598917949.0, "link_flair_type": "richtext", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;Some quick context. Long time, small, Rails development team. We&amp;#39;ve done the same thing the same way for many years. Usually admin based monolith with public facing API. Most of our work is pure business management.&lt;/p&gt;\n\n&lt;p&gt;Now we have a project that would have several hundred &amp;quot;public&amp;quot; uses but really the main crux of the project is still the backend business side for the &amp;quot;staff&amp;quot; users. Sort of a CRM+CMS + Event management. (Nothing we haven&amp;#39;t done before in parts.) Public would access their personal history and sign-up for events. But the admin side has lots of additional business functions that would not be exposed to other users.&lt;/p&gt;\n\n&lt;p&gt;My team is small and our views seem narrow on this, so I&amp;#39;m reaching out for ideas.&lt;/p&gt;\n\n&lt;p&gt;I see a couple of options:&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;All-In&lt;/strong&gt;: There is no real admin side, just expose more options for logged in users who have permissions.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;Admin First&lt;/strong&gt;: Since this project is mostly about the business domain start here and add client access (public side) on top of it. Scoping /admin&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;The Core&lt;/strong&gt;: Build the core functionality into a gem that is shared by a Public Engine, and an Admin Engine. (sort of the Spree concept)&lt;/p&gt;\n\n&lt;p&gt;We&amp;#39;ve done each of these with success, granted the Engine route has the most friction for our team. We are used to a &amp;quot;dashboard&amp;quot; concept for admin, so the All-In approach is uncomfortable but also exciting to explore. Our fallback has always been Admin First.&lt;/p&gt;\n\n&lt;p&gt;&amp;#x200B;&lt;/p&gt;\n\n&lt;p&gt;What other approaches am I missing?&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": true, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "link_flair_template_id": "fdfc6806-aea7-11e4-bf37-22000b3889f5", "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "ik0ikq", "is_robot_indexable": true, "report_reasons": null, "author": "PeltedVenom", "discussion_type": null, "num_comments": 7, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/ik0ikq/starting_a_new_app_public_and_admin_best_approach/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/ik0ikq/starting_a_new_app_public_and_admin_best_approach/", "subreddit_subscribers": 45759, "created_utc": 1598889149.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "Hello,\n\nI am building a small personal finance app.  I have models Accounts and Transactions.\n\nI want to build a feature to transfer money between 2 accounts, by way of creating the appropriate transactions.\n\nI have created a \"transfer\" controller action in my AccountController, and added some attr\\_accessors to my Account model:\n\n```ruby\n  attr_accessor :transfer_to_account\n  attr_accessor :transfer_amount\n```\n\nI'm getting stuck on how to build the form for this, because I want the fields to be:\n\n* transfer_to_account (which should auto populate a dropdown based on all of the user's accounts)\n* transfer_amount\n\nThe \"Source_account\" will be pre-determined based on which account the user is in. Then the controller action should create a debit transaction in the source account (fk), and a credit transaction in the target account (fk).\n\nThe part I'm stuck on is how to \na. specify the form_for code and fields\nb. populate a dropdown with all current accounts (to use in the \"transfer_to_account\" field\n\nThanks!", "author_fullname": "t2_7hcmo", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "How to create a form that saves 2 records for the same model?", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_ijva9y", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 1.0, "author_flair_background_color": null, "subreddit_type": "public", "ups": 9, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 9, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1598897152.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;Hello,&lt;/p&gt;\n\n&lt;p&gt;I am building a small personal finance app.  I have models Accounts and Transactions.&lt;/p&gt;\n\n&lt;p&gt;I want to build a feature to transfer money between 2 accounts, by way of creating the appropriate transactions.&lt;/p&gt;\n\n&lt;p&gt;I have created a &amp;quot;transfer&amp;quot; controller action in my AccountController, and added some attr_accessors to my Account model:&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;ruby\n  attr_accessor :transfer_to_account\n  attr_accessor :transfer_amount\n&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;I&amp;#39;m getting stuck on how to build the form for this, because I want the fields to be:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;transfer_to_account (which should auto populate a dropdown based on all of the user&amp;#39;s accounts)&lt;/li&gt;\n&lt;li&gt;transfer_amount&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;The &amp;quot;Source_account&amp;quot; will be pre-determined based on which account the user is in. Then the controller action should create a debit transaction in the source account (fk), and a credit transaction in the target account (fk).&lt;/p&gt;\n\n&lt;p&gt;The part I&amp;#39;m stuck on is how to \na. specify the form_for code and fields\nb. populate a dropdown with all current accounts (to use in the &amp;quot;transfer_to_account&amp;quot; field&lt;/p&gt;\n\n&lt;p&gt;Thanks!&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "ijva9y", "is_robot_indexable": true, "report_reasons": null, "author": "odinsride", "discussion_type": null, "num_comments": 7, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/ijva9y/how_to_create_a_form_that_saves_2_records_for_the/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/ijva9y/how_to_create_a_form_that_saves_2_records_for_the/", "subreddit_subscribers": 45759, "created_utc": 1598868352.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "Hi, guys. I have some question about how  Devise authentication works. The question are in the sequence:\n\n- I have notice that the session cookie changes for every new request. From what I have read, Devise doesn't hold session on server, only on client. If so, why the session cookie is changing constantly? If no value is saved on server, Devise has no way to invalidate a session key - only changing the password would invalidate the session key. Or there a session saved on server for every login user? \n\n- Based on the question above, and if there are no session saved on server, how is it considerate different than the main approach (using only a access token passed on header bearer token) of OAuth protocol? Or it isn't?", "author_fullname": "t2_teraqqc", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "How does Devise authentication works?", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_ijke0i", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 0.91, "author_flair_background_color": null, "subreddit_type": "public", "ups": 19, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 19, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1598849913.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;Hi, guys. I have some question about how  Devise authentication works. The question are in the sequence:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;&lt;p&gt;I have notice that the session cookie changes for every new request. From what I have read, Devise doesn&amp;#39;t hold session on server, only on client. If so, why the session cookie is changing constantly? If no value is saved on server, Devise has no way to invalidate a session key - only changing the password would invalidate the session key. Or there a session saved on server for every login user? &lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;Based on the question above, and if there are no session saved on server, how is it considerate different than the main approach (using only a access token passed on header bearer token) of OAuth protocol? Or it isn&amp;#39;t?&lt;/p&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "ijke0i", "is_robot_indexable": true, "report_reasons": null, "author": "weedisallIlike", "discussion_type": null, "num_comments": 22, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/ijke0i/how_does_devise_authentication_works/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/ijke0i/how_does_devise_authentication_works/", "subreddit_subscribers": 45759, "created_utc": 1598821113.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "I just merged a PR that changed a few things:\n\n  - An application feature (setting up attachments on a model via ActiveStorage)\n  - Upgrading to `Rails 6` from `Rails 5.2`\n  - Update circle ci config to use newer version of bundler\n\nI suspect it was upgrading to Rails 6. Heroku says the app has been deployed successfully but I get a 503.\n\nWhen I try loading the app, I get the 503 and I see my logs have:\n\n\n    2020-08-30T20:00:42.831439+00:00 heroku[web.1]: Starting process with command `bundle exec puma -C config/puma.rb`\n    2020-08-30T20:00:46.014937+00:00 app[web.1]: [heroku-exec] Starting\n    2020-08-30T20:00:46.991311+00:00 app[web.1]: [4] Puma starting in cluster mode...\n    2020-08-30T20:00:46.992288+00:00 app[web.1]: [4] * Version 3.12.6 (ruby 2.5.1-p57), codename: Llamas in Pajamas\n    2020-08-30T20:00:46.992345+00:00 app[web.1]: [4] * Min threads: 5, max threads: 5\n    2020-08-30T20:00:46.992391+00:00 app[web.1]: [4] * Environment: production\n    2020-08-30T20:00:46.992475+00:00 app[web.1]: [4] * Process workers: 2\n    2020-08-30T20:00:46.992519+00:00 app[web.1]: [4] * Preloading application\n    2020-08-30T20:00:54.223474+00:00 app[web.1]: [4] * Listening on tcp://0.0.0.0:16562\n    2020-08-30T20:00:54.223966+00:00 app[web.1]: [4] ! WARNING: Detected 1 Thread(s) started in app boot:\n    2020-08-30T20:00:54.224082+00:00 app[web.1]: [4] ! #&lt;Thread:0x000055b93cbae460@/app/vendor/bundle/ruby/2.5.0/bundler/gems/rails-7101489293ec/activerecord/lib/active_record/connection_adapters/abstract/connection_pool.rb:332 sleep&gt; - /app/vendor/bundle/ruby/2.5.0/bundler/gems/rails-7101489293ec/activerecord/lib/active_record/connection_adapters/abstract/connection_pool.rb:335:in `sleep'\n    2020-08-30T20:00:54.224251+00:00 app[web.1]: [4] Use Ctrl-C to stop\n    2020-08-30T20:00:54.288824+00:00 app[web.1]: /app/vendor/bundle/ruby/2.5.0/bundler/gems/rails-7101489293ec/activesupport/lib/active_support/fork_tracker.rb:8:in `fork': super: no superclass method `fork' for #&lt;Puma::Cluster:0x000055b93a8947b8&gt; (NoMethodError)\n    2020-08-30T20:00:54.288894+00:00 app[web.1]: from /app/vendor/bundle/ruby/2.5.0/gems/puma-3.12.6/lib/puma/cluster.rb:139:in `block in spawn_workers'\n    2020-08-30T20:00:54.288964+00:00 app[web.1]: from /app/vendor/bundle/ruby/2.5.0/gems/puma-3.12.6/lib/puma/cluster.rb:135:in `times'\n    2020-08-30T20:00:54.288987+00:00 app[web.1]: from /app/vendor/bundle/ruby/2.5.0/gems/puma-3.12.6/lib/puma/cluster.rb:135:in `spawn_workers'\n    2020-08-30T20:00:54.289009+00:00 app[web.1]: from /app/vendor/bundle/ruby/2.5.0/gems/puma-3.12.6/lib/puma/cluster.rb:468:in `run'\n    2020-08-30T20:00:54.289028+00:00 app[web.1]: from /app/vendor/bundle/ruby/2.5.0/gems/puma-3.12.6/lib/puma/launcher.rb:186:in `run'\n    2020-08-30T20:00:54.289047+00:00 app[web.1]: from /app/vendor/bundle/ruby/2.5.0/gems/puma-3.12.6/lib/puma/cli.rb:80:in `run'\n    2020-08-30T20:00:54.289066+00:00 app[web.1]: from /app/vendor/bundle/ruby/2.5.0/gems/puma-3.12.6/bin/puma:10:in `&lt;top (required)&gt;'\n    2020-08-30T20:00:54.289084+00:00 app[web.1]: from /app/vendor/bundle/ruby/2.5.0/bin/puma:23:in `load'\n    2020-08-30T20:00:54.289103+00:00 app[web.1]: from /app/vendor/bundle/ruby/2.5.0/bin/puma:23:in `&lt;main&gt;'\n    \n\nI had also seen this similar error message earlier:\n    \n    2020-08-30T19:07:18.337125+00:00 app[web.1]: [4] * Listening on tcp://0.0.0.0:47116\n    2020-08-30T19:07:18.337144+00:00 app[web.1]: [4] ! WARNING: Detected 1 Thread(s) started in app boot:\n    2020-08-30T19:07:18.337184+00:00 app[web.1]: [4] ! #&lt;Thread:0x0000562860d548a8@/app/vendor/bundle/ruby/2.5.0/bundler/gems/rails-7101489293ec/activerecord/lib/active_record/connection_adapters/abstract/connection_pool.rb:332 sleep&gt; - /app/vendor/bundle/ruby/2.5.0/bundler/gems/rails-7101489293ec/activerecord/lib/active_record/connection_adapters/abstract/connection_pool.rb:335:in `sleep'\n    2020-08-30T19:07:18.337270+00:00 app[web.1]: [4] Use Ctrl-C to stop\n    2020-08-30T19:07:18.337560+00:00 app[web.1]: bundler: failed to load command: puma (/app/vendor/bundle/ruby/2.5.0/bin/puma)\n    2020-08-30T19:07:18.388901+00:00 app[web.1]: NoMethodError: super: no superclass method `fork' for #&lt;Puma::Cluster:0x000056285cc5b928&gt;\n    2020-08-30T19:07:18.388903+00:00 app[web.1]: /app/vendor/bundle/ruby/2.5.0/bundler/gems/rails-7101489293ec/activesupport/lib/active_support/fork_tracker.rb:8:in `fork'\n    2020-08-30T19:07:18.388904+00:00 app[web.1]: /app/vendor/bundle/ruby/2.5.0/gems/puma-3.12.6/lib/puma/cluster.rb:139:in `block in spawn_workers'\n    2020-08-30T19:07:18.388904+00:00 app[web.1]: /app/vendor/bundle/ruby/2.5.0/gems/puma-3.12.6/lib/puma/cluster.rb:135:in `times'\n    2020-08-30T19:07:18.388904+00:00 app[web.1]: /app/vendor/bundle/ruby/2.5.0/gems/puma-3.12.6/lib/puma/cluster.rb:135:in `spawn_workers'\n    2020-08-30T19:07:18.388905+00:00 app[web.1]: /app/vendor/bundle/ruby/2.5.0/gems/puma-3.12.6/lib/puma/cluster.rb:468:in `run'\n    2020-08-30T19:07:18.388905+00:00 app[web.1]: /app/vendor/bundle/ruby/2.5.0/gems/puma-3.12.6/lib/puma/launcher.rb:186:in `run'\n    2020-08-30T19:07:18.388906+00:00 app[web.1]: /app/vendor/bundle/ruby/2.5.0/gems/puma-3.12.6/lib/puma/cli.rb:80:in `run'\n    2020-08-30T19:07:18.388906+00:00 app[web.1]: /app/vendor/bundle/ruby/2.5.0/gems/puma-3.12.6/bin/puma:10:in `&lt;top (required)&gt;'\n    2020-08-30T19:07:18.388907+00:00 app[web.1]: /app/vendor/bundle/ruby/2.5.0/bin/puma:23:in `load'\n    2020-08-30T19:07:18.388907+00:00 app[web.1]: /app/vendor/bundle/ruby/2.5.0/bin/puma:23:in `&lt;top (required)&gt;'\n    2020-08-30T19:07:18.492258+00:00 heroku[web.1]: Process exited with status 1\n    2020-08-30T19:07:18.547903+00:00 heroku[web.1]: State changed from starting to crashed\n    \n\nWhich changed to the first block pasted above when I [set an env var like mentioned in this post](https://github.com/puma/puma/issues/1572#issuecomment-411288015).\n\nWhen I load up a rails console, I see the ActiveStorage migration that was a part of this PR went out successfully because I see `service_name` available on `ActiveStorage::Blob` :\n\n    [3] pry(main)&gt; ActiveStorage::Blob\n    =&gt; ActiveStorage::Blob(id: integer, key: string, filename: string, content_type: string, metadata: text, byte_size: integer, checksum: string, created_at: datetime, service_name: string)", "author_fullname": "t2_4ekhk", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Heroku - Deploy Broken", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_ijjqgk", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 1.0, "author_flair_background_color": null, "subreddit_type": "public", "ups": 4, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 4, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1598847720.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;I just merged a PR that changed a few things:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;An application feature (setting up attachments on a model via ActiveStorage)&lt;/li&gt;\n&lt;li&gt;Upgrading to &lt;code&gt;Rails 6&lt;/code&gt; from &lt;code&gt;Rails 5.2&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;Update circle ci config to use newer version of bundler&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;I suspect it was upgrading to Rails 6. Heroku says the app has been deployed successfully but I get a 503.&lt;/p&gt;\n\n&lt;p&gt;When I try loading the app, I get the 503 and I see my logs have:&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;2020-08-30T20:00:42.831439+00:00 heroku[web.1]: Starting process with command `bundle exec puma -C config/puma.rb`\n2020-08-30T20:00:46.014937+00:00 app[web.1]: [heroku-exec] Starting\n2020-08-30T20:00:46.991311+00:00 app[web.1]: [4] Puma starting in cluster mode...\n2020-08-30T20:00:46.992288+00:00 app[web.1]: [4] * Version 3.12.6 (ruby 2.5.1-p57), codename: Llamas in Pajamas\n2020-08-30T20:00:46.992345+00:00 app[web.1]: [4] * Min threads: 5, max threads: 5\n2020-08-30T20:00:46.992391+00:00 app[web.1]: [4] * Environment: production\n2020-08-30T20:00:46.992475+00:00 app[web.1]: [4] * Process workers: 2\n2020-08-30T20:00:46.992519+00:00 app[web.1]: [4] * Preloading application\n2020-08-30T20:00:54.223474+00:00 app[web.1]: [4] * Listening on tcp://0.0.0.0:16562\n2020-08-30T20:00:54.223966+00:00 app[web.1]: [4] ! WARNING: Detected 1 Thread(s) started in app boot:\n2020-08-30T20:00:54.224082+00:00 app[web.1]: [4] ! #&amp;lt;Thread:0x000055b93cbae460@/app/vendor/bundle/ruby/2.5.0/bundler/gems/rails-7101489293ec/activerecord/lib/active_record/connection_adapters/abstract/connection_pool.rb:332 sleep&amp;gt; - /app/vendor/bundle/ruby/2.5.0/bundler/gems/rails-7101489293ec/activerecord/lib/active_record/connection_adapters/abstract/connection_pool.rb:335:in `sleep&amp;#39;\n2020-08-30T20:00:54.224251+00:00 app[web.1]: [4] Use Ctrl-C to stop\n2020-08-30T20:00:54.288824+00:00 app[web.1]: /app/vendor/bundle/ruby/2.5.0/bundler/gems/rails-7101489293ec/activesupport/lib/active_support/fork_tracker.rb:8:in `fork&amp;#39;: super: no superclass method `fork&amp;#39; for #&amp;lt;Puma::Cluster:0x000055b93a8947b8&amp;gt; (NoMethodError)\n2020-08-30T20:00:54.288894+00:00 app[web.1]: from /app/vendor/bundle/ruby/2.5.0/gems/puma-3.12.6/lib/puma/cluster.rb:139:in `block in spawn_workers&amp;#39;\n2020-08-30T20:00:54.288964+00:00 app[web.1]: from /app/vendor/bundle/ruby/2.5.0/gems/puma-3.12.6/lib/puma/cluster.rb:135:in `times&amp;#39;\n2020-08-30T20:00:54.288987+00:00 app[web.1]: from /app/vendor/bundle/ruby/2.5.0/gems/puma-3.12.6/lib/puma/cluster.rb:135:in `spawn_workers&amp;#39;\n2020-08-30T20:00:54.289009+00:00 app[web.1]: from /app/vendor/bundle/ruby/2.5.0/gems/puma-3.12.6/lib/puma/cluster.rb:468:in `run&amp;#39;\n2020-08-30T20:00:54.289028+00:00 app[web.1]: from /app/vendor/bundle/ruby/2.5.0/gems/puma-3.12.6/lib/puma/launcher.rb:186:in `run&amp;#39;\n2020-08-30T20:00:54.289047+00:00 app[web.1]: from /app/vendor/bundle/ruby/2.5.0/gems/puma-3.12.6/lib/puma/cli.rb:80:in `run&amp;#39;\n2020-08-30T20:00:54.289066+00:00 app[web.1]: from /app/vendor/bundle/ruby/2.5.0/gems/puma-3.12.6/bin/puma:10:in `&amp;lt;top (required)&amp;gt;&amp;#39;\n2020-08-30T20:00:54.289084+00:00 app[web.1]: from /app/vendor/bundle/ruby/2.5.0/bin/puma:23:in `load&amp;#39;\n2020-08-30T20:00:54.289103+00:00 app[web.1]: from /app/vendor/bundle/ruby/2.5.0/bin/puma:23:in `&amp;lt;main&amp;gt;&amp;#39;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;I had also seen this similar error message earlier:&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;2020-08-30T19:07:18.337125+00:00 app[web.1]: [4] * Listening on tcp://0.0.0.0:47116\n2020-08-30T19:07:18.337144+00:00 app[web.1]: [4] ! WARNING: Detected 1 Thread(s) started in app boot:\n2020-08-30T19:07:18.337184+00:00 app[web.1]: [4] ! #&amp;lt;Thread:0x0000562860d548a8@/app/vendor/bundle/ruby/2.5.0/bundler/gems/rails-7101489293ec/activerecord/lib/active_record/connection_adapters/abstract/connection_pool.rb:332 sleep&amp;gt; - /app/vendor/bundle/ruby/2.5.0/bundler/gems/rails-7101489293ec/activerecord/lib/active_record/connection_adapters/abstract/connection_pool.rb:335:in `sleep&amp;#39;\n2020-08-30T19:07:18.337270+00:00 app[web.1]: [4] Use Ctrl-C to stop\n2020-08-30T19:07:18.337560+00:00 app[web.1]: bundler: failed to load command: puma (/app/vendor/bundle/ruby/2.5.0/bin/puma)\n2020-08-30T19:07:18.388901+00:00 app[web.1]: NoMethodError: super: no superclass method `fork&amp;#39; for #&amp;lt;Puma::Cluster:0x000056285cc5b928&amp;gt;\n2020-08-30T19:07:18.388903+00:00 app[web.1]: /app/vendor/bundle/ruby/2.5.0/bundler/gems/rails-7101489293ec/activesupport/lib/active_support/fork_tracker.rb:8:in `fork&amp;#39;\n2020-08-30T19:07:18.388904+00:00 app[web.1]: /app/vendor/bundle/ruby/2.5.0/gems/puma-3.12.6/lib/puma/cluster.rb:139:in `block in spawn_workers&amp;#39;\n2020-08-30T19:07:18.388904+00:00 app[web.1]: /app/vendor/bundle/ruby/2.5.0/gems/puma-3.12.6/lib/puma/cluster.rb:135:in `times&amp;#39;\n2020-08-30T19:07:18.388904+00:00 app[web.1]: /app/vendor/bundle/ruby/2.5.0/gems/puma-3.12.6/lib/puma/cluster.rb:135:in `spawn_workers&amp;#39;\n2020-08-30T19:07:18.388905+00:00 app[web.1]: /app/vendor/bundle/ruby/2.5.0/gems/puma-3.12.6/lib/puma/cluster.rb:468:in `run&amp;#39;\n2020-08-30T19:07:18.388905+00:00 app[web.1]: /app/vendor/bundle/ruby/2.5.0/gems/puma-3.12.6/lib/puma/launcher.rb:186:in `run&amp;#39;\n2020-08-30T19:07:18.388906+00:00 app[web.1]: /app/vendor/bundle/ruby/2.5.0/gems/puma-3.12.6/lib/puma/cli.rb:80:in `run&amp;#39;\n2020-08-30T19:07:18.388906+00:00 app[web.1]: /app/vendor/bundle/ruby/2.5.0/gems/puma-3.12.6/bin/puma:10:in `&amp;lt;top (required)&amp;gt;&amp;#39;\n2020-08-30T19:07:18.388907+00:00 app[web.1]: /app/vendor/bundle/ruby/2.5.0/bin/puma:23:in `load&amp;#39;\n2020-08-30T19:07:18.388907+00:00 app[web.1]: /app/vendor/bundle/ruby/2.5.0/bin/puma:23:in `&amp;lt;top (required)&amp;gt;&amp;#39;\n2020-08-30T19:07:18.492258+00:00 heroku[web.1]: Process exited with status 1\n2020-08-30T19:07:18.547903+00:00 heroku[web.1]: State changed from starting to crashed\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Which changed to the first block pasted above when I &lt;a href=\"https://github.com/puma/puma/issues/1572#issuecomment-411288015\"&gt;set an env var like mentioned in this post&lt;/a&gt;.&lt;/p&gt;\n\n&lt;p&gt;When I load up a rails console, I see the ActiveStorage migration that was a part of this PR went out successfully because I see &lt;code&gt;service_name&lt;/code&gt; available on &lt;code&gt;ActiveStorage::Blob&lt;/code&gt; :&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;[3] pry(main)&amp;gt; ActiveStorage::Blob\n=&amp;gt; ActiveStorage::Blob(id: integer, key: string, filename: string, content_type: string, metadata: text, byte_size: integer, checksum: string, created_at: datetime, service_name: string)\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "ijjqgk", "is_robot_indexable": true, "report_reasons": null, "author": "VashyTheNexian", "discussion_type": null, "num_comments": 15, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/ijjqgk/heroku_deploy_broken/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/ijjqgk/heroku_deploy_broken/", "subreddit_subscribers": 45759, "created_utc": 1598818920.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "Hello. So I created a new Rails project and I am working with another developer on it. I pushed the project to GitHub but, of course, the `master.key` isn't sent to GitHub. How do both of us safely handle this so there are no conflicts? Do I just send the other dev the `master.key`? We need it for credentials.", "author_fullname": "t2_34ogdibh", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "How do you share the master.key with GitHub collaborators", "link_flair_richtext": [{"e": "text", "t": "Question"}], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": "question", "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_ijd66h", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 0.86, "author_flair_background_color": null, "subreddit_type": "public", "ups": 10, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": "Question", "can_mod_post": false, "score": 10, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1598825109.0, "link_flair_type": "richtext", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;Hello. So I created a new Rails project and I am working with another developer on it. I pushed the project to GitHub but, of course, the &lt;code&gt;master.key&lt;/code&gt; isn&amp;#39;t sent to GitHub. How do both of us safely handle this so there are no conflicts? Do I just send the other dev the &lt;code&gt;master.key&lt;/code&gt;? We need it for credentials.&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "link_flair_template_id": "fdfc6806-aea7-11e4-bf37-22000b3889f5", "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "ijd66h", "is_robot_indexable": true, "report_reasons": null, "author": "crodev", "discussion_type": null, "num_comments": 8, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/ijd66h/how_do_you_share_the_masterkey_with_github/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/ijd66h/how_do_you_share_the_masterkey_with_github/", "subreddit_subscribers": 45759, "created_utc": 1598796309.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "Basically I have a get(verb) form, where has remote true and on submission, I am rendering a partial via .js.erb.  \n\n\nNow I would like to add export as csv button, with the filters selected in the above form.   \n\n\nMy options are   \n`&lt;%= link_to \"CSV\", filters_reports_path(format: \"csv\") %&gt;`  \n\n\nBut this does not give the filters selected previously.  \n\n\nSo I have added a button, and on click I am getting the form data and sending the request like this  \n\n```\n&lt;button id=\"download_csv\"&gt; Download &lt;/button&gt; \n\n  $('#download_csv').on(\"click\", function (e) {\n    e.preventDefault()\n    $.ajax({type: \"GET\",\n      url: \"/reports/filters.csv\",\n      data: $('#reports_filter').serialize(),\n      success:function(result) {\n        console.log('ok');\n      },\n      error:function(result) {\n        alert('error');\n      }\n    });\n  })\n```\n\n```\n--&gt; log for link_to\nStarted GET \"/reports/filters.csv\" for ::1 at 2020-08-30 21:54:28 +0530\n  User Load (0.9ms)  SELECT \"users\".* FROM \"users\" WHERE \"users\".\"id\" = $1 ORDER BY \"users\".\"id\" ASC LIMIT $2  [[\"id\", \"4c0f729f-ee51-4e38-9c65-86042e709f78\"], [\"LIMIT\", 1]]\nProcessing by ReportsController#filters as CSV\nCompleted 200 OK in 1ms (ActiveRecord: 0.0ms | Allocations: 220)\n\n\n  TimeEntry Load (1.2ms)  SELECT \"time_entries\".* FROM \"time_entries\" ORDER BY \"time_entries\".\"id\" ASC LIMIT $1  [[\"LIMIT\", 1000]]\n  \u21b3 app/controllers/reports_controller.rb:43:in `block (3 levels) in filters'\n\n\n\n-----------\n-&gt; log for ajax request\nStarted GET \"/reports/filters.csv?project_id=&amp;daterange=23%2FAug%2F2020%20-%2030%2FAug%2F2020\" for ::1 at 2020-08-30 21:54:45 +0530\n  User Load (1.4ms)  SELECT \"users\".* FROM \"users\" WHERE \"users\".\"id\" = $1 ORDER BY \"users\".\"id\" ASC LIMIT $2  [[\"id\", \"4c0f729f-ee51-4e38-9c65-86042e709f78\"], [\"LIMIT\", 1]]\nProcessing by ReportsController#filters as CSV\n  Parameters: {\"project_id\"=&gt;\"\", \"daterange\"=&gt;\"23/Aug/2020 - 30/Aug/2020\"}\nCompleted 200 OK in 1ms (ActiveRecord: 0.0ms | Allocations: 222)\n```\n\nMy question is if there a way to get the filters in the link_to itself other than storing in session? or what needs to be done to get the ajax request trigger download", "author_fullname": "t2_13uooa", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Submitting a get request via ajax does not trigger csv download", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_ijfotf", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 1.0, "author_flair_background_color": null, "subreddit_type": "public", "ups": 2, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 2, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1598834359.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;Basically I have a get(verb) form, where has remote true and on submission, I am rendering a partial via .js.erb.  &lt;/p&gt;\n\n&lt;p&gt;Now I would like to add export as csv button, with the filters selected in the above form.   &lt;/p&gt;\n\n&lt;p&gt;My options are&lt;br/&gt;\n&lt;code&gt;&amp;lt;%= link_to &amp;quot;CSV&amp;quot;, filters_reports_path(format: &amp;quot;csv&amp;quot;) %&amp;gt;&lt;/code&gt;  &lt;/p&gt;\n\n&lt;p&gt;But this does not give the filters selected previously.  &lt;/p&gt;\n\n&lt;p&gt;So I have added a button, and on click I am getting the form data and sending the request like this  &lt;/p&gt;\n\n&lt;p&gt;```\n&amp;lt;button id=&amp;quot;download_csv&amp;quot;&amp;gt; Download &amp;lt;/button&amp;gt; &lt;/p&gt;\n\n&lt;p&gt;$(&amp;#39;#download_csv&amp;#39;).on(&amp;quot;click&amp;quot;, function (e) {\n    e.preventDefault()\n    $.ajax({type: &amp;quot;GET&amp;quot;,\n      url: &amp;quot;/reports/filters.csv&amp;quot;,\n      data: $(&amp;#39;#reports_filter&amp;#39;).serialize(),\n      success:function(result) {\n        console.log(&amp;#39;ok&amp;#39;);\n      },\n      error:function(result) {\n        alert(&amp;#39;error&amp;#39;);\n      }\n    });\n  })\n```&lt;/p&gt;\n\n&lt;p&gt;```\n--&amp;gt; log for link_to\nStarted GET &amp;quot;/reports/filters.csv&amp;quot; for ::1 at 2020-08-30 21:54:28 +0530\n  User Load (0.9ms)  SELECT &amp;quot;users&amp;quot;.* FROM &amp;quot;users&amp;quot; WHERE &amp;quot;users&amp;quot;.&amp;quot;id&amp;quot; = $1 ORDER BY &amp;quot;users&amp;quot;.&amp;quot;id&amp;quot; ASC LIMIT $2  [[&amp;quot;id&amp;quot;, &amp;quot;4c0f729f-ee51-4e38-9c65-86042e709f78&amp;quot;], [&amp;quot;LIMIT&amp;quot;, 1]]\nProcessing by ReportsController#filters as CSV\nCompleted 200 OK in 1ms (ActiveRecord: 0.0ms | Allocations: 220)&lt;/p&gt;\n\n&lt;p&gt;TimeEntry Load (1.2ms)  SELECT &amp;quot;time_entries&amp;quot;.* FROM &amp;quot;time_entries&amp;quot; ORDER BY &amp;quot;time_entries&amp;quot;.&amp;quot;id&amp;quot; ASC LIMIT $1  [[&amp;quot;LIMIT&amp;quot;, 1000]]\n  \u21b3 app/controllers/reports_controller.rb:43:in `block (3 levels) in filters&amp;#39;&lt;/p&gt;\n\n&lt;hr/&gt;\n\n&lt;p&gt;-&amp;gt; log for ajax request\nStarted GET &amp;quot;/reports/filters.csv?project_id=&amp;amp;daterange=23%2FAug%2F2020%20-%2030%2FAug%2F2020&amp;quot; for ::1 at 2020-08-30 21:54:45 +0530\n  User Load (1.4ms)  SELECT &amp;quot;users&amp;quot;.* FROM &amp;quot;users&amp;quot; WHERE &amp;quot;users&amp;quot;.&amp;quot;id&amp;quot; = $1 ORDER BY &amp;quot;users&amp;quot;.&amp;quot;id&amp;quot; ASC LIMIT $2  [[&amp;quot;id&amp;quot;, &amp;quot;4c0f729f-ee51-4e38-9c65-86042e709f78&amp;quot;], [&amp;quot;LIMIT&amp;quot;, 1]]\nProcessing by ReportsController#filters as CSV\n  Parameters: {&amp;quot;project_id&amp;quot;=&amp;gt;&amp;quot;&amp;quot;, &amp;quot;daterange&amp;quot;=&amp;gt;&amp;quot;23/Aug/2020 - 30/Aug/2020&amp;quot;}\nCompleted 200 OK in 1ms (ActiveRecord: 0.0ms | Allocations: 222)\n```&lt;/p&gt;\n\n&lt;p&gt;My question is if there a way to get the filters in the link_to itself other than storing in session? or what needs to be done to get the ajax request trigger download&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "ijfotf", "is_robot_indexable": true, "report_reasons": null, "author": "gvpmahesh", "discussion_type": null, "num_comments": 1, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/ijfotf/submitting_a_get_request_via_ajax_does_not/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/ijfotf/submitting_a_get_request_via_ajax_does_not/", "subreddit_subscribers": 45759, "created_utc": 1598805559.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "I have switched from Paperclip to Active Storage. While Active Storage is great, it presents a new set of problems. Paperclip let me set a bucket directory (or even a new bucket), whereas Active Storage dumps everything into the root of a single bucket. I fear that this could create security issues. Improperly set IAM policies are an easy to make no-no, and my app had been using two buckets to avoid the problem: one for public content, and one for private admin accessible content.\n\nIn making that two bucket setup work with Active Storage, I tried to use the `service` option for `has_one_attached`. However, I get an ArgumentError: `unknown keyword: service`. The [edge guide](https://edgeguides.rubyonrails.org/active_storage_overview.html#setup) implies that this option works in Rails 5.2, but the [guide for 5.2.4](https://guides.rubyonrails.org/v5.2.4/active_storage_overview.html#has-one-attached) doesn't mention the `service` option at *all*.\n\nHow do you lock down access to certain S3 files while being less restrictive with everything else? Is this even possible? Do I have to move to Shrine?", "author_fullname": "t2_76cp1k68", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Rails 5.2.4, Active Storage, and S3: is it possible to implement an effective IAM/ACL policy when the app's default opinion dumps everything into the root of a single bucket?", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_ij5e6v", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 1.0, "author_flair_background_color": null, "subreddit_type": "public", "ups": 16, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 16, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1598784385.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;I have switched from Paperclip to Active Storage. While Active Storage is great, it presents a new set of problems. Paperclip let me set a bucket directory (or even a new bucket), whereas Active Storage dumps everything into the root of a single bucket. I fear that this could create security issues. Improperly set IAM policies are an easy to make no-no, and my app had been using two buckets to avoid the problem: one for public content, and one for private admin accessible content.&lt;/p&gt;\n\n&lt;p&gt;In making that two bucket setup work with Active Storage, I tried to use the &lt;code&gt;service&lt;/code&gt; option for &lt;code&gt;has_one_attached&lt;/code&gt;. However, I get an ArgumentError: &lt;code&gt;unknown keyword: service&lt;/code&gt;. The &lt;a href=\"https://edgeguides.rubyonrails.org/active_storage_overview.html#setup\"&gt;edge guide&lt;/a&gt; implies that this option works in Rails 5.2, but the &lt;a href=\"https://guides.rubyonrails.org/v5.2.4/active_storage_overview.html#has-one-attached\"&gt;guide for 5.2.4&lt;/a&gt; doesn&amp;#39;t mention the &lt;code&gt;service&lt;/code&gt; option at &lt;em&gt;all&lt;/em&gt;.&lt;/p&gt;\n\n&lt;p&gt;How do you lock down access to certain S3 files while being less restrictive with everything else? Is this even possible? Do I have to move to Shrine?&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "ij5e6v", "is_robot_indexable": true, "report_reasons": null, "author": "Kni2L", "discussion_type": null, "num_comments": 16, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/ij5e6v/rails_524_active_storage_and_s3_is_it_possible_to/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/ij5e6v/rails_524_active_storage_and_s3_is_it_possible_to/", "subreddit_subscribers": 45759, "created_utc": 1598755585.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "# SOLUTION:\nSee this SO post: https://stackoverflow.com/questions/58373159/unknown-attribute-service-name-for-activestorageblob\n\n\n# Routes\n\n    \n    # routes.rb\n      resources :properties,          only: [:new, :create, :edit, :update, :index, :show] do\n        resources :expense_items\n      end\n    \n\n# Model\n\n    # model\n    class ExpenseItem &lt; ApplicationRecord\n      has_many_attached :attachments\n    end\n\n    # Works fine in rails console:\n    @expense_item.attachments.map { |f| f.filename } \n    # =&gt;[#&lt;ActiveStorage::Filename:0x000056033874b940 @filename=\"test1.png\"&gt;, \n      #&lt;ActiveStorage::Filename:0x0000560338748d08 @filename=\"test2.mov\"&gt;, \n      #&lt;ActiveStorage::Filename:0x000056033893e540 @filename=\"test3.pdf\"&gt;] \n\n\n# Error\nBut when I try to use it in my edit view, I get an error saying:\n    \n    undefined method `service_name' for #&lt;ActiveStorage::Blob:0x00007fdd4844eaa8&gt;\n    Did you mean?  service\n\n    \n# View\n\n    # edit view\n      &lt;div class=\"col-sm-6\"&gt;\n        &lt;%= render 'shared/error_messages', object: @expense_item %&gt;\n          &lt;ul&gt;\n            &lt;% @expense_item.attachments.each do |file| %&gt;\n              &lt;li&gt;\n                &lt;% if file.previewable? %&gt;\n                  &lt;p&gt;file.filename&lt;/p&gt;\n                  &lt;%#= image_tag file.preview(resize_to_limit: [100,100]) %&gt;\n                &lt;% end %&gt;\n              &lt;/li&gt;\n            &lt;% end %&gt;\n          &lt;/ul&gt;      &lt;%= f.submit 'Update Expense', class: 'btn btn-primary mt-sm-3' %&gt;\n        &lt;% end %&gt;\n\nThe exception gets thrown at the if file.previewable? line.\n\n# Controller\n\n    # expense items controller\n      def show\n        @expense_item = property.expense_items.find(params[:id])\n      end  \n\n      def edit\n        @expense_item = property.expense_items.find(params[:id])\n      end\n  \n      def update\n        @expense_item = property.expense_items.find(params[:id])\n        if @expense_item&amp;.update_attributes(expense_item_params)\n          flash[:success] = \"Updated Expense Item: #{@expense_item.name}\"\n          redirect_to @expense_item.property\n        else\n          render 'edit'\n        end\n      end\n    \n      def expense_item_params\n        params.require(:expense_item).permit(:name, :cost, :expense_date, :property_id, attachments: [])\n      end", "author_fullname": "t2_4ekhk", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Beginner ActiveStorage Help", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_ij4hh0", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 0.92, "author_flair_background_color": null, "subreddit_type": "public", "ups": 9, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 9, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": 1598804194.0, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1598780430.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;h1&gt;SOLUTION:&lt;/h1&gt;\n\n&lt;p&gt;See this SO post: &lt;a href=\"https://stackoverflow.com/questions/58373159/unknown-attribute-service-name-for-activestorageblob\"&gt;https://stackoverflow.com/questions/58373159/unknown-attribute-service-name-for-activestorageblob&lt;/a&gt;&lt;/p&gt;\n\n&lt;h1&gt;Routes&lt;/h1&gt;\n\n&lt;pre&gt;&lt;code&gt;# routes.rb\n  resources :properties,          only: [:new, :create, :edit, :update, :index, :show] do\n    resources :expense_items\n  end\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;h1&gt;Model&lt;/h1&gt;\n\n&lt;pre&gt;&lt;code&gt;# model\nclass ExpenseItem &amp;lt; ApplicationRecord\n  has_many_attached :attachments\nend\n\n# Works fine in rails console:\n@expense_item.attachments.map { |f| f.filename } \n# =&amp;gt;[#&amp;lt;ActiveStorage::Filename:0x000056033874b940 @filename=&amp;quot;test1.png&amp;quot;&amp;gt;, \n  #&amp;lt;ActiveStorage::Filename:0x0000560338748d08 @filename=&amp;quot;test2.mov&amp;quot;&amp;gt;, \n  #&amp;lt;ActiveStorage::Filename:0x000056033893e540 @filename=&amp;quot;test3.pdf&amp;quot;&amp;gt;] \n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;h1&gt;Error&lt;/h1&gt;\n\n&lt;p&gt;But when I try to use it in my edit view, I get an error saying:&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;undefined method `service_name&amp;#39; for #&amp;lt;ActiveStorage::Blob:0x00007fdd4844eaa8&amp;gt;\nDid you mean?  service\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;h1&gt;View&lt;/h1&gt;\n\n&lt;pre&gt;&lt;code&gt;# edit view\n  &amp;lt;div class=&amp;quot;col-sm-6&amp;quot;&amp;gt;\n    &amp;lt;%= render &amp;#39;shared/error_messages&amp;#39;, object: @expense_item %&amp;gt;\n      &amp;lt;ul&amp;gt;\n        &amp;lt;% @expense_item.attachments.each do |file| %&amp;gt;\n          &amp;lt;li&amp;gt;\n            &amp;lt;% if file.previewable? %&amp;gt;\n              &amp;lt;p&amp;gt;file.filename&amp;lt;/p&amp;gt;\n              &amp;lt;%#= image_tag file.preview(resize_to_limit: [100,100]) %&amp;gt;\n            &amp;lt;% end %&amp;gt;\n          &amp;lt;/li&amp;gt;\n        &amp;lt;% end %&amp;gt;\n      &amp;lt;/ul&amp;gt;      &amp;lt;%= f.submit &amp;#39;Update Expense&amp;#39;, class: &amp;#39;btn btn-primary mt-sm-3&amp;#39; %&amp;gt;\n    &amp;lt;% end %&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;The exception gets thrown at the if file.previewable? line.&lt;/p&gt;\n\n&lt;h1&gt;Controller&lt;/h1&gt;\n\n&lt;pre&gt;&lt;code&gt;# expense items controller\n  def show\n    @expense_item = property.expense_items.find(params[:id])\n  end  \n\n  def edit\n    @expense_item = property.expense_items.find(params[:id])\n  end\n\n  def update\n    @expense_item = property.expense_items.find(params[:id])\n    if @expense_item&amp;amp;.update_attributes(expense_item_params)\n      flash[:success] = &amp;quot;Updated Expense Item: #{@expense_item.name}&amp;quot;\n      redirect_to @expense_item.property\n    else\n      render &amp;#39;edit&amp;#39;\n    end\n  end\n\n  def expense_item_params\n    params.require(:expense_item).permit(:name, :cost, :expense_date, :property_id, attachments: [])\n  end\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "ij4hh0", "is_robot_indexable": true, "report_reasons": null, "author": "VashyTheNexian", "discussion_type": null, "num_comments": 3, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/ij4hh0/beginner_activestorage_help/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/ij4hh0/beginner_activestorage_help/", "subreddit_subscribers": 45759, "created_utc": 1598751630.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "I need help guys, i have to do a form where i select a commune (a big list of this) and, when i have to selectthe condominium  it only shows me those of the selected commune. I try with onChange(Javascript), but i dont know how get this value and use in the condominium place.\n\n&amp;#x200B;\n\nI really hope you can understand to me, is difficult to me explain this in english", "author_fullname": "t2_6px1zsgj", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Javascript + Rails", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_ij4gvx", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 0.67, "author_flair_background_color": null, "subreddit_type": "public", "ups": 3, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 3, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1598780355.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;I need help guys, i have to do a form where i select a commune (a big list of this) and, when i have to selectthe condominium  it only shows me those of the selected commune. I try with onChange(Javascript), but i dont know how get this value and use in the condominium place.&lt;/p&gt;\n\n&lt;p&gt;&amp;#x200B;&lt;/p&gt;\n\n&lt;p&gt;I really hope you can understand to me, is difficult to me explain this in english&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": true, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "ij4gvx", "is_robot_indexable": true, "report_reasons": null, "author": "Tomi_chuu", "discussion_type": null, "num_comments": 1, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/ij4gvx/javascript_rails/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/ij4gvx/javascript_rails/", "subreddit_subscribers": 45759, "created_utc": 1598751555.0, "num_crossposts": 0, "media": null, "is_video": false}}], "after": "t3_ij4gvx", "before": null}}