{"kind": "Listing", "data": {"modhash": "", "dist": 12, "children": [{"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rust", "selftext": "Mystified about strings? Borrow checker have you in a headlock? Seek help here! There are no stupid questions, only docs that haven't been written yet.\n\nIf you have a [StackOverflow](http://stackoverflow.com/) account, consider asking it there instead! StackOverflow shows up much higher in search results, so having your question there also helps future Rust users (be sure to give it [the \"Rust\" tag](http://stackoverflow.com/questions/tagged/rust) for maximum visibility). Note that this site is very interested in question quality. I've been asked to read a RFC I authored once. If you want your code reviewed or review other's code, there's a [codereview stackexchange](https://codereview.stackexchange.com/questions/tagged/rust), too. If you need to test your code, maybe [the Rust playground](https://play.rust-lang.org) is for you.\n\nHere are some other venues where help may be found:\n\n[/r/learnrust](https://www.reddit.com/r/learnrust) is a subreddit to share your questions and epiphanies learning Rust programming.\n\nThe official Rust user forums: [https://users.rust-lang.org/](https://users.rust-lang.org/).\n\nThe official Rust Programming Language Discord: [https://discord.gg/rust-lang](https://discord.gg/rust-lang)\n\nThe unofficial Rust community Discord: [https://bit.ly/rust-community](https://bit.ly/rust-community)\n\nAlso check out [last weeks' thread](https://reddit.com/r/rust/comments/i6yqng/hey_rustaceans_got_an_easy_question_ask_here/) with many good questions and answers. And if you believe your question to be either very complex or worthy of larger dissemination, feel free to create a text post.\n\nAlso if you want to be mentored by experienced Rustaceans, tell us the area of expertise that you seek.", "author_fullname": "t2_1kxp4", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Hey Rustaceans! Got an easy question? Ask here (35/2020)!", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rust", "hidden": false, "pwls": 6, "link_flair_css_class": "easyquestions", "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_ifiec2", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 0.89, "author_flair_background_color": "", "subreddit_type": "public", "ups": 18, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": "\ud83d\ude4b", "can_mod_post": false, "score": 18, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": "contrib", "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1598272392.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rust", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;Mystified about strings? Borrow checker have you in a headlock? Seek help here! There are no stupid questions, only docs that haven&amp;#39;t been written yet.&lt;/p&gt;\n\n&lt;p&gt;If you have a &lt;a href=\"http://stackoverflow.com/\"&gt;StackOverflow&lt;/a&gt; account, consider asking it there instead! StackOverflow shows up much higher in search results, so having your question there also helps future Rust users (be sure to give it &lt;a href=\"http://stackoverflow.com/questions/tagged/rust\"&gt;the &amp;quot;Rust&amp;quot; tag&lt;/a&gt; for maximum visibility). Note that this site is very interested in question quality. I&amp;#39;ve been asked to read a RFC I authored once. If you want your code reviewed or review other&amp;#39;s code, there&amp;#39;s a &lt;a href=\"https://codereview.stackexchange.com/questions/tagged/rust\"&gt;codereview stackexchange&lt;/a&gt;, too. If you need to test your code, maybe &lt;a href=\"https://play.rust-lang.org\"&gt;the Rust playground&lt;/a&gt; is for you.&lt;/p&gt;\n\n&lt;p&gt;Here are some other venues where help may be found:&lt;/p&gt;\n\n&lt;p&gt;&lt;a href=\"https://www.reddit.com/r/learnrust\"&gt;/r/learnrust&lt;/a&gt; is a subreddit to share your questions and epiphanies learning Rust programming.&lt;/p&gt;\n\n&lt;p&gt;The official Rust user forums: &lt;a href=\"https://users.rust-lang.org/\"&gt;https://users.rust-lang.org/&lt;/a&gt;.&lt;/p&gt;\n\n&lt;p&gt;The official Rust Programming Language Discord: &lt;a href=\"https://discord.gg/rust-lang\"&gt;https://discord.gg/rust-lang&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;The unofficial Rust community Discord: &lt;a href=\"https://bit.ly/rust-community\"&gt;https://bit.ly/rust-community&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;Also check out &lt;a href=\"https://reddit.com/r/rust/comments/i6yqng/hey_rustaceans_got_an_easy_question_ask_here/\"&gt;last weeks&amp;#39; thread&lt;/a&gt; with many good questions and answers. And if you believe your question to be either very complex or worthy of larger dissemination, feel free to create a text post.&lt;/p&gt;\n\n&lt;p&gt;Also if you want to be mentored by experienced Rustaceans, tell us the area of expertise that you seek.&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": "new", "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "link_flair_template_id": "e86091d6-dfe6-11ea-a6d0-0eaf4ae01c99", "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": "clippy \u00b7 twir \u00b7 rust \u00b7 mutagen \u00b7 flamer \u00b7 overflower \u00b7 bytecount", "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": "moderator", "subreddit_id": "t5_2s7lj", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "#f7f5ff", "id": "ifiec2", "is_robot_indexable": true, "report_reasons": null, "author": "llogiq", "discussion_type": null, "num_comments": 136, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": "dark", "permalink": "/r/rust/comments/ifiec2/hey_rustaceans_got_an_easy_question_ask_here/", "parent_whitelist_status": "all_ads", "stickied": true, "url": "https://www.reddit.com/r/rust/comments/ifiec2/hey_rustaceans_got_an_easy_question_ask_here/", "subreddit_subscribers": 111980, "created_utc": 1598243592.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rust", "selftext": "", "author_fullname": "t2_eki22", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "This Week in Rust 353", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rust", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_ih8uai", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 0.99, "author_flair_background_color": "", "subreddit_type": "public", "ups": 127, "total_awards_received": 1, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 127, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": false, "mod_note": null, "created": 1598509215.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "this-week-in-rust.org", "allow_live_comments": false, "selftext_html": null, "likes": null, "suggested_sort": null, "banned_at_utc": null, "url_overridden_by_dest": "https://this-week-in-rust.org/blog/2020/08/26/this-week-in-rust-353/", "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [{"giver_coin_reward": null, "subreddit_id": null, "is_new": false, "days_of_drip_extension": 0, "coin_price": 200, "resized_tier_icons": null, "id": "award_1703f934-cf44-40cc-a96d-3729d0b48262", "penny_donate": null, "award_sub_type": "GLOBAL", "coin_reward": 0, "icon_url": "https://i.redd.it/award_images/t5_22cerq/8ad2jffnclf41_Thanks.png", "days_of_premium": 0, "tiers_by_required_awardings": null, "resized_icons": [{"url": "https://preview.redd.it/award_images/t5_22cerq/8ad2jffnclf41_Thanks.png?width=16&amp;height=16&amp;auto=webp&amp;s=e3adc32e42cf534e27afea719ff932b1ce797cfd", "width": 16, "height": 16}, {"url": "https://preview.redd.it/award_images/t5_22cerq/8ad2jffnclf41_Thanks.png?width=32&amp;height=32&amp;auto=webp&amp;s=08542909c94777e870c41a35413bce688ca2fd6c", "width": 32, "height": 32}, {"url": "https://preview.redd.it/award_images/t5_22cerq/8ad2jffnclf41_Thanks.png?width=48&amp;height=48&amp;auto=webp&amp;s=4d85746d584b5494087da3561944d6d241f57674", "width": 48, "height": 48}, {"url": "https://preview.redd.it/award_images/t5_22cerq/8ad2jffnclf41_Thanks.png?width=64&amp;height=64&amp;auto=webp&amp;s=fd7683c8de2839998a432e7e53e1e06d66c35ad3", "width": 64, "height": 64}, {"url": "https://preview.redd.it/award_images/t5_22cerq/8ad2jffnclf41_Thanks.png?width=128&amp;height=128&amp;auto=webp&amp;s=a750da7a573bb231bd863be9725abece0332b828", "width": 128, "height": 128}], "icon_width": 2048, "static_icon_width": 2048, "start_date": null, "is_enabled": true, "awardings_required_to_grant_benefits": null, "description": "My kindergarten teacher, my cat, my mom, and you.", "end_date": null, "subreddit_coin_reward": 0, "count": 1, "static_icon_height": 2048, "name": "I'd Like to Thank...", "resized_static_icons": [{"url": "https://preview.redd.it/award_images/t5_22cerq/8ad2jffnclf41_Thanks.png?width=16&amp;height=16&amp;auto=webp&amp;s=e3adc32e42cf534e27afea719ff932b1ce797cfd", "width": 16, "height": 16}, {"url": "https://preview.redd.it/award_images/t5_22cerq/8ad2jffnclf41_Thanks.png?width=32&amp;height=32&amp;auto=webp&amp;s=08542909c94777e870c41a35413bce688ca2fd6c", "width": 32, "height": 32}, {"url": "https://preview.redd.it/award_images/t5_22cerq/8ad2jffnclf41_Thanks.png?width=48&amp;height=48&amp;auto=webp&amp;s=4d85746d584b5494087da3561944d6d241f57674", "width": 48, "height": 48}, {"url": "https://preview.redd.it/award_images/t5_22cerq/8ad2jffnclf41_Thanks.png?width=64&amp;height=64&amp;auto=webp&amp;s=fd7683c8de2839998a432e7e53e1e06d66c35ad3", "width": 64, "height": 64}, {"url": "https://preview.redd.it/award_images/t5_22cerq/8ad2jffnclf41_Thanks.png?width=128&amp;height=128&amp;auto=webp&amp;s=a750da7a573bb231bd863be9725abece0332b828", "width": 128, "height": 128}], "icon_format": null, "icon_height": 2048, "penny_price": null, "award_type": "global", "static_icon_url": "https://i.redd.it/award_images/t5_22cerq/8ad2jffnclf41_Thanks.png"}], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": "twir", "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2s7lj", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "ih8uai", "is_robot_indexable": true, "report_reasons": null, "author": "seino_chan", "discussion_type": null, "num_comments": 12, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": "dark", "permalink": "/r/rust/comments/ih8uai/this_week_in_rust_353/", "parent_whitelist_status": "all_ads", "stickied": true, "url": "https://this-week-in-rust.org/blog/2020/08/26/this-week-in-rust-353/", "subreddit_subscribers": 111980, "created_utc": 1598480415.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rust", "selftext": "My code compiled and ran fine on rustc 1.45.2, however after getting 1.46.0, I'm getting this error.\n\n    error: reached the type-length limit while instantiating `std::thread::LocalKey::&lt;std::cel...d::Box&lt;dyn std::error::Error&gt;&gt;&gt;&gt;`\n       --&gt; /Users/asdf/.rustup/toolchains/stable-x86_64-apple-darwin/lib/rustlib/src/rust/src/libstd/thread/local.rs:235:5\n        |\n    235 | /     pub fn with&lt;F, R&gt;(&amp;'static self, f: F) -&gt; R\n    236 | |     where\n    237 | |         F: FnOnce(&amp;T) -&gt; R,\n    238 | |     {\n    ...   |\n    242 | |         )\n    243 | |     }\n        | |_____^\n        |\n        = note: consider adding a `#![type_length_limit=\"1871104\"]` attribute to your crate\n\nAfter some small code changes, it then gives:\n\n    error: reached the type-length limit while instantiating `&lt;std::slice::Iter&lt;std::string::S...r str) -&gt; std::string::String]]&gt;`\n        --&gt; /Users/asdf/.rustup/toolchains/stable-x86_64-apple-darwin/lib/rustlib/src/rust/src/libcore/iter/traits/iterator.rs:2015:5\n         |\n    2015 | /     fn fold&lt;B, F&gt;(mut self, init: B, mut f: F) -&gt; B\n    2016 | |     where\n    2017 | |         Self: Sized,\n    2018 | |         F: FnMut(B, Self::Item) -&gt; B,\n    ...    |\n    2024 | |         accum\n    2025 | |     }\n         | |_____^\n         |\n         = note: consider adding a `#![type_length_limit=\"1863488\"]` attribute to your crate\n\nI have not been able to find the cause the problem. Is this a regression? And if so, how do I communicate it to the rust team?", "author_fullname": "t2_1cz5zibe", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Compiler regression on 1.46.0?", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rust", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_iingya", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 0.96, "author_flair_background_color": null, "subreddit_type": "public", "ups": 98, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 98, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1598709928.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rust", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;My code compiled and ran fine on rustc 1.45.2, however after getting 1.46.0, I&amp;#39;m getting this error.&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;error: reached the type-length limit while instantiating `std::thread::LocalKey::&amp;lt;std::cel...d::Box&amp;lt;dyn std::error::Error&amp;gt;&amp;gt;&amp;gt;&amp;gt;`\n   --&amp;gt; /Users/asdf/.rustup/toolchains/stable-x86_64-apple-darwin/lib/rustlib/src/rust/src/libstd/thread/local.rs:235:5\n    |\n235 | /     pub fn with&amp;lt;F, R&amp;gt;(&amp;amp;&amp;#39;static self, f: F) -&amp;gt; R\n236 | |     where\n237 | |         F: FnOnce(&amp;amp;T) -&amp;gt; R,\n238 | |     {\n...   |\n242 | |         )\n243 | |     }\n    | |_____^\n    |\n    = note: consider adding a `#![type_length_limit=&amp;quot;1871104&amp;quot;]` attribute to your crate\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;After some small code changes, it then gives:&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;error: reached the type-length limit while instantiating `&amp;lt;std::slice::Iter&amp;lt;std::string::S...r str) -&amp;gt; std::string::String]]&amp;gt;`\n    --&amp;gt; /Users/asdf/.rustup/toolchains/stable-x86_64-apple-darwin/lib/rustlib/src/rust/src/libcore/iter/traits/iterator.rs:2015:5\n     |\n2015 | /     fn fold&amp;lt;B, F&amp;gt;(mut self, init: B, mut f: F) -&amp;gt; B\n2016 | |     where\n2017 | |         Self: Sized,\n2018 | |         F: FnMut(B, Self::Item) -&amp;gt; B,\n...    |\n2024 | |         accum\n2025 | |     }\n     | |_____^\n     |\n     = note: consider adding a `#![type_length_limit=&amp;quot;1863488&amp;quot;]` attribute to your crate\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;I have not been able to find the cause the problem. Is this a regression? And if so, how do I communicate it to the rust team?&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2s7lj", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "iingya", "is_robot_indexable": true, "report_reasons": null, "author": "flactemrove", "discussion_type": null, "num_comments": 12, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rust/comments/iingya/compiler_regression_on_1460/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rust/comments/iingya/compiler_regression_on_1460/", "subreddit_subscribers": 111980, "created_utc": 1598681128.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rust", "selftext": "", "author_fullname": "t2_42hkw", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Dwarf Seeks Fortune - 2D platformer game, homage to King's Valley II", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rust", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": true, "name": "t3_iir6qo", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 0.94, "author_flair_background_color": null, "subreddit_type": "public", "ups": 12, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 12, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": false, "mod_note": null, "created": 1598731052.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "amethyst.rs", "allow_live_comments": false, "selftext_html": null, "likes": null, "suggested_sort": null, "banned_at_utc": null, "url_overridden_by_dest": "https://amethyst.rs/posts/showcase-game-5-dwarf-seeks-fortune", "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2s7lj", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "iir6qo", "is_robot_indexable": true, "report_reasons": null, "author": "erlend_sh", "discussion_type": null, "num_comments": 2, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rust/comments/iir6qo/dwarf_seeks_fortune_2d_platformer_game_homage_to/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://amethyst.rs/posts/showcase-game-5-dwarf-seeks-fortune", "subreddit_subscribers": 111980, "created_utc": 1598702252.0, "num_crossposts": 2, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rust", "selftext": "", "author_fullname": "t2_f5d2i", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "rust-analyzer financial report", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rust", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_iianoy", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 0.99, "author_flair_background_color": "", "subreddit_type": "public", "ups": 288, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 288, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": false, "mod_note": null, "created": 1598662141.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "rust-analyzer.github.io", "allow_live_comments": false, "selftext_html": null, "likes": null, "suggested_sort": null, "banned_at_utc": null, "url_overridden_by_dest": "https://rust-analyzer.github.io/blog/2020/08/20/financial-report.html", "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": "rust-analyzer", "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2s7lj", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "iianoy", "is_robot_indexable": true, "report_reasons": null, "author": "matklad", "discussion_type": null, "num_comments": 27, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": "dark", "permalink": "/r/rust/comments/iianoy/rustanalyzer_financial_report/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://rust-analyzer.github.io/blog/2020/08/20/financial-report.html", "subreddit_subscribers": 111980, "created_utc": 1598633341.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rust", "selftext": "", "author_fullname": "t2_1kxp4", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Rust serialization: What's ready for production today?", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rust", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_iif7hc", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 0.99, "author_flair_background_color": "", "subreddit_type": "public", "ups": 111, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 111, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": "contrib", "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": false, "mod_note": null, "created": 1598676476.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "blog.logrocket.com", "allow_live_comments": false, "selftext_html": null, "likes": null, "suggested_sort": null, "banned_at_utc": null, "url_overridden_by_dest": "https://blog.logrocket.com/rust-serialization-whats-ready-for-production-today/", "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": "clippy \u00b7 twir \u00b7 rust \u00b7 mutagen \u00b7 flamer \u00b7 overflower \u00b7 bytecount", "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2s7lj", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "iif7hc", "is_robot_indexable": true, "report_reasons": null, "author": "llogiq", "discussion_type": null, "num_comments": 25, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": "dark", "permalink": "/r/rust/comments/iif7hc/rust_serialization_whats_ready_for_production/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://blog.logrocket.com/rust-serialization-whats-ready-for-production-today/", "subreddit_subscribers": 111980, "created_utc": 1598647676.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rust", "selftext": "hi,\n\ni am using proc macro to generate encode/decode functions for a struct.\n\nthis is done using syn and quote crates, and works out well. I get a .so library after building and it can be linked against from C code.\n\nbut i also need to generate C header files. i heard that writing a file from proc macro code is a bad idea.\n\nso how to get it done?", "author_fullname": "t2_3x5juc4f", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "how to generate files from procedural macros?", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rust", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_iiolxy", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 0.93, "author_flair_background_color": null, "subreddit_type": "public", "ups": 12, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 12, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1598716045.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rust", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;hi,&lt;/p&gt;\n\n&lt;p&gt;i am using proc macro to generate encode/decode functions for a struct.&lt;/p&gt;\n\n&lt;p&gt;this is done using syn and quote crates, and works out well. I get a .so library after building and it can be linked against from C code.&lt;/p&gt;\n\n&lt;p&gt;but i also need to generate C header files. i heard that writing a file from proc macro code is a bad idea.&lt;/p&gt;\n\n&lt;p&gt;so how to get it done?&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2s7lj", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "iiolxy", "is_robot_indexable": true, "report_reasons": null, "author": "zhuzhe1", "discussion_type": null, "num_comments": 2, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rust/comments/iiolxy/how_to_generate_files_from_procedural_macros/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rust/comments/iiolxy/how_to_generate_files_from_procedural_macros/", "subreddit_subscribers": 111980, "created_utc": 1598687245.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rust", "selftext": "One of the features that has been conspicuously missing is multiplying and dividing *duration*s and *rate*s by an integer. This version adds both operator mul/div and *checked* mul/div.\n\nComing from C++, I still miss the implicit widening of integers. I decided to incorporate some implicit widening and worked very well, except for the huge (relatively speaking) additional code needed for wider-than-32-bits integers. I have reverted that implicit widening in this version and used an example binary and the cargo-bloat command to verify the huge space savings. I now have a much more favorable view of the strict type behavior of Rust.\n\nSee [https://crates.io/crates/embedded-time](https://crates.io/crates/embedded-time) for more information about `embedded-time` if you're interested.", "author_fullname": "t2_1ysst3ob", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "embedded-time v0.10.0 Release", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rust", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_iiiuwo", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 0.89, "author_flair_background_color": null, "subreddit_type": "public", "ups": 19, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 19, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1598689421.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rust", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;One of the features that has been conspicuously missing is multiplying and dividing &lt;em&gt;duration&lt;/em&gt;s and &lt;em&gt;rate&lt;/em&gt;s by an integer. This version adds both operator mul/div and &lt;em&gt;checked&lt;/em&gt; mul/div.&lt;/p&gt;\n\n&lt;p&gt;Coming from C++, I still miss the implicit widening of integers. I decided to incorporate some implicit widening and worked very well, except for the huge (relatively speaking) additional code needed for wider-than-32-bits integers. I have reverted that implicit widening in this version and used an example binary and the cargo-bloat command to verify the huge space savings. I now have a much more favorable view of the strict type behavior of Rust.&lt;/p&gt;\n\n&lt;p&gt;See &lt;a href=\"https://crates.io/crates/embedded-time\"&gt;https://crates.io/crates/embedded-time&lt;/a&gt; for more information about &lt;code&gt;embedded-time&lt;/code&gt; if you&amp;#39;re interested.&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2s7lj", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "iiiuwo", "is_robot_indexable": true, "report_reasons": null, "author": "PTaylor_FluenTech", "discussion_type": null, "num_comments": 0, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rust/comments/iiiuwo/embeddedtime_v0100_release/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rust/comments/iiiuwo/embeddedtime_v0100_release/", "subreddit_subscribers": 111980, "created_utc": 1598660621.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rust", "selftext": "For my Rust web server I'm looking to compress uploaded images. I looked around and found [oxipng](https://github.com/shssoichiro/oxipng) but it seems to be lossless only.\n\nIt seems that lossy compression is pretty good these days. For example, https://tinypng.com (which uses quantization via [pngquant](https://github.com/kornelski/pngquant)) can often achieve compression rates of 70% for the images I tested, compared to the 10% I was getting with oxipng, all while visually looking very close to the original image.\n\nI'd just use pngquant (as they appear to have Rust bindings) but it seems like it forces your project to either be GPL or pay a $&gt;1000 / year license fee, which I cannot afford.\n\nAre there any other recommendations for image compression libraries that can be called from Rust, achieve high compression rates, and have an open license such as MIT or Apache?", "author_fullname": "t2_pdypq8w", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Best library for lossy image compression?", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rust", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_iiojju", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 0.75, "author_flair_background_color": null, "subreddit_type": "public", "ups": 4, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 4, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1598715658.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rust", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;For my Rust web server I&amp;#39;m looking to compress uploaded images. I looked around and found &lt;a href=\"https://github.com/shssoichiro/oxipng\"&gt;oxipng&lt;/a&gt; but it seems to be lossless only.&lt;/p&gt;\n\n&lt;p&gt;It seems that lossy compression is pretty good these days. For example, &lt;a href=\"https://tinypng.com\"&gt;https://tinypng.com&lt;/a&gt; (which uses quantization via &lt;a href=\"https://github.com/kornelski/pngquant\"&gt;pngquant&lt;/a&gt;) can often achieve compression rates of 70% for the images I tested, compared to the 10% I was getting with oxipng, all while visually looking very close to the original image.&lt;/p&gt;\n\n&lt;p&gt;I&amp;#39;d just use pngquant (as they appear to have Rust bindings) but it seems like it forces your project to either be GPL or pay a $&amp;gt;1000 / year license fee, which I cannot afford.&lt;/p&gt;\n\n&lt;p&gt;Are there any other recommendations for image compression libraries that can be called from Rust, achieve high compression rates, and have an open license such as MIT or Apache?&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2s7lj", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "iiojju", "is_robot_indexable": true, "report_reasons": null, "author": "redditaccount624", "discussion_type": null, "num_comments": 14, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rust/comments/iiojju/best_library_for_lossy_image_compression/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rust/comments/iiojju/best_library_for_lossy_image_compression/", "subreddit_subscribers": 111980, "created_utc": 1598686858.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rust", "selftext": "Hey guys. I'm using rust-sfml for rendering in a project of mine. It's fine for the most part, but I'm finding one thing very hard to solve.\n\nIn rust-sfml, the RectangleShape struct has the following (very simplified) form:\n\n    struct RectangleShape&lt;'s&gt; {\n        ...\n        fn set_texture(&amp;mut self, texture: &amp;'s Texture, reset_rect: bool) {... }\n        ...\n    }\n\nNote the lifetime on the texture reference. In my project, things like resources are handled using Arcs. A custom widget I'm trying to design has (basically) the following form:\n\n    pub struct RectangularPanel&lt;'s&gt; {\n        shape: RectangleShape&lt;'s&gt;,\n        texture: Arc&lt;Texture&gt;,\n    }\n\nWhen I try to do the simplest example - i.e. hardcoded, not async loading, non-optional - the entire system shits itself due to lifetime issues. When I instantiate the shape in the RectangularPanel struct, I need to provide a texture reference lifetimed to 's , but suppose I try something very brute force like this:\n\n    pub fn new(widget_table: &amp;Table) -&gt; Result&lt;Self&gt; {\n        let handle = Arc::new(Texture::from_file(\"hardcoded_filename.png\").unwrap());\n        let mut panel = RectangularPanel {\n            shape: RectangleShape::new(),\n            texture: handle,\n        };\n        panel.shape.set_texture(&amp;panel.texture, false);\n        Ok(panel)\n    }\n\nThis doesn't work because I'm returning panel, which references borrowed data. No matter what I do, I can't get the compiler to agree that the texture will be valid for the whole lifetime of the RectangleShape. But I'm pretty sure this lifetime relationship is valid, since because both the RectangleShape and the Arc are owned by the RectangularPanel struct, the shape can always access that texture.\n\nIs there any way to resolve this type of issue? I'm still a bit of a beginner so it's possible my design ideas just suck. It's also possible it's not resolvable since SFML is still chained to C-like ways of doing things.", "author_fullname": "t2_ezzmq", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Lifetime issues with rust-sfml", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rust", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_iip5jv", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 1.0, "author_flair_background_color": null, "subreddit_type": "public", "ups": 4, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 4, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1598719352.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rust", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;Hey guys. I&amp;#39;m using rust-sfml for rendering in a project of mine. It&amp;#39;s fine for the most part, but I&amp;#39;m finding one thing very hard to solve.&lt;/p&gt;\n\n&lt;p&gt;In rust-sfml, the RectangleShape struct has the following (very simplified) form:&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;struct RectangleShape&amp;lt;&amp;#39;s&amp;gt; {\n    ...\n    fn set_texture(&amp;amp;mut self, texture: &amp;amp;&amp;#39;s Texture, reset_rect: bool) {... }\n    ...\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Note the lifetime on the texture reference. In my project, things like resources are handled using Arcs. A custom widget I&amp;#39;m trying to design has (basically) the following form:&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;pub struct RectangularPanel&amp;lt;&amp;#39;s&amp;gt; {\n    shape: RectangleShape&amp;lt;&amp;#39;s&amp;gt;,\n    texture: Arc&amp;lt;Texture&amp;gt;,\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;When I try to do the simplest example - i.e. hardcoded, not async loading, non-optional - the entire system shits itself due to lifetime issues. When I instantiate the shape in the RectangularPanel struct, I need to provide a texture reference lifetimed to &amp;#39;s , but suppose I try something very brute force like this:&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;pub fn new(widget_table: &amp;amp;Table) -&amp;gt; Result&amp;lt;Self&amp;gt; {\n    let handle = Arc::new(Texture::from_file(&amp;quot;hardcoded_filename.png&amp;quot;).unwrap());\n    let mut panel = RectangularPanel {\n        shape: RectangleShape::new(),\n        texture: handle,\n    };\n    panel.shape.set_texture(&amp;amp;panel.texture, false);\n    Ok(panel)\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;This doesn&amp;#39;t work because I&amp;#39;m returning panel, which references borrowed data. No matter what I do, I can&amp;#39;t get the compiler to agree that the texture will be valid for the whole lifetime of the RectangleShape. But I&amp;#39;m pretty sure this lifetime relationship is valid, since because both the RectangleShape and the Arc are owned by the RectangularPanel struct, the shape can always access that texture.&lt;/p&gt;\n\n&lt;p&gt;Is there any way to resolve this type of issue? I&amp;#39;m still a bit of a beginner so it&amp;#39;s possible my design ideas just suck. It&amp;#39;s also possible it&amp;#39;s not resolvable since SFML is still chained to C-like ways of doing things.&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": true, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2s7lj", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "iip5jv", "is_robot_indexable": true, "report_reasons": null, "author": "TheRootsHoldTheSky", "discussion_type": null, "num_comments": 1, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rust/comments/iip5jv/lifetime_issues_with_rustsfml/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rust/comments/iip5jv/lifetime_issues_with_rustsfml/", "subreddit_subscribers": 111980, "created_utc": 1598690552.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rust", "selftext": "", "author_fullname": "t2_3dtz2wix", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "#[const_fn] : An attribute for easy generation of const functions with conditional compilations.", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rust", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": true, "name": "t3_iirb88", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 1.0, "author_flair_background_color": null, "subreddit_type": "public", "ups": 2, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 2, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": false, "mod_note": null, "created": 1598731644.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "github.com", "allow_live_comments": false, "selftext_html": null, "likes": null, "suggested_sort": null, "banned_at_utc": null, "url_overridden_by_dest": "https://github.com/taiki-e/const_fn", "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2s7lj", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "iirb88", "is_robot_indexable": true, "report_reasons": null, "author": "taiki-e", "discussion_type": null, "num_comments": 1, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rust/comments/iirb88/const_fn_an_attribute_for_easy_generation_of/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://github.com/taiki-e/const_fn", "subreddit_subscribers": 111980, "created_utc": 1598702844.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rust", "selftext": "I'm looking to emulate parts of my work's C++ codebase. Partially as a learning experience, and hopefully make a case to start shifting some work towards Rust. The latter is more of a long-term goal, so C++ integration/API is not really the focus yet.\n\nThe C++ applications revolve around spinning up multiple threads connected by single-producer, single-consumer channels. Work loads typically resemble `process(vec&lt;T&gt; x) -&gt; vec&lt;R&gt;` and therefore channel elements are always a vector of some kind i.e. `channel&lt;vec&lt;T&gt;&gt;`. In order to save on re-allocation the vectors get re-used, and they only re-allocate when the capacity needs to grow (there is no shrinking allowed). This is possible because the work that gets done is pretty rinse repeat, so once these vectors have been resized the first time, they pretty much stay the same size for the next. Effectively, each channel is actually a circular-buffer of vectors. Vector sizes vary by work type, but typically range from 10k to 1M elements of basic numeric types.\n\nI don't think such an approach is well suited to Rust's ownership rules (?). And honestly, I dislike using our current C++ framework (even though it is very performant), and it removes the ability to perform work in-place on the current vector i.e. the output vector cannot be the input vector.\n\nI was thinking an alternative is using normal channels and just ignoring allocation cost until it becomes a problem. Then mixing in some form of custom allocator/arena instead?\n\nAny prior art, existing crates or alternative ideas are welcome.", "author_fullname": "t2_h26a7", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Looking for input on emulating my work's C++ framework", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rust", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_iiprte", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 0.72, "author_flair_background_color": null, "subreddit_type": "public", "ups": 3, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 3, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1598722916.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rust", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;I&amp;#39;m looking to emulate parts of my work&amp;#39;s C++ codebase. Partially as a learning experience, and hopefully make a case to start shifting some work towards Rust. The latter is more of a long-term goal, so C++ integration/API is not really the focus yet.&lt;/p&gt;\n\n&lt;p&gt;The C++ applications revolve around spinning up multiple threads connected by single-producer, single-consumer channels. Work loads typically resemble &lt;code&gt;process(vec&amp;lt;T&amp;gt; x) -&amp;gt; vec&amp;lt;R&amp;gt;&lt;/code&gt; and therefore channel elements are always a vector of some kind i.e. &lt;code&gt;channel&amp;lt;vec&amp;lt;T&amp;gt;&amp;gt;&lt;/code&gt;. In order to save on re-allocation the vectors get re-used, and they only re-allocate when the capacity needs to grow (there is no shrinking allowed). This is possible because the work that gets done is pretty rinse repeat, so once these vectors have been resized the first time, they pretty much stay the same size for the next. Effectively, each channel is actually a circular-buffer of vectors. Vector sizes vary by work type, but typically range from 10k to 1M elements of basic numeric types.&lt;/p&gt;\n\n&lt;p&gt;I don&amp;#39;t think such an approach is well suited to Rust&amp;#39;s ownership rules (?). And honestly, I dislike using our current C++ framework (even though it is very performant), and it removes the ability to perform work in-place on the current vector i.e. the output vector cannot be the input vector.&lt;/p&gt;\n\n&lt;p&gt;I was thinking an alternative is using normal channels and just ignoring allocation cost until it becomes a problem. Then mixing in some form of custom allocator/arena instead?&lt;/p&gt;\n\n&lt;p&gt;Any prior art, existing crates or alternative ideas are welcome.&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2s7lj", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "iiprte", "is_robot_indexable": true, "report_reasons": null, "author": "meex10", "discussion_type": null, "num_comments": 5, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rust/comments/iiprte/looking_for_input_on_emulating_my_works_c/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rust/comments/iiprte/looking_for_input_on_emulating_my_works_c/", "subreddit_subscribers": 111980, "created_utc": 1598694116.0, "num_crossposts": 0, "media": null, "is_video": false}}], "after": "t3_iiprte", "before": null}}