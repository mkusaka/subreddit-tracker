{"kind": "Listing", "data": {"modhash": "", "dist": 10, "children": [{"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "aws", "selftext": "Originally posted on stackoverflow: [https://stackoverflow.com/questions/59967346/which-is-better-for-s3-uploads-from-client-side-http-post-form-or-using-a-cogn](https://stackoverflow.com/questions/59967346/which-is-better-for-s3-uploads-from-client-side-http-post-form-or-using-a-cogn)\n\n&gt;I want to upload a file to S3 directly from client browser. I don't want that file to go through my server.    \n&gt;  \n&gt;After doing some research I am seeing two ways to do this:   \n&gt;  \n&gt;  \n&gt;  \n&gt; 1. \\[Cognito Identity\\]\\[1\\]  \n&gt;  \n&gt; 2. \\[Upload using HTTP POST form\\]\\[2\\]    \n&gt;  \n&gt;  \n&gt;  \n&gt;  \n&gt;  \n&gt;Issue with Cognito Identity is that we are not using a user pool. We are authenticating using our database without AWS Cognito User Pool. And without that we only have 'IdentityPoolId', which according to me, anyone can copy from our website's JS code and upload objects to our S3 bucket. Correct me if I am wrong with this assumption.    \n&gt;  \n&gt;  \n&gt;  \n&gt;Using HTTP POST form seems OK to me but while researching I am seeing that Cognito is the new way to do this and I'm afraid that I'm missing something.  \n&gt;  \n&gt;  \n&gt;  \n&gt;  \n&gt;  \n&gt;  \\[1\\]: [https://aws.amazon.com/blogs/mobile/building-fine-grained-authorization-using-amazon-cognito-user-pools-groups/](https://aws.amazon.com/blogs/mobile/building-fine-grained-authorization-using-amazon-cognito-user-pools-groups/)  \n&gt;  \n&gt;  \\[2\\]: [https://docs.aws.amazon.com/AmazonS3/latest/API/sigv4-authentication-HTTPPOST.html](https://docs.aws.amazon.com/AmazonS3/latest/API/sigv4-authentication-HTTPPOST.html)", "author_fullname": "t2_wgaqz", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Which is better for S3 uploads from client side - HTTP POST form or using a Cognito identity", "link_flair_richtext": [], "subreddit_name_prefixed": "r/aws", "hidden": false, "pwls": 6, "link_flair_css_class": "", "downs": 0, "hide_score": false, "name": "t3_ewjyqa", "quarantine": false, "link_flair_text_color": "dark", "author_flair_background_color": null, "subreddit_type": "public", "ups": 11, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": "technical question", "can_mod_post": false, "score": 11, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1580479699.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.aws", "allow_live_comments": true, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;Originally posted on stackoverflow: &lt;a href=\"https://stackoverflow.com/questions/59967346/which-is-better-for-s3-uploads-from-client-side-http-post-form-or-using-a-cogn\"&gt;https://stackoverflow.com/questions/59967346/which-is-better-for-s3-uploads-from-client-side-http-post-form-or-using-a-cogn&lt;/a&gt;&lt;/p&gt;\n\n&lt;blockquote&gt;\n&lt;p&gt;I want to upload a file to S3 directly from client browser. I don&amp;#39;t want that file to go through my server.    &lt;/p&gt;\n\n&lt;p&gt;After doing some research I am seeing two ways to do this:   &lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;&lt;p&gt;[Cognito Identity][1]  &lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;[Upload using HTTP POST form][2]    &lt;/p&gt;&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;p&gt;Issue with Cognito Identity is that we are not using a user pool. We are authenticating using our database without AWS Cognito User Pool. And without that we only have &amp;#39;IdentityPoolId&amp;#39;, which according to me, anyone can copy from our website&amp;#39;s JS code and upload objects to our S3 bucket. Correct me if I am wrong with this assumption.    &lt;/p&gt;\n\n&lt;p&gt;Using HTTP POST form seems OK to me but while researching I am seeing that Cognito is the new way to do this and I&amp;#39;m afraid that I&amp;#39;m missing something.  &lt;/p&gt;\n\n&lt;p&gt;[1]: &lt;a href=\"https://aws.amazon.com/blogs/mobile/building-fine-grained-authorization-using-amazon-cognito-user-pools-groups/\"&gt;https://aws.amazon.com/blogs/mobile/building-fine-grained-authorization-using-amazon-cognito-user-pools-groups/&lt;/a&gt;  &lt;/p&gt;\n\n&lt;p&gt;[2]: &lt;a href=\"https://docs.aws.amazon.com/AmazonS3/latest/API/sigv4-authentication-HTTPPOST.html\"&gt;https://docs.aws.amazon.com/AmazonS3/latest/API/sigv4-authentication-HTTPPOST.html&lt;/a&gt;&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "link_flair_template_id": "e0acaab0-fe51-11e8-b457-0e86fa5111f4", "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qh84", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "#dadada", "id": "ewjyqa", "is_robot_indexable": true, "report_reasons": null, "author": "ss573", "discussion_type": null, "num_comments": 3, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/aws/comments/ewjyqa/which_is_better_for_s3_uploads_from_client_side/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/aws/comments/ewjyqa/which_is_better_for_s3_uploads_from_client_side/", "subreddit_subscribers": 106978, "created_utc": 1580450899.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "aws", "selftext": "I'm trying to get Kibana set up correctly with Fargate. I have followed this simple guide: [https://aws.amazon.com/blogs/compute/building-deploying-and-operating-containerized-applications-with-aws-fargate/](https://aws.amazon.com/blogs/compute/building-deploying-and-operating-containerized-applications-with-aws-fargate/)\n\nThe Fargate Task Definition is set up to run a Kibana docker image, based on this Dockerfile [https://github.com/docker-library/kibana/blob/4eef267ab6d1e6a655f4e44dabe9aef7915e4b99/7/Dockerfile](https://github.com/docker-library/kibana/blob/4eef267ab6d1e6a655f4e44dabe9aef7915e4b99/7/Dockerfile)  \n\n\nSince Kibana demands incoming traffic on port 5601, I have opend this port in my awsvpc.\n\nThe reponse I get is **502 Bad Gateway**, when I go to the DNS name for the loadbalancer (port 5601).  \n\n\nWhat can the problem be? I think maybe it has something to do with the fargate task and the docker image, that has problem routing the traffic to the correct port or have trouble making the port 5601 container port available for incoming traffic.\n\n&amp;#x200B;\n\nWhen I run the dockerimage on my local computer, it is possible to add parameters to define portmapping. Is this possible for fargate-task aswell?  \n\n\nSee attached image, for how the container is set up for fargate task:  \n\n\nhttps://preview.redd.it/ay1bzjiz34e41.png?width=1033&amp;format=png&amp;auto=webp&amp;s=c8234dc8eb0cfd0f4bc35396e1799aa30acf6ea9", "author_fullname": "t2_4ncvh9jc", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Setup Kibana with Fargate", "link_flair_richtext": [], "subreddit_name_prefixed": "r/aws", "hidden": false, "pwls": 6, "link_flair_css_class": "", "downs": 0, "hide_score": true, "media_metadata": {"ay1bzjiz34e41": {"status": "valid", "e": "Image", "m": "image/png", "p": [{"y": 85, "x": 108, "u": "https://external-preview.redd.it/ay1bzjiz34e41.png?width=108&amp;crop=smart&amp;auto=webp&amp;s=e5c1d5985070c60413fb279bd888383857240281"}, {"y": 171, "x": 216, "u": "https://external-preview.redd.it/ay1bzjiz34e41.png?width=216&amp;crop=smart&amp;auto=webp&amp;s=1505e8160ee6e56fbc829d286ac4cf66905945a3"}, {"y": 254, "x": 320, "u": "https://external-preview.redd.it/ay1bzjiz34e41.png?width=320&amp;crop=smart&amp;auto=webp&amp;s=d818ec4979c4c7453eb639ad1b65fff8eb65422f"}, {"y": 508, "x": 640, "u": "https://external-preview.redd.it/ay1bzjiz34e41.png?width=640&amp;crop=smart&amp;auto=webp&amp;s=789641c8924b31d3f9e683edaf00a036ef801f67"}, {"y": 762, "x": 960, "u": "https://external-preview.redd.it/ay1bzjiz34e41.png?width=960&amp;crop=smart&amp;auto=webp&amp;s=6b05eff00689d4aaff355584341dae08d02d55a4"}], "s": {"y": 821, "x": 1033, "u": "https://preview.redd.it/ay1bzjiz34e41.png?width=1033&amp;format=png&amp;auto=webp&amp;s=c8234dc8eb0cfd0f4bc35396e1799aa30acf6ea9"}, "id": "ay1bzjiz34e41"}}, "name": "t3_ewo5sz", "quarantine": false, "link_flair_text_color": "dark", "author_flair_background_color": null, "subreddit_type": "public", "ups": 2, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": "technical question", "can_mod_post": false, "score": 2, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1580504545.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.aws", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;I&amp;#39;m trying to get Kibana set up correctly with Fargate. I have followed this simple guide: &lt;a href=\"https://aws.amazon.com/blogs/compute/building-deploying-and-operating-containerized-applications-with-aws-fargate/\"&gt;https://aws.amazon.com/blogs/compute/building-deploying-and-operating-containerized-applications-with-aws-fargate/&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;The Fargate Task Definition is set up to run a Kibana docker image, based on this Dockerfile &lt;a href=\"https://github.com/docker-library/kibana/blob/4eef267ab6d1e6a655f4e44dabe9aef7915e4b99/7/Dockerfile\"&gt;https://github.com/docker-library/kibana/blob/4eef267ab6d1e6a655f4e44dabe9aef7915e4b99/7/Dockerfile&lt;/a&gt;  &lt;/p&gt;\n\n&lt;p&gt;Since Kibana demands incoming traffic on port 5601, I have opend this port in my awsvpc.&lt;/p&gt;\n\n&lt;p&gt;The reponse I get is &lt;strong&gt;502 Bad Gateway&lt;/strong&gt;, when I go to the DNS name for the loadbalancer (port 5601).  &lt;/p&gt;\n\n&lt;p&gt;What can the problem be? I think maybe it has something to do with the fargate task and the docker image, that has problem routing the traffic to the correct port or have trouble making the port 5601 container port available for incoming traffic.&lt;/p&gt;\n\n&lt;p&gt;&amp;#x200B;&lt;/p&gt;\n\n&lt;p&gt;When I run the dockerimage on my local computer, it is possible to add parameters to define portmapping. Is this possible for fargate-task aswell?  &lt;/p&gt;\n\n&lt;p&gt;See attached image, for how the container is set up for fargate task:  &lt;/p&gt;\n\n&lt;p&gt;&lt;a href=\"https://preview.redd.it/ay1bzjiz34e41.png?width=1033&amp;amp;format=png&amp;amp;auto=webp&amp;amp;s=c8234dc8eb0cfd0f4bc35396e1799aa30acf6ea9\"&gt;https://preview.redd.it/ay1bzjiz34e41.png?width=1033&amp;amp;format=png&amp;amp;auto=webp&amp;amp;s=c8234dc8eb0cfd0f4bc35396e1799aa30acf6ea9&lt;/a&gt;&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": true, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "link_flair_template_id": "e0acaab0-fe51-11e8-b457-0e86fa5111f4", "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qh84", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "#dadada", "id": "ewo5sz", "is_robot_indexable": true, "report_reasons": null, "author": "slowride_takeiteasy", "discussion_type": null, "num_comments": 1, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/aws/comments/ewo5sz/setup_kibana_with_fargate/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/aws/comments/ewo5sz/setup_kibana_with_fargate/", "subreddit_subscribers": 106978, "created_utc": 1580475745.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "aws", "selftext": "For two months, I've been using the free tier of RDS to use MySQL with a CRUD webapp for my CV. \n\nIt gives you 750 hours a month and if you exceed that you have to pay, without an option to disable the service once the limit has been reached.\n\nSo far it has come slightly below the 750 hours, so I have not had to pay. The thing is, I don't know what would factors contribute towards the hours used. So far it has only been me using the webapp. I read on documentation that it has to do with instances used. Does that mean that it is affected by different IPs checking out the webapp, like when I show it to prospective employers?\n\nI am concerned because if it is coming to just under the 750 hours with just me using it, if employers start having a look, I will have to pay a lot of money.", "author_fullname": "t2_5jokmkp3", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "RDS Useage Question", "link_flair_richtext": [], "subreddit_name_prefixed": "r/aws", "hidden": false, "pwls": 6, "link_flair_css_class": "", "downs": 0, "hide_score": false, "name": "t3_ewmfui", "quarantine": false, "link_flair_text_color": "dark", "author_flair_background_color": null, "subreddit_type": "public", "ups": 3, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": "technical question", "can_mod_post": false, "score": 3, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1580494755.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.aws", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;For two months, I&amp;#39;ve been using the free tier of RDS to use MySQL with a CRUD webapp for my CV. &lt;/p&gt;\n\n&lt;p&gt;It gives you 750 hours a month and if you exceed that you have to pay, without an option to disable the service once the limit has been reached.&lt;/p&gt;\n\n&lt;p&gt;So far it has come slightly below the 750 hours, so I have not had to pay. The thing is, I don&amp;#39;t know what would factors contribute towards the hours used. So far it has only been me using the webapp. I read on documentation that it has to do with instances used. Does that mean that it is affected by different IPs checking out the webapp, like when I show it to prospective employers?&lt;/p&gt;\n\n&lt;p&gt;I am concerned because if it is coming to just under the 750 hours with just me using it, if employers start having a look, I will have to pay a lot of money.&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": true, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "link_flair_template_id": "e0acaab0-fe51-11e8-b457-0e86fa5111f4", "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qh84", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "#dadada", "id": "ewmfui", "is_robot_indexable": true, "report_reasons": null, "author": "selftaughtreactdev", "discussion_type": null, "num_comments": 7, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/aws/comments/ewmfui/rds_useage_question/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/aws/comments/ewmfui/rds_useage_question/", "subreddit_subscribers": 106978, "created_utc": 1580465955.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "aws", "selftext": "Trying to learn VPC, see below garbage pic for reference:\n\nhttps://preview.redd.it/8eu28rb23zd41.png?width=626&amp;format=png&amp;auto=webp&amp;s=d6eccea0d5a0137c73fe71f92204a4169bac1507\n\nVPC questions:\n\n* I (generally) want my databases in private subnets?\n   * If for some reason they need internet I'd do a NAT GW in (another) public subnet?\n* I (generally) want my EC2 instances in private subnets?\n   * If for some reason they need internet I'd do a NAT GW in (another) public subnet?\n* I generally want my ELB in a public subnet?\n* Does the ASG for the EC2s go in a public or private subnet? \n   * Or is this not really a thing that has a \"location\"?\n* I only need 1 internet gateway per VPC?\n* In what scenario would 1 single VPC need NAT GWs in 2 separate (public) subnets.\n* What makes a subnet private vs public?\n   * Is this just weather or not it's routed to an IG?\n* Is the only difference between a NAT gateway and an internet gateway that a NAT gateway is outbound only?", "author_fullname": "t2_4187lstg", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Understanding VPCs?", "link_flair_richtext": [], "subreddit_name_prefixed": "r/aws", "hidden": false, "pwls": 6, "link_flair_css_class": "", "downs": 0, "hide_score": false, "media_metadata": {"8eu28rb23zd41": {"status": "valid", "e": "Image", "m": "image/png", "p": [{"y": 77, "x": 108, "u": "https://external-preview.redd.it/8eu28rb23zd41.png?width=108&amp;crop=smart&amp;auto=webp&amp;s=19f5576e11710305ad7bec7ea2bcf6deee127a87"}, {"y": 155, "x": 216, "u": "https://external-preview.redd.it/8eu28rb23zd41.png?width=216&amp;crop=smart&amp;auto=webp&amp;s=65591ca038809f67939e1f7f71c119cae123dd1c"}, {"y": 231, "x": 320, "u": "https://external-preview.redd.it/8eu28rb23zd41.png?width=320&amp;crop=smart&amp;auto=webp&amp;s=296c4b008c92ba85831eee6649097271b488ad82"}], "s": {"y": 452, "x": 626, "u": "https://preview.redd.it/8eu28rb23zd41.png?width=626&amp;format=png&amp;auto=webp&amp;s=d6eccea0d5a0137c73fe71f92204a4169bac1507"}, "id": "8eu28rb23zd41"}}, "name": "t3_ewbhvb", "quarantine": false, "link_flair_text_color": "dark", "author_flair_background_color": null, "subreddit_type": "public", "ups": 40, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": "networking", "can_mod_post": false, "score": 40, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1580444105.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.aws", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;Trying to learn VPC, see below garbage pic for reference:&lt;/p&gt;\n\n&lt;p&gt;&lt;a href=\"https://preview.redd.it/8eu28rb23zd41.png?width=626&amp;amp;format=png&amp;amp;auto=webp&amp;amp;s=d6eccea0d5a0137c73fe71f92204a4169bac1507\"&gt;https://preview.redd.it/8eu28rb23zd41.png?width=626&amp;amp;format=png&amp;amp;auto=webp&amp;amp;s=d6eccea0d5a0137c73fe71f92204a4169bac1507&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;VPC questions:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;I (generally) want my databases in private subnets?\n\n&lt;ul&gt;\n&lt;li&gt;If for some reason they need internet I&amp;#39;d do a NAT GW in (another) public subnet?&lt;/li&gt;\n&lt;/ul&gt;&lt;/li&gt;\n&lt;li&gt;I (generally) want my EC2 instances in private subnets?\n\n&lt;ul&gt;\n&lt;li&gt;If for some reason they need internet I&amp;#39;d do a NAT GW in (another) public subnet?&lt;/li&gt;\n&lt;/ul&gt;&lt;/li&gt;\n&lt;li&gt;I generally want my ELB in a public subnet?&lt;/li&gt;\n&lt;li&gt;Does the ASG for the EC2s go in a public or private subnet? \n\n&lt;ul&gt;\n&lt;li&gt;Or is this not really a thing that has a &amp;quot;location&amp;quot;?&lt;/li&gt;\n&lt;/ul&gt;&lt;/li&gt;\n&lt;li&gt;I only need 1 internet gateway per VPC?&lt;/li&gt;\n&lt;li&gt;In what scenario would 1 single VPC need NAT GWs in 2 separate (public) subnets.&lt;/li&gt;\n&lt;li&gt;What makes a subnet private vs public?\n\n&lt;ul&gt;\n&lt;li&gt;Is this just weather or not it&amp;#39;s routed to an IG?&lt;/li&gt;\n&lt;/ul&gt;&lt;/li&gt;\n&lt;li&gt;Is the only difference between a NAT gateway and an internet gateway that a NAT gateway is outbound only?&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "link_flair_template_id": "fa6637dc-fe51-11e8-b451-0e432432760c", "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qh84", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "#dadada", "id": "ewbhvb", "is_robot_indexable": true, "report_reasons": null, "author": "POEthrowaway-2019", "discussion_type": null, "num_comments": 18, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/aws/comments/ewbhvb/understanding_vpcs/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/aws/comments/ewbhvb/understanding_vpcs/", "subreddit_subscribers": 106978, "created_utc": 1580415305.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "aws", "selftext": "Hi folks, \n\nSomething at work is requiring me to use Athena to query something like 2 TB of data from a client S3 bucket.\n\nI was wondering about the pricing structure of this. I designed my query based off of a very small testing file with the same shape as the client data, so I designed the process using something like 5 queries that produced interim tables, 3 of which add columns, 1 which splits the data and re-unions, and one which groups the data by a set of columns. \n\nI have the option of consolidating these queries into one nested query.\n\nSo according to what AWS says on their website about Athena pricing, this single nested query should cost around $10 ($5/TB * 2 TB), while running the process using interim tables described above would incur about $50 of costs. Does anyone know if this is actually the case? Are you charged based on the number of SELECT statements are contained within your query, or can you actually save money by consolidating SELECTs into a nested query?\n\nThanks for the help everyone!", "author_fullname": "t2_4oext", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Cost of Nested Queries on AWS Athena", "link_flair_richtext": [], "subreddit_name_prefixed": "r/aws", "hidden": false, "pwls": 6, "link_flair_css_class": "", "downs": 0, "hide_score": false, "name": "t3_ewgdw2", "quarantine": false, "link_flair_text_color": "dark", "author_flair_background_color": null, "subreddit_type": "public", "ups": 9, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": "technical question", "can_mod_post": false, "score": 9, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1580462989.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.aws", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;Hi folks, &lt;/p&gt;\n\n&lt;p&gt;Something at work is requiring me to use Athena to query something like 2 TB of data from a client S3 bucket.&lt;/p&gt;\n\n&lt;p&gt;I was wondering about the pricing structure of this. I designed my query based off of a very small testing file with the same shape as the client data, so I designed the process using something like 5 queries that produced interim tables, 3 of which add columns, 1 which splits the data and re-unions, and one which groups the data by a set of columns. &lt;/p&gt;\n\n&lt;p&gt;I have the option of consolidating these queries into one nested query.&lt;/p&gt;\n\n&lt;p&gt;So according to what AWS says on their website about Athena pricing, this single nested query should cost around $10 ($5/TB * 2 TB), while running the process using interim tables described above would incur about $50 of costs. Does anyone know if this is actually the case? Are you charged based on the number of SELECT statements are contained within your query, or can you actually save money by consolidating SELECTs into a nested query?&lt;/p&gt;\n\n&lt;p&gt;Thanks for the help everyone!&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": true, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "link_flair_template_id": "e0acaab0-fe51-11e8-b457-0e86fa5111f4", "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qh84", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "#dadada", "id": "ewgdw2", "is_robot_indexable": true, "report_reasons": null, "author": "shmalo", "discussion_type": null, "num_comments": 2, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/aws/comments/ewgdw2/cost_of_nested_queries_on_aws_athena/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/aws/comments/ewgdw2/cost_of_nested_queries_on_aws_athena/", "subreddit_subscribers": 106978, "created_utc": 1580434189.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "aws", "selftext": "I've read through the AWS documentation on ELB vs ALB and still don't have a good idea on when to use one vs the other - https://aws.amazon.com/elasticloadbalancing/features/\n\nFrom reading the documentation\n\nALB allows for layer 7 routing based on HTTP headers \n\nWhereas\n\nNLB allows for layer 4 routing which is strictly UDP/TCP - network layer.\n\nThey share commonalities - high availability, security features, health checks etc\n\nIt's not as simple as if you don't require routing based off HTTP headers, use NLB?\n\nI've read that NLB can scale better but I don't understand why it can scale better. Is it because it doesn't have to do any processing of any layers above layer 4 - network?", "author_fullname": "t2_3ev7if00", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "ELI5: NLB vs ALB", "link_flair_richtext": [], "subreddit_name_prefixed": "r/aws", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "hide_score": false, "name": "t3_ewby6y", "quarantine": false, "link_flair_text_color": "dark", "author_flair_background_color": null, "subreddit_type": "public", "ups": 19, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 19, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": 1580417405.0, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1580445887.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.aws", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;I&amp;#39;ve read through the AWS documentation on ELB vs ALB and still don&amp;#39;t have a good idea on when to use one vs the other - &lt;a href=\"https://aws.amazon.com/elasticloadbalancing/features/\"&gt;https://aws.amazon.com/elasticloadbalancing/features/&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;From reading the documentation&lt;/p&gt;\n\n&lt;p&gt;ALB allows for layer 7 routing based on HTTP headers &lt;/p&gt;\n\n&lt;p&gt;Whereas&lt;/p&gt;\n\n&lt;p&gt;NLB allows for layer 4 routing which is strictly UDP/TCP - network layer.&lt;/p&gt;\n\n&lt;p&gt;They share commonalities - high availability, security features, health checks etc&lt;/p&gt;\n\n&lt;p&gt;It&amp;#39;s not as simple as if you don&amp;#39;t require routing based off HTTP headers, use NLB?&lt;/p&gt;\n\n&lt;p&gt;I&amp;#39;ve read that NLB can scale better but I don&amp;#39;t understand why it can scale better. Is it because it doesn&amp;#39;t have to do any processing of any layers above layer 4 - network?&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qh84", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "ewby6y", "is_robot_indexable": true, "report_reasons": null, "author": "Truetree9999", "discussion_type": null, "num_comments": 38, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/aws/comments/ewby6y/eli5_nlb_vs_alb/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/aws/comments/ewby6y/eli5_nlb_vs_alb/", "subreddit_subscribers": 106978, "created_utc": 1580417087.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "aws", "selftext": "", "author_fullname": "t2_2cl5kruq", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Why cloudwatch keeps charging me and refund credits every month?", "link_flair_richtext": [], "subreddit_name_prefixed": "r/aws", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "hide_score": false, "name": "t3_ewljot", "quarantine": false, "link_flair_text_color": "dark", "author_flair_background_color": null, "subreddit_type": "public", "ups": 1, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": true, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 1, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": false, "mod_note": null, "created": 1580489339.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "i.redd.it", "allow_live_comments": false, "selftext_html": null, "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": true, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qh84", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "ewljot", "is_robot_indexable": true, "report_reasons": null, "author": "AGoodCG", "discussion_type": null, "num_comments": 2, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/aws/comments/ewljot/why_cloudwatch_keeps_charging_me_and_refund/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://i.redd.it/na32f0i3v2e41.jpg", "subreddit_subscribers": 106978, "created_utc": 1580460539.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "aws", "selftext": "", "author_fullname": "t2_ndnmkuu", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "AWS ElasticSearch Node", "link_flair_richtext": [], "subreddit_name_prefixed": "r/aws", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "hide_score": false, "name": "t3_ewlbs9", "quarantine": false, "link_flair_text_color": "dark", "author_flair_background_color": null, "subreddit_type": "public", "ups": 0, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 0, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": false, "mod_note": null, "created": 1580487754.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "i.imgur.com", "allow_live_comments": false, "selftext_html": null, "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": true, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qh84", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "ewlbs9", "is_robot_indexable": true, "report_reasons": null, "author": "anacondaonline", "discussion_type": null, "num_comments": 2, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/aws/comments/ewlbs9/aws_elasticsearch_node/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://i.imgur.com/WsjmsO0.png", "subreddit_subscribers": 106978, "created_utc": 1580458954.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "aws", "selftext": "I am getting these in my ec2 nginxn logs:\n\n\"GET /latest/dynamic/instance-identity/document HTTP/1.1\" 400 264 \"-\" \"AWS Security Scanner\n\nIs this just a bot trying to do smt shady or a AWS internal \"scanner\" ?", "author_fullname": "t2_43pb7rxp", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "What is \"AWS Security Scanner\" in my server logs?", "link_flair_richtext": [], "subreddit_name_prefixed": "r/aws", "hidden": false, "pwls": 6, "link_flair_css_class": "support", "downs": 0, "hide_score": false, "name": "t3_ew5lzt", "quarantine": false, "link_flair_text_color": "dark", "author_flair_background_color": null, "subreddit_type": "public", "ups": 27, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": "support query", "can_mod_post": false, "score": 27, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1580420503.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.aws", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;I am getting these in my ec2 nginxn logs:&lt;/p&gt;\n\n&lt;p&gt;&amp;quot;GET /latest/dynamic/instance-identity/document HTTP/1.1&amp;quot; 400 264 &amp;quot;-&amp;quot; &amp;quot;AWS Security Scanner&lt;/p&gt;\n\n&lt;p&gt;Is this just a bot trying to do smt shady or a AWS internal &amp;quot;scanner&amp;quot; ?&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "link_flair_template_id": "cd6512b2-b9e3-11e6-af4d-0eb0735f94c0", "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qh84", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "#dadada", "id": "ew5lzt", "is_robot_indexable": true, "report_reasons": null, "author": "SusLaw", "discussion_type": null, "num_comments": 26, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/aws/comments/ew5lzt/what_is_aws_security_scanner_in_my_server_logs/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/aws/comments/ew5lzt/what_is_aws_security_scanner_in_my_server_logs/", "subreddit_subscribers": 106978, "created_utc": 1580391703.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "aws", "selftext": "\nStep Functions, which were launched in November 2016, are a valuable resource for the orchestration of both simple and complex processes in AWS. \nRestricted to 2,000 execution starts per second, you may ask, how can we manage workflows for greater volumes of data? This blog post explores AWS' answer to this problem: express workflows:\n\nhttps://medium.com/@trrhodes/step-functions-express-workflows-cb8436259af6?source=friends_link&amp;sk=a26219e52771af6da7068ec1fc05d629", "author_fullname": "t2_tohngqm", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Step Functions Express Workflows", "link_flair_richtext": [], "subreddit_name_prefixed": "r/aws", "hidden": false, "pwls": 6, "link_flair_css_class": "article", "downs": 0, "hide_score": false, "name": "t3_ewkv5q", "quarantine": false, "link_flair_text_color": "dark", "author_flair_background_color": null, "subreddit_type": "public", "ups": 1, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": "article", "can_mod_post": false, "score": 1, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1580484844.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.aws", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;Step Functions, which were launched in November 2016, are a valuable resource for the orchestration of both simple and complex processes in AWS. \nRestricted to 2,000 execution starts per second, you may ask, how can we manage workflows for greater volumes of data? This blog post explores AWS&amp;#39; answer to this problem: express workflows:&lt;/p&gt;\n\n&lt;p&gt;&lt;a href=\"https://medium.com/@trrhodes/step-functions-express-workflows-cb8436259af6?source=friends_link&amp;amp;sk=a26219e52771af6da7068ec1fc05d629\"&gt;https://medium.com/@trrhodes/step-functions-express-workflows-cb8436259af6?source=friends_link&amp;amp;sk=a26219e52771af6da7068ec1fc05d629&lt;/a&gt;&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": true, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "link_flair_template_id": "85ab6b1a-b9e3-11e6-847a-0e8ffa087616", "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qh84", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "#dadada", "id": "ewkv5q", "is_robot_indexable": true, "report_reasons": null, "author": "kiarash-irandoust", "discussion_type": null, "num_comments": 0, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/aws/comments/ewkv5q/step_functions_express_workflows/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/aws/comments/ewkv5q/step_functions_express_workflows/", "subreddit_subscribers": 106978, "created_utc": 1580456044.0, "num_crossposts": 0, "media": null, "is_video": false}}], "after": "t3_ewkv5q", "before": null}}