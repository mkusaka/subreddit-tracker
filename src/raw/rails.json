{"kind": "Listing", "data": {"modhash": "", "dist": 12, "children": [{"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "In this thread you can showcase your personal pet project to other redditors.\n\nNeed help with a specific problem or just wanna have some extra eyeballs on your code? Ask away!\n\nA suggested format to get you started:\n\n1. **Name of your project**\n2. **A short description**\n3. **Application stack**\n4. **Link to Live app**\n5. **Link to GitHub**\n6. **You experience level**\n7. **Other information or areas that you would like advice on**\n\n\u00a0\n\n^(Many thanks to Kritnc for getting the ball rolling.)", "author_fullname": "t2_6l4z3", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Personal Projects - Show off your own project and/or ask for advice", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "hide_score": false, "name": "t3_gek2rk", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 0.97, "author_flair_background_color": null, "subreddit_type": "public", "ups": 21, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 21, "approved_by": null, "author_premium": true, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1588800767.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;In this thread you can showcase your personal pet project to other redditors.&lt;/p&gt;\n\n&lt;p&gt;Need help with a specific problem or just wanna have some extra eyeballs on your code? Ask away!&lt;/p&gt;\n\n&lt;p&gt;A suggested format to get you started:&lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;&lt;strong&gt;Name of your project&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;A short description&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Application stack&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Link to Live app&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Link to GitHub&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;You experience level&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Other information or areas that you would like advice on&lt;/strong&gt;&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;p&gt;\u00a0&lt;/p&gt;\n\n&lt;p&gt;&lt;sup&gt;Many thanks to Kritnc for getting the ball rolling.&lt;/sup&gt;&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": true, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": "moderator", "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "gek2rk", "is_robot_indexable": true, "report_reasons": null, "author": "AutoModerator", "discussion_type": null, "num_comments": 18, "send_replies": false, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/gek2rk/personal_projects_show_off_your_own_project_andor/", "parent_whitelist_status": "all_ads", "stickied": true, "url": "https://www.reddit.com/r/rails/comments/gek2rk/personal_projects_show_off_your_own_project_andor/", "subreddit_subscribers": 44113, "created_utc": 1588771967.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "In this thread you can showcase your personal pet project to other redditors.\n\nNeed help with a specific problem or just wanna have some extra eyeballs on your code? Ask away!\n\nA suggested format to get you started:\n\n1. **Name of your project**\n2. **A short description**\n3. **Application stack**\n4. **Link to Live app**\n5. **Link to GitHub**\n6. **You experience level**\n7. **Other information or areas that you would like advice on**\n\n\u00a0\n\n^(Many thanks to Kritnc for getting the ball rolling.)", "author_fullname": "t2_6l4z3", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Personal Projects - Show off your own project and/or ask for advice", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "hide_score": true, "name": "t3_gnbebg", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 1.0, "author_flair_background_color": null, "subreddit_type": "public", "ups": 1, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 1, "approved_by": null, "author_premium": true, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1590010359.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;In this thread you can showcase your personal pet project to other redditors.&lt;/p&gt;\n\n&lt;p&gt;Need help with a specific problem or just wanna have some extra eyeballs on your code? Ask away!&lt;/p&gt;\n\n&lt;p&gt;A suggested format to get you started:&lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;&lt;strong&gt;Name of your project&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;A short description&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Application stack&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Link to Live app&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Link to GitHub&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;You experience level&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Other information or areas that you would like advice on&lt;/strong&gt;&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;p&gt;\u00a0&lt;/p&gt;\n\n&lt;p&gt;&lt;sup&gt;Many thanks to Kritnc for getting the ball rolling.&lt;/sup&gt;&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": true, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": "moderator", "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "gnbebg", "is_robot_indexable": true, "report_reasons": null, "author": "AutoModerator", "discussion_type": null, "num_comments": 0, "send_replies": false, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/gnbebg/personal_projects_show_off_your_own_project_andor/", "parent_whitelist_status": "all_ads", "stickied": true, "url": "https://www.reddit.com/r/rails/comments/gnbebg/personal_projects_show_off_your_own_project_andor/", "subreddit_subscribers": 44113, "created_utc": 1589981559.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "What am I doing wrong? Pulling my hair out here. I was on webpacker 4.2.2 then upgraded to 5.1.1 thinking that was my problem...still no dice. Not much I haven't tried. This isn't a new app but one that I'm migrating to using webpacker. **Thanks for any help!**\n\nIn Heroku, the nodejs buildpack is before the ruby buildpack.\n\nLogging: [https://gist.github.com/leesmith/2cc55b46e023f2cc29dbf239bf9401bd](https://gist.github.com/leesmith/2cc55b46e023f2cc29dbf239bf9401bd)\n\nCode: [https://github.com/leesmith/decent\\_authentication/tree/tailwind](https://github.com/leesmith/decent_authentication/tree/tailwind)\n\n**Edit:** Suspicion confirmed. Running `heroku run rake -T --app my-app` returns nothing. WTF?\n\n**Edit:** This had nothing to do with Heroku or webpack...I tried to use rubocop in my `Rakefile` and reverted it back to the standard `Rakefile` that you get with a new rails project. :)", "author_fullname": "t2_5tj2y", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Why won't Heroku run the assets:precompile task (Rails6 + Webpacker)", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "hide_score": false, "name": "t3_gn4cpf", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 1.0, "author_flair_background_color": null, "subreddit_type": "public", "ups": 9, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 9, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": 1589952444.0, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1589976427.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;What am I doing wrong? Pulling my hair out here. I was on webpacker 4.2.2 then upgraded to 5.1.1 thinking that was my problem...still no dice. Not much I haven&amp;#39;t tried. This isn&amp;#39;t a new app but one that I&amp;#39;m migrating to using webpacker. &lt;strong&gt;Thanks for any help!&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;In Heroku, the nodejs buildpack is before the ruby buildpack.&lt;/p&gt;\n\n&lt;p&gt;Logging: &lt;a href=\"https://gist.github.com/leesmith/2cc55b46e023f2cc29dbf239bf9401bd\"&gt;https://gist.github.com/leesmith/2cc55b46e023f2cc29dbf239bf9401bd&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;Code: &lt;a href=\"https://github.com/leesmith/decent_authentication/tree/tailwind\"&gt;https://github.com/leesmith/decent_authentication/tree/tailwind&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;Edit:&lt;/strong&gt; Suspicion confirmed. Running &lt;code&gt;heroku run rake -T --app my-app&lt;/code&gt; returns nothing. WTF?&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;Edit:&lt;/strong&gt; This had nothing to do with Heroku or webpack...I tried to use rubocop in my &lt;code&gt;Rakefile&lt;/code&gt; and reverted it back to the standard &lt;code&gt;Rakefile&lt;/code&gt; that you get with a new rails project. :)&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "gn4cpf", "is_robot_indexable": true, "report_reasons": null, "author": "smitjel", "discussion_type": null, "num_comments": 11, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/gn4cpf/why_wont_heroku_run_the_assetsprecompile_task/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/gn4cpf/why_wont_heroku_run_the_assetsprecompile_task/", "subreddit_subscribers": 44113, "created_utc": 1589947627.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "Hello guys, would appreciate some help structuring my Database correctly. I'm building an inventory system where i need to track the location of every single product. Here's what I have so far:-\n\n    class Product &lt; ApplicationRecord\n      has_many :serial_numbers\n    end\n    \n    class SerialNumber &lt; ApplicationRecord\n      belongs_to :product\n    end\n    \n    class SerializedStockMovement &lt; ApplicationRecord\n      belongs_to :bin\n      belongs_to :document, polymorphic: true # Sales invoice/Stock Adjustment etc\n      belongs_to :serial_number\n    end\n    \n    class Bin &lt; ApplicationRecord\n      has_many :serialized_stock_movements\n    end\n\nEvery time i wish to add an individual item into a bin,\n\n    SerializedStockMovement.create(\n      bin: @bin,\n      serial_number: @serial_number,\n      quantity: 1\n    )\n\nand to transfer to another bin,\n\n    SerializedStockMovement.create(\n      bin: @bin_one,\n      serial_number: @serial_number,\n      quantity: -1\n    )\n    \n    SerializedStockMovement.create(\n      bin: @bin_two,\n      serial_number: @serial_number,\n      quantity: 1\n    )\n\nIt's working decently, but I just have a feeling that the structure can be better. A few of the problems with the structure currently is\n\n* Quantity is always +1 or -1. Would it be better to be an enum \"in\" \"out\"?\n* To get all the serial numbers currently in a bin, i'm having to do some fancy grouping.\n\n&amp;#x200B;\n\n    class Bin &lt; ApplicationRecord \n      has_many :serial_numbers, -&gt; { \n         group(\"serial_numbers.id, serial_numbers.*\")\n         .having(\"sum(serialized_stock_movements.quantity) &gt; 0\") \n      }, through: :serialized_stock_movements\n    end\n\n&amp;#x200B;\n\n* How best can I enforce a validation where the serial number is always only in ONE bin? I know how to do it in rails, but is there a way to enforce it in the DB?  \n\n\n**Edit**  \nAdded UML\n\nhttps://preview.redd.it/dv2zq25jgwz41.png?width=2508&amp;format=png&amp;auto=webp&amp;s=e336e2e835705cd7d0981bba1ff674b50a008719", "author_fullname": "t2_60vzeko", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Database structure for a serialized inventory system", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "hide_score": false, "media_metadata": {"dv2zq25jgwz41": {"status": "valid", "e": "Image", "m": "image/png", "p": [{"y": 32, "x": 108, "u": "https://preview.redd.it/dv2zq25jgwz41.png?width=108&amp;crop=smart&amp;auto=webp&amp;s=0b75ea845e18fbca9312d146b982b21da632e687"}, {"y": 65, "x": 216, "u": "https://preview.redd.it/dv2zq25jgwz41.png?width=216&amp;crop=smart&amp;auto=webp&amp;s=f5c95a820101de7783d6fe9bdf9fbd7c75c87c74"}, {"y": 97, "x": 320, "u": "https://preview.redd.it/dv2zq25jgwz41.png?width=320&amp;crop=smart&amp;auto=webp&amp;s=0a2815af3f35d8fed7d0d0c5f4104ed3887fe4d9"}, {"y": 194, "x": 640, "u": "https://preview.redd.it/dv2zq25jgwz41.png?width=640&amp;crop=smart&amp;auto=webp&amp;s=8ea649893cfd8f74f5dae0cb7c61d38b905ebbf3"}, {"y": 291, "x": 960, "u": "https://preview.redd.it/dv2zq25jgwz41.png?width=960&amp;crop=smart&amp;auto=webp&amp;s=5cb24a3c9034724c73bf510dcdae9c46dafce476"}, {"y": 328, "x": 1080, "u": "https://preview.redd.it/dv2zq25jgwz41.png?width=1080&amp;crop=smart&amp;auto=webp&amp;s=f2a14c24a31ac3fb665c0e228f0379d942b82c08"}], "s": {"y": 762, "x": 2508, "u": "https://preview.redd.it/dv2zq25jgwz41.png?width=2508&amp;format=png&amp;auto=webp&amp;s=e336e2e835705cd7d0981bba1ff674b50a008719"}, "id": "dv2zq25jgwz41"}}, "name": "t3_gn770m", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 1.0, "author_flair_background_color": null, "subreddit_type": "public", "ups": 2, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 2, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": 1589971670.0, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1589990144.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;Hello guys, would appreciate some help structuring my Database correctly. I&amp;#39;m building an inventory system where i need to track the location of every single product. Here&amp;#39;s what I have so far:-&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;class Product &amp;lt; ApplicationRecord\n  has_many :serial_numbers\nend\n\nclass SerialNumber &amp;lt; ApplicationRecord\n  belongs_to :product\nend\n\nclass SerializedStockMovement &amp;lt; ApplicationRecord\n  belongs_to :bin\n  belongs_to :document, polymorphic: true # Sales invoice/Stock Adjustment etc\n  belongs_to :serial_number\nend\n\nclass Bin &amp;lt; ApplicationRecord\n  has_many :serialized_stock_movements\nend\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Every time i wish to add an individual item into a bin,&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;SerializedStockMovement.create(\n  bin: @bin,\n  serial_number: @serial_number,\n  quantity: 1\n)\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;and to transfer to another bin,&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;SerializedStockMovement.create(\n  bin: @bin_one,\n  serial_number: @serial_number,\n  quantity: -1\n)\n\nSerializedStockMovement.create(\n  bin: @bin_two,\n  serial_number: @serial_number,\n  quantity: 1\n)\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;It&amp;#39;s working decently, but I just have a feeling that the structure can be better. A few of the problems with the structure currently is&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Quantity is always +1 or -1. Would it be better to be an enum &amp;quot;in&amp;quot; &amp;quot;out&amp;quot;?&lt;/li&gt;\n&lt;li&gt;To get all the serial numbers currently in a bin, i&amp;#39;m having to do some fancy grouping.&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;&amp;#x200B;&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;class Bin &amp;lt; ApplicationRecord \n  has_many :serial_numbers, -&amp;gt; { \n     group(&amp;quot;serial_numbers.id, serial_numbers.*&amp;quot;)\n     .having(&amp;quot;sum(serialized_stock_movements.quantity) &amp;gt; 0&amp;quot;) \n  }, through: :serialized_stock_movements\nend\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&amp;#x200B;&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;How best can I enforce a validation where the serial number is always only in ONE bin? I know how to do it in rails, but is there a way to enforce it in the DB?&lt;br/&gt;&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;&lt;strong&gt;Edit&lt;/strong&gt;&lt;br/&gt;\nAdded UML&lt;/p&gt;\n\n&lt;p&gt;&lt;a href=\"https://preview.redd.it/dv2zq25jgwz41.png?width=2508&amp;amp;format=png&amp;amp;auto=webp&amp;amp;s=e336e2e835705cd7d0981bba1ff674b50a008719\"&gt;https://preview.redd.it/dv2zq25jgwz41.png?width=2508&amp;amp;format=png&amp;amp;auto=webp&amp;amp;s=e336e2e835705cd7d0981bba1ff674b50a008719&lt;/a&gt;&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": true, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "gn770m", "is_robot_indexable": true, "report_reasons": null, "author": "NoNonsense126", "discussion_type": null, "num_comments": 2, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/gn770m/database_structure_for_a_serialized_inventory/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/gn770m/database_structure_for_a_serialized_inventory/", "subreddit_subscribers": 44113, "created_utc": 1589961344.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "Hi guys, beginner developer here.  I was stuck on building my form for HOURS today and I'm just wondering if anyone else has issues.  I ended up resorting to an html form which worked fine in the end, but what I was trying to do was build a form without a model, but that would pass back to a strong params method in my controller.  For the life of me I couldn't get it to work without running into a no method error when I rendered the form again (if the user did not type in the correct input -- it's a question/answer type form).  When the form rendered again, the no method error would trigger because it seems like the form was expecting an instance attribute.  \n\nSo frustrating :(", "author_fullname": "t2_4o56h", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Rails form for, form tag, form with - does anyone else have problems with these?", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "hide_score": false, "name": "t3_gn50bx", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 1.0, "author_flair_background_color": null, "subreddit_type": "public", "ups": 3, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 3, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1589979372.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;Hi guys, beginner developer here.  I was stuck on building my form for HOURS today and I&amp;#39;m just wondering if anyone else has issues.  I ended up resorting to an html form which worked fine in the end, but what I was trying to do was build a form without a model, but that would pass back to a strong params method in my controller.  For the life of me I couldn&amp;#39;t get it to work without running into a no method error when I rendered the form again (if the user did not type in the correct input -- it&amp;#39;s a question/answer type form).  When the form rendered again, the no method error would trigger because it seems like the form was expecting an instance attribute.  &lt;/p&gt;\n\n&lt;p&gt;So frustrating :(&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": true, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "gn50bx", "is_robot_indexable": true, "report_reasons": null, "author": "sennateg", "discussion_type": null, "num_comments": 3, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/gn50bx/rails_form_for_form_tag_form_with_does_anyone/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/gn50bx/rails_form_for_form_tag_form_with_does_anyone/", "subreddit_subscribers": 44113, "created_utc": 1589950572.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "Working on a (portfolio) site that has a private blog (only admin can create posts). I have most of the app already built, but I'm having a hard time trying to get attention from the main (home) page to the blog since it's not technically a blog site. \n\nI'm thinking of just making some (post)cards on the home page and making them live (as opposed to static) and tracking by the three most recent posts do display there. It will only be text displaying the title and a few (2-3) lines of body text. My problem specifically is I'm not sure how to get the cards to display the three most recent blog posts automatically. Is it just a simple post.last callback? with :title and :body attached? Or is there a tougher runaround on this?", "author_fullname": "t2_17d3vu", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Tracking and displaying recent posts.", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "hide_score": false, "name": "t3_gmziwa", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 0.88, "author_flair_background_color": null, "subreddit_type": "public", "ups": 6, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 6, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1589958397.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;Working on a (portfolio) site that has a private blog (only admin can create posts). I have most of the app already built, but I&amp;#39;m having a hard time trying to get attention from the main (home) page to the blog since it&amp;#39;s not technically a blog site. &lt;/p&gt;\n\n&lt;p&gt;I&amp;#39;m thinking of just making some (post)cards on the home page and making them live (as opposed to static) and tracking by the three most recent posts do display there. It will only be text displaying the title and a few (2-3) lines of body text. My problem specifically is I&amp;#39;m not sure how to get the cards to display the three most recent blog posts automatically. Is it just a simple post.last callback? with :title and :body attached? Or is there a tougher runaround on this?&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "gmziwa", "is_robot_indexable": true, "report_reasons": null, "author": "Mythos_Bre", "discussion_type": null, "num_comments": 7, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/gmziwa/tracking_and_displaying_recent_posts/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/gmziwa/tracking_and_displaying_recent_posts/", "subreddit_subscribers": 44113, "created_utc": 1589929597.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "Getting some kind of freak incident here, hoping some of you guys can help me figure out where the cycle is breaking.\n\n&amp;#x200B;\n\n`&lt;%= simple_form_for(resource, as: resource_name, url: registration_path(resource_name)) do |f| %&gt;`\n\n  `&lt;%= f.error_notification %&gt;`\n\n&amp;#x200B;\n\n`&lt;div&gt;`\n\n`&lt;%= f.input :email,`\n\n`required: true,`\n\n`autofocus: true,`\n\n`input_html: { autocomplete: \"email\",`\n\n`class: \"blah\" } %&gt;`\n\n`&lt;/div&gt;`\n\n&amp;#x200B;\n\n`&lt;div&gt;`\n\n`&lt;div&gt;`\n\n`&lt;%= f.input :password,`\n\n`required: true,`\n\n`hint: (\"#{@minimum_password_length} characters minimum\" if u/minimum_password_length),`\n\n`input_html: { autocomplete: \"new-password\",`\n\n`class: \"blah\" } %&gt;`\n\n&amp;#x200B;\n\n`&lt;div&gt;`\n\n`&lt;label class=\"block text-gray-700 text-sm font-bold mb-2\"&gt;`\n\n`&lt;%= f.input :password_confirmation,`\n\n`required: true,`\n\n`input_html: { autocomplete: \"new-password\",`\n\n`class: \"blah\" } %&gt;`\n\n`&lt;/div&gt;`\n\n`&lt;div&gt;`\n\n`&lt;div&gt;`\n\n`&lt;%= f.button :submit, \"Sign up\", class: \"blah\" %&gt;`\n\n`&lt;% end %&gt;`\n\n`more closing divs and mumbo jumbo...`\n\nWhen I submit the form, the db/terminal reflect the transaction, but it loops back around with this:\n\n`Started GET \"/users/sign_up?authenticity_token=Yfj0DZUtHHTk7LqhctXttGIsGUD0MHEyANKMXkaMaPKcNuFt6rKgRrZbJc2KFkwL%2B7fW0Re9%2F529uat1MwNXMg%3D%3D&amp;user%5Bemail%5D=jsmitty%`[`40email.com`](https://40email.com)`&amp;user%5Bpassword%5D=[FILTERED]&amp;user%5Bpassword_confirmation%5D=[FILTERED]&amp;commit=Sign+up\" for ::1 at 2020-05-20 02:37:05 -0400`\n\n`Processing by Devise::RegistrationsController#new as HTML`\n\n  `Parameters: {\"authenticity_token\"=&gt;\"Yfj0DZUtHHTk7LqhctXttGIsGUD0MHEyANKMXkaMaPKcNuFt6rKgRrZbJc2KFkwL+7fW0Re9/529uat1MwNXMg==\", \"user\"=&gt;{\"email\"=&gt;`[`\"jsmitty@email.com`](mailto:\"jsmitty@email.com)`\", \"password\"=&gt;\"[FILTERED]\", \"password_confirmation\"=&gt;\"[FILTERED]\"}, \"commit\"=&gt;\"Sign up\"}`\n\n  `Rendering devise/registrations/new.html.erb within layouts/application`\n\n  `Rendered devise/registrations/new.html.erb within layouts/application (Duration: 10.0ms | Allocations: 6465)`\n\n`[Webpacker] Everything's up-to-date. Nothing to do`\n\n  `Rendered layouts/_navbar.html.erb (Duration: 0.1ms | Allocations: 53)`\n\n  `Rendered layouts/_footer.html.erb (Duration: 0.0ms | Allocations: 5)`\n\n`Completed 200 OK in 22ms (Views: 20.6ms | ActiveRecord: 0.0ms | Allocations: 11351)`\n\n&amp;#x200B;\n\nI can't for the life of me figure out where this is going wrong. App already has a root route, I already tried manually redirecting to root route. I already tried the helpers (explicitly stating the user relations in the resource tag at the beginnig) but nothing seems to get the form through. I also tried manually creating the user via rails console, that worked. But I'm having much the same issue with the login bit as well. It just loops back around as I see it. The only thing that seems a little off on this app as opposed to the other apps that I've used devise on is a db:migration I ran for active text that ended up running an active storage bit that I don't understand. I'm assuming it's for file upload, as would be expected from a rich text editor. I don't see how that would have anything to do with the users though.", "author_fullname": "t2_6iyxev6q", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Devise not hitting database.", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "hide_score": false, "name": "t3_gn6e64", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 1.0, "author_flair_background_color": null, "subreddit_type": "public", "ups": 1, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 1, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1589986115.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;Getting some kind of freak incident here, hoping some of you guys can help me figure out where the cycle is breaking.&lt;/p&gt;\n\n&lt;p&gt;&amp;#x200B;&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;&amp;lt;%= simple_form_for(resource, as: resource_name, url: registration_path(resource_name)) do |f| %&amp;gt;&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;&amp;lt;%= f.error_notification %&amp;gt;&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;&amp;#x200B;&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;&amp;lt;div&amp;gt;&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;&amp;lt;%= f.input :email,&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;required: true,&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;autofocus: true,&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;input_html: { autocomplete: &amp;quot;email&amp;quot;,&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;class: &amp;quot;blah&amp;quot; } %&amp;gt;&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;&amp;lt;/div&amp;gt;&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;&amp;#x200B;&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;&amp;lt;div&amp;gt;&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;&amp;lt;div&amp;gt;&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;&amp;lt;%= f.input :password,&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;required: true,&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;hint: (&amp;quot;#{@minimum_password_length} characters minimum&amp;quot; if u/minimum_password_length),&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;input_html: { autocomplete: &amp;quot;new-password&amp;quot;,&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;class: &amp;quot;blah&amp;quot; } %&amp;gt;&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;&amp;#x200B;&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;&amp;lt;div&amp;gt;&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;&amp;lt;label class=&amp;quot;block text-gray-700 text-sm font-bold mb-2&amp;quot;&amp;gt;&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;&amp;lt;%= f.input :password_confirmation,&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;required: true,&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;input_html: { autocomplete: &amp;quot;new-password&amp;quot;,&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;class: &amp;quot;blah&amp;quot; } %&amp;gt;&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;&amp;lt;/div&amp;gt;&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;&amp;lt;div&amp;gt;&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;&amp;lt;div&amp;gt;&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;&amp;lt;%= f.button :submit, &amp;quot;Sign up&amp;quot;, class: &amp;quot;blah&amp;quot; %&amp;gt;&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;&amp;lt;% end %&amp;gt;&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;more closing divs and mumbo jumbo...&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;When I submit the form, the db/terminal reflect the transaction, but it loops back around with this:&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;Started GET &amp;quot;/users/sign_up?authenticity_token=Yfj0DZUtHHTk7LqhctXttGIsGUD0MHEyANKMXkaMaPKcNuFt6rKgRrZbJc2KFkwL%2B7fW0Re9%2F529uat1MwNXMg%3D%3D&amp;amp;user%5Bemail%5D=jsmitty%&lt;/code&gt;&lt;a href=\"https://40email.com\"&gt;&lt;code&gt;40email.com&lt;/code&gt;&lt;/a&gt;&lt;code&gt;&amp;amp;user%5Bpassword%5D=[FILTERED]&amp;amp;user%5Bpassword_confirmation%5D=[FILTERED]&amp;amp;commit=Sign+up&amp;quot; for ::1 at 2020-05-20 02:37:05 -0400&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;Processing by Devise::RegistrationsController#new as HTML&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;Parameters: {&amp;quot;authenticity_token&amp;quot;=&amp;gt;&amp;quot;Yfj0DZUtHHTk7LqhctXttGIsGUD0MHEyANKMXkaMaPKcNuFt6rKgRrZbJc2KFkwL+7fW0Re9/529uat1MwNXMg==&amp;quot;, &amp;quot;user&amp;quot;=&amp;gt;{&amp;quot;email&amp;quot;=&amp;gt;&lt;/code&gt;[&lt;code&gt;&amp;quot;jsmitty@email.com&lt;/code&gt;](mailto:&amp;quot;&lt;a href=\"mailto:jsmitty@email.com\"&gt;jsmitty@email.com&lt;/a&gt;)&lt;code&gt;&amp;quot;, &amp;quot;password&amp;quot;=&amp;gt;&amp;quot;[FILTERED]&amp;quot;, &amp;quot;password_confirmation&amp;quot;=&amp;gt;&amp;quot;[FILTERED]&amp;quot;}, &amp;quot;commit&amp;quot;=&amp;gt;&amp;quot;Sign up&amp;quot;}&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;Rendering devise/registrations/new.html.erb within layouts/application&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;Rendered devise/registrations/new.html.erb within layouts/application (Duration: 10.0ms | Allocations: 6465)&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;[Webpacker] Everything&amp;#39;s up-to-date. Nothing to do&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;Rendered layouts/_navbar.html.erb (Duration: 0.1ms | Allocations: 53)&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;Rendered layouts/_footer.html.erb (Duration: 0.0ms | Allocations: 5)&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;Completed 200 OK in 22ms (Views: 20.6ms | ActiveRecord: 0.0ms | Allocations: 11351)&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;&amp;#x200B;&lt;/p&gt;\n\n&lt;p&gt;I can&amp;#39;t for the life of me figure out where this is going wrong. App already has a root route, I already tried manually redirecting to root route. I already tried the helpers (explicitly stating the user relations in the resource tag at the beginnig) but nothing seems to get the form through. I also tried manually creating the user via rails console, that worked. But I&amp;#39;m having much the same issue with the login bit as well. It just loops back around as I see it. The only thing that seems a little off on this app as opposed to the other apps that I&amp;#39;ve used devise on is a db:migration I ran for active text that ended up running an active storage bit that I don&amp;#39;t understand. I&amp;#39;m assuming it&amp;#39;s for file upload, as would be expected from a rich text editor. I don&amp;#39;t see how that would have anything to do with the users though.&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": true, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "gn6e64", "is_robot_indexable": true, "report_reasons": null, "author": "CodaDev", "discussion_type": null, "num_comments": 1, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/gn6e64/devise_not_hitting_database/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/gn6e64/devise_not_hitting_database/", "subreddit_subscribers": 44113, "created_utc": 1589957315.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "I was following [https://api.rubyonrails.org/classes/ActiveRecord/Transactions/ClassMethods.html](https://api.rubyonrails.org/classes/ActiveRecord/Transactions/ClassMethods.html) documentation and came across the below example\n\n    Account.transaction do\n      balance.save!\n      account.save!\n    end\n\nAnd from that link and this [https://makandracards.com/makandra/42885-nested-activerecord-transaction-pitfalls](https://makandracards.com/makandra/42885-nested-activerecord-transaction-pitfalls) I realize that nested transactions is part of the parent transaction and calling a rollback on the nested transaction doesn't propagate to the parent.   \nAlso, that save!, update\\_attributes! creates its own transaction and hence making it a nested transaction. \n\nMy code looks something like this, \n\n          ActiveRecord::Base.transaction do\n            # destroy an related object (must be rolled back if below updates fail)\n            Book.update_attributes!(params)\n            Author.update_attributes!(params[nscname])\n          end\n\nand I write tests like so\n\n    it \"should not destroy related object if Book update fails\"\n      Book.any_instance.stubs(update_attributes!).raises(some_exception)\n      assert related object is not deleted\n    end\n\nNow my problems are, as per my understanding the Book.update\\_attributes! runs in a separate transaction and hence it would not rollback the related object, but it turns out it does and the tests succeed.\n\nI have a few questions, \n\n1. Should I include requires\\_new: true in the transaction?\n2. Will the entire transaction rolled back in case book update fails, author update fails. Will this code lead to an invalid state?", "author_fullname": "t2_pgq24c7", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Help understanding if my transaction is nested.", "link_flair_richtext": [{"e": "text", "t": "Question"}], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": "question", "downs": 0, "hide_score": false, "name": "t3_gmtoig", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 1.0, "author_flair_background_color": null, "subreddit_type": "public", "ups": 8, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": "Question", "can_mod_post": false, "score": 8, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1589940038.0, "link_flair_type": "richtext", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;I was following &lt;a href=\"https://api.rubyonrails.org/classes/ActiveRecord/Transactions/ClassMethods.html\"&gt;https://api.rubyonrails.org/classes/ActiveRecord/Transactions/ClassMethods.html&lt;/a&gt; documentation and came across the below example&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;Account.transaction do\n  balance.save!\n  account.save!\nend\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;And from that link and this &lt;a href=\"https://makandracards.com/makandra/42885-nested-activerecord-transaction-pitfalls\"&gt;https://makandracards.com/makandra/42885-nested-activerecord-transaction-pitfalls&lt;/a&gt; I realize that nested transactions is part of the parent transaction and calling a rollback on the nested transaction doesn&amp;#39;t propagate to the parent.&lt;br/&gt;\nAlso, that save!, update_attributes! creates its own transaction and hence making it a nested transaction. &lt;/p&gt;\n\n&lt;p&gt;My code looks something like this, &lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;      ActiveRecord::Base.transaction do\n        # destroy an related object (must be rolled back if below updates fail)\n        Book.update_attributes!(params)\n        Author.update_attributes!(params[nscname])\n      end\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;and I write tests like so&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;it &amp;quot;should not destroy related object if Book update fails&amp;quot;\n  Book.any_instance.stubs(update_attributes!).raises(some_exception)\n  assert related object is not deleted\nend\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Now my problems are, as per my understanding the Book.update_attributes! runs in a separate transaction and hence it would not rollback the related object, but it turns out it does and the tests succeed.&lt;/p&gt;\n\n&lt;p&gt;I have a few questions, &lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;Should I include requires_new: true in the transaction?&lt;/li&gt;\n&lt;li&gt;Will the entire transaction rolled back in case book update fails, author update fails. Will this code lead to an invalid state?&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "link_flair_template_id": "fdfc6806-aea7-11e4-bf37-22000b3889f5", "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "gmtoig", "is_robot_indexable": true, "report_reasons": null, "author": "bennyman32", "discussion_type": null, "num_comments": 2, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/gmtoig/help_understanding_if_my_transaction_is_nested/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/gmtoig/help_understanding_if_my_transaction_is_nested/", "subreddit_subscribers": 44113, "created_utc": 1589911238.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "I active the public Access for GCP on Storage.yml  to be true \nWhen I tried to upload my file into my Rails app\nI got error \"ArgumentError (unknown keyword :public)\"\n\nHow do you set public Access for active storage in GCP?", "author_fullname": "t2_2po8egxm", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Error to set up GCP active storage to be public", "link_flair_richtext": [{"e": "text", "t": "Help"}], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": "help", "downs": 0, "hide_score": false, "name": "t3_gn3orn", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 0.67, "author_flair_background_color": null, "subreddit_type": "public", "ups": 1, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": "Help", "can_mod_post": false, "score": 1, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1589973623.0, "link_flair_type": "richtext", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;I active the public Access for GCP on Storage.yml  to be true \nWhen I tried to upload my file into my Rails app\nI got error &amp;quot;ArgumentError (unknown keyword :public)&amp;quot;&lt;/p&gt;\n\n&lt;p&gt;How do you set public Access for active storage in GCP?&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": true, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "link_flair_template_id": "eef0b990-adfb-11e4-8e15-22000b3889f5", "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "gn3orn", "is_robot_indexable": true, "report_reasons": null, "author": "lnxosx", "discussion_type": null, "num_comments": 0, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/gn3orn/error_to_set_up_gcp_active_storage_to_be_public/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/gn3orn/error_to_set_up_gcp_active_storage_to_be_public/", "subreddit_subscribers": 44113, "created_utc": 1589944823.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "I am following a training example with microposts and users, and it says you need belongs\\_to and has\\_many. Is that not duplication? What happens if you only have one and not the other?", "author_fullname": "t2_l0p06", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "belongs_to &amp; has_many - do you really need both?", "link_flair_richtext": [], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "hide_score": false, "name": "t3_gmnmt6", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 0.93, "author_flair_background_color": null, "subreddit_type": "public", "ups": 13, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 13, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1589920273.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;I am following a training example with microposts and users, and it says you need belongs_to and has_many. Is that not duplication? What happens if you only have one and not the other?&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "gmnmt6", "is_robot_indexable": true, "report_reasons": null, "author": "JonL12345", "discussion_type": null, "num_comments": 6, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/gmnmt6/belongs_to_has_many_do_you_really_need_both/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/gmnmt6/belongs_to_has_many_do_you_really_need_both/", "subreddit_subscribers": 44113, "created_utc": 1589891473.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "Following the tips of the author's gem (soruce: [https://github.com/norman/friendly\\_id/issues/480](https://github.com/norman/friendly_id/issues/480)), I added a title\\_and\\_sequence like this\n\n     extend FriendlyId   \n     friendly_id :slug_candidates, use: [:slugged, :finders]\n    \n     def slug_candidates\n         [:title, :title_and_sequence] end def title_and_sequence\n         slug = title.to_param\n         sequence = Book.where(\"slug LIKE '#{slug}--%'\").count + 2\n     \"#{slug}--#{sequence}\"\n     end\n\nbut I noted that there is a bug. If I use as title \"one\", it works correctly\n\n    /books/one \n    /books/one-2 \n    /books/one-3 \n    /books/one-4 etc.\n\nBut if I use a title with two words, for example \"one two\" I have a \"bug\" after the second result.\n\n    /books/one-two \n    /books/one-two-2 \n    /books/one-two-5j12-123j-afu4-jasdk \n    /books/one-two-9as6-k273-ewu1-87srt \n    etc.\n\n**Do you have any idea about how to solve it?**", "author_fullname": "t2_ujrp7", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Friendly-id and a bug with the sequence of a title with two words", "link_flair_richtext": [{"e": "text", "t": "Help"}], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": "help", "downs": 0, "hide_score": false, "name": "t3_gmlktq", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 1.0, "author_flair_background_color": null, "subreddit_type": "public", "ups": 8, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": "Help", "can_mod_post": false, "score": 8, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1589910776.0, "link_flair_type": "richtext", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;Following the tips of the author&amp;#39;s gem (soruce: &lt;a href=\"https://github.com/norman/friendly_id/issues/480\"&gt;https://github.com/norman/friendly_id/issues/480&lt;/a&gt;), I added a title_and_sequence like this&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt; extend FriendlyId   \n friendly_id :slug_candidates, use: [:slugged, :finders]\n\n def slug_candidates\n     [:title, :title_and_sequence] end def title_and_sequence\n     slug = title.to_param\n     sequence = Book.where(&amp;quot;slug LIKE &amp;#39;#{slug}--%&amp;#39;&amp;quot;).count + 2\n &amp;quot;#{slug}--#{sequence}&amp;quot;\n end\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;but I noted that there is a bug. If I use as title &amp;quot;one&amp;quot;, it works correctly&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;/books/one \n/books/one-2 \n/books/one-3 \n/books/one-4 etc.\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;But if I use a title with two words, for example &amp;quot;one two&amp;quot; I have a &amp;quot;bug&amp;quot; after the second result.&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;/books/one-two \n/books/one-two-2 \n/books/one-two-5j12-123j-afu4-jasdk \n/books/one-two-9as6-k273-ewu1-87srt \netc.\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;strong&gt;Do you have any idea about how to solve it?&lt;/strong&gt;&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "link_flair_template_id": "eef0b990-adfb-11e4-8e15-22000b3889f5", "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "gmlktq", "is_robot_indexable": true, "report_reasons": null, "author": "Freank", "discussion_type": null, "num_comments": 7, "send_replies": false, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/gmlktq/friendlyid_and_a_bug_with_the_sequence_of_a_title/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/gmlktq/friendlyid_and_a_bug_with_the_sequence_of_a_title/", "subreddit_subscribers": 44113, "created_utc": 1589881976.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "rails", "selftext": "I have an update action like so, \n\n    def update\n       ActiveRecord::Base.transaction do\n        # destroy an item\n        result = call to an external method that returns false if an exception is raised\n        unless result\n          raise ActiveRecord::RollBack\n        end\n        # method that raises exception on update, not false\n      end\n      rescue\n          # render_errors\n          # same in case of rollback or any other exception\n      end\n    end\n\nMy problem, if the result is false then the transaction is rolled back but the rescue block isn't called and hence I do not get the required HTTP code and message. In case it failed because of any other exception the rescue block is hit and all is well. \n\nCould you please help me figure out how I can raise a rollback and handle that exception to call render\\_errors as well.", "author_fullname": "t2_pgq24c7", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Explicitly rollback a transaction in a controller method and render a response as well.", "link_flair_richtext": [{"e": "text", "t": "Question"}], "subreddit_name_prefixed": "r/rails", "hidden": false, "pwls": 6, "link_flair_css_class": "question", "downs": 0, "hide_score": false, "name": "t3_gmqm8z", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 1.0, "author_flair_background_color": null, "subreddit_type": "public", "ups": 2, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": "Question", "can_mod_post": false, "score": 2, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1589930592.0, "link_flair_type": "richtext", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.rails", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;I have an update action like so, &lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;def update\n   ActiveRecord::Base.transaction do\n    # destroy an item\n    result = call to an external method that returns false if an exception is raised\n    unless result\n      raise ActiveRecord::RollBack\n    end\n    # method that raises exception on update, not false\n  end\n  rescue\n      # render_errors\n      # same in case of rollback or any other exception\n  end\nend\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;My problem, if the result is false then the transaction is rolled back but the rescue block isn&amp;#39;t called and hence I do not get the required HTTP code and message. In case it failed because of any other exception the rescue block is hit and all is well. &lt;/p&gt;\n\n&lt;p&gt;Could you please help me figure out how I can raise a rollback and handle that exception to call render_errors as well.&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "link_flair_template_id": "fdfc6806-aea7-11e4-bf37-22000b3889f5", "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2qhjn", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "gmqm8z", "is_robot_indexable": true, "report_reasons": null, "author": "bennyman32", "discussion_type": null, "num_comments": 6, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/rails/comments/gmqm8z/explicitly_rollback_a_transaction_in_a_controller/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/rails/comments/gmqm8z/explicitly_rollback_a_transaction_in_a_controller/", "subreddit_subscribers": 44113, "created_utc": 1589901792.0, "num_crossposts": 0, "media": null, "is_video": false}}], "after": "t3_gmqm8z", "before": null}}