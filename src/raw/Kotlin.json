{"kind": "Listing", "data": {"modhash": "", "dist": 10, "children": [{"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "Kotlin", "selftext": "", "author_fullname": "t2_4wefty6g", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "[X-POST] JetBrains is porting Compose to desktop and other platforms : androiddev", "link_flair_richtext": [], "subreddit_name_prefixed": "r/Kotlin", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_huidyh", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 0.91, "author_flair_background_color": null, "subreddit_type": "public", "ups": 16, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 16, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": false, "mod_note": null, "created": 1595266474.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "reddit.com", "allow_live_comments": false, "selftext_html": null, "likes": null, "suggested_sort": null, "banned_at_utc": null, "url_overridden_by_dest": "https://www.reddit.com/r/androiddev/comments/hufnjq/_/", "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2so2r", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "huidyh", "is_robot_indexable": true, "report_reasons": null, "author": "LoneWalker20", "discussion_type": null, "num_comments": 0, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/Kotlin/comments/huidyh/xpost_jetbrains_is_porting_compose_to_desktop_and/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/androiddev/comments/hufnjq/_/", "subreddit_subscribers": 35363, "created_utc": 1595237674.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "Kotlin", "selftext": "", "author_fullname": "t2_3hfuxt4m", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Android app with the Room database", "link_flair_richtext": [], "subreddit_name_prefixed": "r/Kotlin", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_hug5wx", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 0.64, "author_flair_background_color": null, "subreddit_type": "public", "ups": 3, "total_awards_received": 0, "media_embed": {"content": "&lt;iframe width=\"600\" height=\"338\" src=\"https://www.youtube.com/embed/kF0TPehhIx0?feature=oembed&amp;enablejsapi=1\" frameborder=\"0\" allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen&gt;&lt;/iframe&gt;", "width": 600, "scrolling": false, "height": 338}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": {"type": "youtube.com", "oembed": {"provider_url": "https://www.youtube.com/", "version": "1.0", "title": "Room database with coroutines in an Android application", "type": "video", "thumbnail_width": 480, "height": 338, "width": 600, "html": "&lt;iframe width=\"600\" height=\"338\" src=\"https://www.youtube.com/embed/kF0TPehhIx0?feature=oembed&amp;enablejsapi=1\" frameborder=\"0\" allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen&gt;&lt;/iframe&gt;", "author_name": "teachmesome", "provider_name": "YouTube", "thumbnail_url": "https://i.ytimg.com/vi/kF0TPehhIx0/hqdefault.jpg", "thumbnail_height": 360, "author_url": "https://www.youtube.com/channel/UCIWC3bm2eKj0wLGFULhzKdA"}}, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {"content": "&lt;iframe width=\"600\" height=\"338\" src=\"https://www.youtube.com/embed/kF0TPehhIx0?feature=oembed&amp;enablejsapi=1\" frameborder=\"0\" allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen&gt;&lt;/iframe&gt;", "width": 600, "scrolling": false, "media_domain_url": "https://www.redditmedia.com/mediaembed/hug5wx", "height": 338}, "link_flair_text": null, "can_mod_post": false, "score": 3, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": false, "mod_note": null, "created": 1595254130.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "youtu.be", "allow_live_comments": false, "selftext_html": null, "likes": null, "suggested_sort": null, "banned_at_utc": null, "url_overridden_by_dest": "https://youtu.be/kF0TPehhIx0", "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2so2r", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "hug5wx", "is_robot_indexable": true, "report_reasons": null, "author": "teachmesome_com", "discussion_type": null, "num_comments": 1, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/Kotlin/comments/hug5wx/android_app_with_the_room_database/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://youtu.be/kF0TPehhIx0", "subreddit_subscribers": 35363, "created_utc": 1595225330.0, "num_crossposts": 0, "media": {"type": "youtube.com", "oembed": {"provider_url": "https://www.youtube.com/", "version": "1.0", "title": "Room database with coroutines in an Android application", "type": "video", "thumbnail_width": 480, "height": 338, "width": 600, "html": "&lt;iframe width=\"600\" height=\"338\" src=\"https://www.youtube.com/embed/kF0TPehhIx0?feature=oembed&amp;enablejsapi=1\" frameborder=\"0\" allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen&gt;&lt;/iframe&gt;", "author_name": "teachmesome", "provider_name": "YouTube", "thumbnail_url": "https://i.ytimg.com/vi/kF0TPehhIx0/hqdefault.jpg", "thumbnail_height": 360, "author_url": "https://www.youtube.com/channel/UCIWC3bm2eKj0wLGFULhzKdA"}}, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "Kotlin", "selftext": "                Hello people!\n\u00a0\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 I have not any experience at programming. I started to learn Java. But java seems to me difficult to learn. Then I tried Kotlin. It is looking not easy. But not hard as Java.\n\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 I am watching Udemy videos. When I print \"Hello World!\" I was so excited. I said \"That's magic!\". I know it is a veeeeerryy basic thing but i liked that.\n\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 My goal is coding budget app. There is so much and so good apps in Google Play but i want to build my own app.\n\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 What do you advise for starters who know nothing?", "author_fullname": "t2_11uikd", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Tips for newbies", "link_flair_richtext": [], "subreddit_name_prefixed": "r/Kotlin", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": true, "name": "t3_hukd3y", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 1.0, "author_flair_background_color": null, "subreddit_type": "public", "ups": 1, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 1, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1595276850.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.Kotlin", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;pre&gt;&lt;code&gt;            Hello people!\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;\u00a0\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 I have not any experience at programming. I started to learn Java. But java seems to me difficult to learn. Then I tried Kotlin. It is looking not easy. But not hard as Java.&lt;/p&gt;\n\n&lt;p&gt;\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 I am watching Udemy videos. When I print &amp;quot;Hello World!&amp;quot; I was so excited. I said &amp;quot;That&amp;#39;s magic!&amp;quot;. I know it is a veeeeerryy basic thing but i liked that.&lt;/p&gt;\n\n&lt;p&gt;\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 My goal is coding budget app. There is so much and so good apps in Google Play but i want to build my own app.&lt;/p&gt;\n\n&lt;p&gt;\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 What do you advise for starters who know nothing?&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": true, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2so2r", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "hukd3y", "is_robot_indexable": true, "report_reasons": null, "author": "lprgndgn", "discussion_type": null, "num_comments": 2, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/Kotlin/comments/hukd3y/tips_for_newbies/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/Kotlin/comments/hukd3y/tips_for_newbies/", "subreddit_subscribers": 35363, "created_utc": 1595248050.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "Kotlin", "selftext": "I've moved a Kotlin project of mine into a new repository, which has necessitated re-configuring IntelliJ to use a new project. I had an artifact output which was a fat JAR containing all my dependencies, however this move has caused an extremely frustrating issue in that the JAR will build, but it won't run. Looking around in my manifest file, the IDE is moaning that my Main-Class attribute is invalid, but I can't figure out why. \n\n&gt;Manifest-Version: 1.0\n\n&gt;Main-Class: uniFessSvr.MainKt\n\n&gt;Class-Path: h2-1.4.199.jar websocket-api-9.3.6.v20151106.jar [...]\n\nAny ideas what might be causing this?", "author_fullname": "t2_5g2wc29t", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Artifacts failing to build for my Kotlin program, getting a frustrating \"main class not found\" error at compile time.", "link_flair_richtext": [], "subreddit_name_prefixed": "r/Kotlin", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_hu1gq7", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 0.86, "author_flair_background_color": null, "subreddit_type": "public", "ups": 10, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 10, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1595198151.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.Kotlin", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;I&amp;#39;ve moved a Kotlin project of mine into a new repository, which has necessitated re-configuring IntelliJ to use a new project. I had an artifact output which was a fat JAR containing all my dependencies, however this move has caused an extremely frustrating issue in that the JAR will build, but it won&amp;#39;t run. Looking around in my manifest file, the IDE is moaning that my Main-Class attribute is invalid, but I can&amp;#39;t figure out why. &lt;/p&gt;\n\n&lt;blockquote&gt;\n&lt;p&gt;Manifest-Version: 1.0&lt;/p&gt;\n\n&lt;p&gt;Main-Class: uniFessSvr.MainKt&lt;/p&gt;\n\n&lt;p&gt;Class-Path: h2-1.4.199.jar websocket-api-9.3.6.v20151106.jar [...]&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;Any ideas what might be causing this?&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2so2r", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "hu1gq7", "is_robot_indexable": true, "report_reasons": null, "author": "AdmiralGinge", "discussion_type": null, "num_comments": 6, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/Kotlin/comments/hu1gq7/artifacts_failing_to_build_for_my_kotlin_program/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/Kotlin/comments/hu1gq7/artifacts_failing_to_build_for_my_kotlin_program/", "subreddit_subscribers": 35363, "created_utc": 1595169351.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "Kotlin", "selftext": "", "author_fullname": "t2_obpis", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Kotlin Actors \u2013 No Drama Concurrency", "link_flair_richtext": [], "subreddit_name_prefixed": "r/Kotlin", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_htlgjt", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 0.96, "author_flair_background_color": null, "subreddit_type": "public", "ups": 33, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 33, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": false, "mod_note": null, "created": 1595125672.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "handstandsam.com", "allow_live_comments": false, "selftext_html": null, "likes": null, "suggested_sort": null, "banned_at_utc": null, "url_overridden_by_dest": "https://handstandsam.com/2020/07/18/kotlin-actors-no-drama-concurrency/", "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2so2r", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "htlgjt", "is_robot_indexable": true, "report_reasons": null, "author": "dayanruben", "discussion_type": null, "num_comments": 9, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/Kotlin/comments/htlgjt/kotlin_actors_no_drama_concurrency/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://handstandsam.com/2020/07/18/kotlin-actors-no-drama-concurrency/", "subreddit_subscribers": 35363, "created_utc": 1595096872.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "Kotlin", "selftext": "This is a design question about the optimal/recommended way of maintaining shared mutable state using Kotlin concurrency primitives. For that, I need to establish the context first, please bear with me.  \nI\u2019ve a Spring Boot web application that has a gRPC client. Following are the requirements/constraints on the system:\n\n1. Messages from the gRPC server could be informational or *commands*.\n2. The client has internal state, that may change depending on the commands received from the server. Informational messages don\u2019t affect client state.\n3. Based on the commands received from the server, the client may generate more messages for the server, or update its internal state, or do both.\n4. Every client message generated due to a server command *must happen after* any state changes.\n\nMy current design is as follows;\n\n1. The client is a Spring bean. It has a reference to its internal state, which is a POJO (or POKO, if you want)\n2. Upon receiving a server message, it constructs a command instance and passes the message content and the client state to the command. This happens in a gRPC streaming receiver, which runs on a gRPC thread pool (default).\n3. The command instance may update the client state, and returns one or messages to the client.\n4. The client, running within an Unconfined dispatcher, puts the messages in a buffered Channel, and waits for the next server message.\n5. A Channel consumer, running on Kotlin default dispatcher pool, picks up the messages and sends them to the server.\n\nNotice that requirement #4 is satisfied by design steps #3 and #5.\n\nQuestions:\n\n1. I keep hearing that Flow is recommended over Channel. In this case though, the Channel  \n needs to stay open throughout the lifecycle of the client, and is very easy to use as an async queue. What benefits, if any, are there for using a Flow in this case?\n2. I don\u2019t feel particularly good about passing the client state to the commands. Is there a different way of achieving requirement #4 without doing this? (actors, may be)\n\n*Disclaimer: Also posted on kotlin forum, but haven't received any replies. People tend to avoid long posts.*", "author_fullname": "t2_qh5q2vk", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "How to update mutable state in a gRPC client app?", "link_flair_richtext": [], "subreddit_name_prefixed": "r/Kotlin", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_htu9af", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 0.76, "author_flair_background_color": null, "subreddit_type": "public", "ups": 2, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 2, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1595159789.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.Kotlin", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;This is a design question about the optimal/recommended way of maintaining shared mutable state using Kotlin concurrency primitives. For that, I need to establish the context first, please bear with me.&lt;br/&gt;\nI\u2019ve a Spring Boot web application that has a gRPC client. Following are the requirements/constraints on the system:&lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;Messages from the gRPC server could be informational or &lt;em&gt;commands&lt;/em&gt;.&lt;/li&gt;\n&lt;li&gt;The client has internal state, that may change depending on the commands received from the server. Informational messages don\u2019t affect client state.&lt;/li&gt;\n&lt;li&gt;Based on the commands received from the server, the client may generate more messages for the server, or update its internal state, or do both.&lt;/li&gt;\n&lt;li&gt;Every client message generated due to a server command &lt;em&gt;must happen after&lt;/em&gt; any state changes.&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;p&gt;My current design is as follows;&lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;The client is a Spring bean. It has a reference to its internal state, which is a POJO (or POKO, if you want)&lt;/li&gt;\n&lt;li&gt;Upon receiving a server message, it constructs a command instance and passes the message content and the client state to the command. This happens in a gRPC streaming receiver, which runs on a gRPC thread pool (default).&lt;/li&gt;\n&lt;li&gt;The command instance may update the client state, and returns one or messages to the client.&lt;/li&gt;\n&lt;li&gt;The client, running within an Unconfined dispatcher, puts the messages in a buffered Channel, and waits for the next server message.&lt;/li&gt;\n&lt;li&gt;A Channel consumer, running on Kotlin default dispatcher pool, picks up the messages and sends them to the server.&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;p&gt;Notice that requirement #4 is satisfied by design steps #3 and #5.&lt;/p&gt;\n\n&lt;p&gt;Questions:&lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;I keep hearing that Flow is recommended over Channel. In this case though, the Channel&lt;br/&gt;\nneeds to stay open throughout the lifecycle of the client, and is very easy to use as an async queue. What benefits, if any, are there for using a Flow in this case?&lt;/li&gt;\n&lt;li&gt;I don\u2019t feel particularly good about passing the client state to the commands. Is there a different way of achieving requirement #4 without doing this? (actors, may be)&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;p&gt;&lt;em&gt;Disclaimer: Also posted on kotlin forum, but haven&amp;#39;t received any replies. People tend to avoid long posts.&lt;/em&gt;&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": true, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2so2r", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "htu9af", "is_robot_indexable": true, "report_reasons": null, "author": "sarkara1", "discussion_type": null, "num_comments": 0, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/Kotlin/comments/htu9af/how_to_update_mutable_state_in_a_grpc_client_app/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/Kotlin/comments/htu9af/how_to_update_mutable_state_in_a_grpc_client_app/", "subreddit_subscribers": 35363, "created_utc": 1595130989.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "Kotlin", "selftext": "", "author_fullname": "t2_4wefty6g", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "\ud83d\udce3 Calling all Kotlin/JS developers! \ud83d\udce3", "link_flair_richtext": [], "subreddit_name_prefixed": "r/Kotlin", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_hth3e9", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 0.82, "author_flair_background_color": null, "subreddit_type": "public", "ups": 10, "total_awards_received": 0, "media_embed": {"content": "&lt;blockquote class=\"twitter-video\"&gt;&lt;p lang=\"en\" dir=\"ltr\"&gt;\ud83d\udce3Calling all Kotlin/JS developers! \ud83d\udce3&lt;br&gt;Are you using Kotlin/JS in a project? Then we want to talk to you!&lt;br&gt;Reply to this tweet, and we\u2019ll get in touch for a short use-case interview. Help us improve Kotlin for web dev! \ud83c\udf10&lt;br&gt;PS: Thanks to all who joined our server-side interviews!&lt;/p&gt;&amp;mdash; Kotlin (@kotlin) &lt;a href=\"https://twitter.com/kotlin/status/1284114694702346240?ref_src=twsrc%5Etfw\"&gt;July 17, 2020&lt;/a&gt;&lt;/blockquote&gt;\n&lt;script async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"&gt;&lt;/script&gt;\n", "width": 350, "scrolling": false, "height": 269}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": {"type": "twitter.com", "oembed": {"provider_url": "https://twitter.com", "version": "1.0", "url": "https://twitter.com/kotlin/status/1284114694702346240", "author_name": "Kotlin", "height": 269, "width": 350, "html": "&lt;blockquote class=\"twitter-video\"&gt;&lt;p lang=\"en\" dir=\"ltr\"&gt;\ud83d\udce3Calling all Kotlin/JS developers! \ud83d\udce3&lt;br&gt;Are you using Kotlin/JS in a project? Then we want to talk to you!&lt;br&gt;Reply to this tweet, and we\u2019ll get in touch for a short use-case interview. Help us improve Kotlin for web dev! \ud83c\udf10&lt;br&gt;PS: Thanks to all who joined our server-side interviews!&lt;/p&gt;&amp;mdash; Kotlin (@kotlin) &lt;a href=\"https://twitter.com/kotlin/status/1284114694702346240?ref_src=twsrc%5Etfw\"&gt;July 17, 2020&lt;/a&gt;&lt;/blockquote&gt;\n&lt;script async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"&gt;&lt;/script&gt;\n", "author_url": "https://twitter.com/kotlin", "provider_name": "Twitter", "cache_age": 3153600000, "type": "rich"}}, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {"content": "&lt;blockquote class=\"twitter-video\"&gt;&lt;p lang=\"en\" dir=\"ltr\"&gt;\ud83d\udce3Calling all Kotlin/JS developers! \ud83d\udce3&lt;br&gt;Are you using Kotlin/JS in a project? Then we want to talk to you!&lt;br&gt;Reply to this tweet, and we\u2019ll get in touch for a short use-case interview. Help us improve Kotlin for web dev! \ud83c\udf10&lt;br&gt;PS: Thanks to all who joined our server-side interviews!&lt;/p&gt;&amp;mdash; Kotlin (@kotlin) &lt;a href=\"https://twitter.com/kotlin/status/1284114694702346240?ref_src=twsrc%5Etfw\"&gt;July 17, 2020&lt;/a&gt;&lt;/blockquote&gt;\n&lt;script async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"&gt;&lt;/script&gt;\n", "width": 350, "scrolling": false, "media_domain_url": "https://www.redditmedia.com/mediaembed/hth3e9", "height": 269}, "link_flair_text": null, "can_mod_post": false, "score": 10, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": false, "mod_note": null, "created": 1595109781.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "twitter.com", "allow_live_comments": false, "selftext_html": null, "likes": null, "suggested_sort": null, "banned_at_utc": null, "url_overridden_by_dest": "https://twitter.com/kotlin/status/1284114694702346240?s=19", "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2so2r", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "hth3e9", "is_robot_indexable": true, "report_reasons": null, "author": "LoneWalker20", "discussion_type": null, "num_comments": 1, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/Kotlin/comments/hth3e9/calling_all_kotlinjs_developers/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://twitter.com/kotlin/status/1284114694702346240?s=19", "subreddit_subscribers": 35363, "created_utc": 1595080981.0, "num_crossposts": 0, "media": {"type": "twitter.com", "oembed": {"provider_url": "https://twitter.com", "version": "1.0", "url": "https://twitter.com/kotlin/status/1284114694702346240", "author_name": "Kotlin", "height": 269, "width": 350, "html": "&lt;blockquote class=\"twitter-video\"&gt;&lt;p lang=\"en\" dir=\"ltr\"&gt;\ud83d\udce3Calling all Kotlin/JS developers! \ud83d\udce3&lt;br&gt;Are you using Kotlin/JS in a project? Then we want to talk to you!&lt;br&gt;Reply to this tweet, and we\u2019ll get in touch for a short use-case interview. Help us improve Kotlin for web dev! \ud83c\udf10&lt;br&gt;PS: Thanks to all who joined our server-side interviews!&lt;/p&gt;&amp;mdash; Kotlin (@kotlin) &lt;a href=\"https://twitter.com/kotlin/status/1284114694702346240?ref_src=twsrc%5Etfw\"&gt;July 17, 2020&lt;/a&gt;&lt;/blockquote&gt;\n&lt;script async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"&gt;&lt;/script&gt;\n", "author_url": "https://twitter.com/kotlin", "provider_name": "Twitter", "cache_age": 3153600000, "type": "rich"}}, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "Kotlin", "selftext": "I'm interested in building my first Android app using Kotlin.  Base on my research thus far, Firebase seem to be a good solution to help minimize some of the development start up work.\n\n--\n\nI was wondering if there are alternatives / competitors to Firebase that I should do some research on before committing to Firebase.\n\n--\n\nThanks.", "author_fullname": "t2_13zrdj88", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Firebase competitors.", "link_flair_richtext": [], "subreddit_name_prefixed": "r/Kotlin", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_htfidl", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 0.74, "author_flair_background_color": null, "subreddit_type": "public", "ups": 14, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 14, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1595102629.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.Kotlin", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;I&amp;#39;m interested in building my first Android app using Kotlin.  Base on my research thus far, Firebase seem to be a good solution to help minimize some of the development start up work.&lt;/p&gt;\n\n&lt;h2&gt;&lt;/h2&gt;\n\n&lt;p&gt;I was wondering if there are alternatives / competitors to Firebase that I should do some research on before committing to Firebase.&lt;/p&gt;\n\n&lt;h2&gt;&lt;/h2&gt;\n\n&lt;p&gt;Thanks.&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2so2r", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "htfidl", "is_robot_indexable": true, "report_reasons": null, "author": "b10m1m1cry", "discussion_type": null, "num_comments": 20, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/Kotlin/comments/htfidl/firebase_competitors/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/Kotlin/comments/htfidl/firebase_competitors/", "subreddit_subscribers": 35363, "created_utc": 1595073829.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "Kotlin", "selftext": "I watched this video. It is amazing it is really very depth knowledge as I am familiar with android development but if any beginner wants to learn android it is really amazing. I loved it.\n\nVideo Link: [https://youtu.be/oDfl-xLXiac](https://youtu.be/oDfl-xLXiac)", "author_fullname": "t2_5snwryzu", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Android Kotlin RecyclerView Tutorial - In-Depth Guide incl. Different View Types", "link_flair_richtext": [], "subreddit_name_prefixed": "r/Kotlin", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_hth7c2", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 0.6, "author_flair_background_color": null, "subreddit_type": "public", "ups": 2, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 2, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": true, "mod_note": null, "created": 1595110220.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "self.Kotlin", "allow_live_comments": false, "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;I watched this video. It is amazing it is really very depth knowledge as I am familiar with android development but if any beginner wants to learn android it is really amazing. I loved it.&lt;/p&gt;\n\n&lt;p&gt;Video Link: &lt;a href=\"https://youtu.be/oDfl-xLXiac\"&gt;https://youtu.be/oDfl-xLXiac&lt;/a&gt;&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "likes": null, "suggested_sort": null, "banned_at_utc": null, "view_count": null, "archived": false, "no_follow": true, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2so2r", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "hth7c2", "is_robot_indexable": true, "report_reasons": null, "author": "Jan_Smith", "discussion_type": null, "num_comments": 0, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/Kotlin/comments/hth7c2/android_kotlin_recyclerview_tutorial_indepth/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://www.reddit.com/r/Kotlin/comments/hth7c2/android_kotlin_recyclerview_tutorial_indepth/", "subreddit_subscribers": 35363, "created_utc": 1595081420.0, "num_crossposts": 0, "media": null, "is_video": false}}, {"kind": "t3", "data": {"approved_at_utc": null, "subreddit": "Kotlin", "selftext": "", "author_fullname": "t2_dflkk", "saved": false, "mod_reason_title": null, "gilded": 0, "clicked": false, "title": "Java Slack SDK 1.1.0 includes a Kotlin DSL for building messages", "link_flair_richtext": [], "subreddit_name_prefixed": "r/Kotlin", "hidden": false, "pwls": 6, "link_flair_css_class": null, "downs": 0, "top_awarded_type": null, "hide_score": false, "name": "t3_hswsr4", "quarantine": false, "link_flair_text_color": "dark", "upvote_ratio": 0.98, "author_flair_background_color": null, "subreddit_type": "public", "ups": 53, "total_awards_received": 0, "media_embed": {}, "author_flair_template_id": null, "is_original_content": false, "user_reports": [], "secure_media": null, "is_reddit_media_domain": false, "is_meta": false, "category": null, "secure_media_embed": {}, "link_flair_text": null, "can_mod_post": false, "score": 53, "approved_by": null, "author_premium": false, "thumbnail": "", "edited": false, "author_flair_css_class": null, "author_flair_richtext": [], "gildings": {}, "content_categories": null, "is_self": false, "mod_note": null, "created": 1595025504.0, "link_flair_type": "text", "wls": 6, "removed_by_category": null, "banned_by": null, "author_flair_type": "text", "domain": "slack.dev", "allow_live_comments": false, "selftext_html": null, "likes": null, "suggested_sort": null, "banned_at_utc": null, "url_overridden_by_dest": "https://slack.dev/java-slack-sdk/guides/composing-messages#block-kit-kotlin-dsl", "view_count": null, "archived": false, "no_follow": false, "is_crosspostable": false, "pinned": false, "over_18": false, "all_awardings": [], "awarders": [], "media_only": false, "can_gild": false, "spoiler": false, "locked": false, "author_flair_text": null, "treatment_tags": [], "visited": false, "removed_by": null, "num_reports": null, "distinguished": null, "subreddit_id": "t5_2so2r", "mod_reason_by": null, "removal_reason": null, "link_flair_background_color": "", "id": "hswsr4", "is_robot_indexable": true, "report_reasons": null, "author": "emanguy", "discussion_type": null, "num_comments": 3, "send_replies": true, "whitelist_status": "all_ads", "contest_mode": false, "mod_reports": [], "author_patreon_flair": false, "author_flair_text_color": null, "permalink": "/r/Kotlin/comments/hswsr4/java_slack_sdk_110_includes_a_kotlin_dsl_for/", "parent_whitelist_status": "all_ads", "stickied": false, "url": "https://slack.dev/java-slack-sdk/guides/composing-messages#block-kit-kotlin-dsl", "subreddit_subscribers": 35363, "created_utc": 1594996704.0, "num_crossposts": 0, "media": null, "is_video": false}}], "after": "t3_hswsr4", "before": null}}